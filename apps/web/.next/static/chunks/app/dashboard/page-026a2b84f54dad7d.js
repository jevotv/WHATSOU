(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{4811:function(e,t,a){Promise.resolve().then(a.bind(a,6544))},6544:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return DashboardPage}});var r=a(8708),s=a(9576),l=a(3682),i=a(3226),n=a(7917),o=a(5444),d=a(6803),c=a(2859),u=a(7321),m=a(4896),p=a(2272),h=a(701),x=a(4996),g=a(8681),f=a(885),v=a(5277),b=a(3883);let y=v.fC;v.xz;let j=v.h_,w=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.aV,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});w.displayName=v.aV.displayName;let N=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(j,{children:[(0,r.jsx)(w,{}),(0,r.jsx)(v.VY,{ref:t,className:(0,b.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});N.displayName=v.VY.displayName;let AlertDialogHeader=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};AlertDialogHeader.displayName="AlertDialogHeader";let AlertDialogFooter=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};AlertDialogFooter.displayName="AlertDialogFooter";let _=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.Dx,{ref:t,className:(0,b.cn)("text-lg font-semibold",a),...s})});_.displayName=v.Dx.displayName;let k=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.dk,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",a),...s})});k.displayName=v.dk.displayName;let S=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.aU,{ref:t,className:(0,b.cn)((0,u.d)(),a),...s})});S.displayName=v.aU.displayName;let I=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(v.$j,{ref:t,className:(0,b.cn)((0,u.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});I.displayName=v.$j.displayName;var C=a(5654),P=a(9861),E=a(9102),z=a(372),U=a(638),A=a(8769),O=a(6615),Z=a(9526),T=a(8073),R=a(1644),V=a(9540),D=a(7216),q=a(8053),F=a(6954),L=a(5457),M=a(6072),B=a.n(M),J=a(6370),Q=a(3960),W=a(5948);async function convertToWebP(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,s=await (0,Q.Z)(e,{maxWidthOrHeight:Math.max(t,a),useWebWorker:!0,fileType:"image/webp",initialQuality:r}),l=await new Promise((e,t)=>{let a=new Image;a.onload=()=>{URL.revokeObjectURL(a.src),e(a)},a.onerror=t,a.src=URL.createObjectURL(s)}),i=document.createElement("canvas"),n=i.getContext("2d"),{width:o,height:d}=function(e,t,a,r){let s=Math.min(a/e,r/t);return s>=1?{width:e,height:t}:{width:Math.round(e*s),height:Math.round(t*s)}}(l.width,l.height,t,a);i.width=o,i.height=d,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(l,0,0,o,d);let c=await new Promise(e=>{i.toBlob(t=>e(t),"image/webp",r)});return new File([c],"image.webp",{type:"image/webp"})}async function processProductImage(e,t){let a=t.timestamp||Date.now(),r=(0,W.l)(t.productName),[s,l]=await Promise.all([convertToWebP(e,400,400,.8),convertToWebP(e,1200,1200,.8)]),i=new File([s],"".concat(a,"-thumb.webp"),{type:"image/webp"}),n=new File([l],"".concat(a,"-full.webp"),{type:"image/webp"});return{thumbnail:i,full:n,basePath:r}}var Y=a(6923),X=a(3727),H=a(2979),$=a(9824);function ProductFormModal(e){let{storeId:t,storeSlug:a,product:s,onClose:l,onSaved:i}=e,[d,c]=(0,o.useState)(""),[h,v]=(0,o.useState)(""),[b,j]=(0,o.useState)(""),[w,M]=(0,o.useState)(""),[Q,W]=(0,o.useState)(""),[G,K]=(0,o.useState)(""),[ee,et]=(0,o.useState)(!1),[ea,er]=(0,o.useState)([]),[es,el]=(0,o.useState)([]),[ei,en]=(0,o.useState)(!1),[eo,ed]=(0,o.useState)(!0),[ec,eu]=(0,o.useState)(!1),[em,ep]=(0,o.useState)([]),[eh,ex]=(0,o.useState)(null),{toast:eg}=(0,p.pm)(),{t:ef,language:ev}=(0,Y.Z)(),eb=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(s){var e,t;c(s.name),v(s.description||""),j(s.current_price.toString()),M((null===(e=s.original_price)||void 0===e?void 0:e.toString())||""),W(s.category||""),K((null!==(t=s.quantity)&&void 0!==t?t:0).toString()),et(s.unlimited_stock||!1);let a=[];s.images&&s.images.length>0?a=s.images.sort((e,t)=>e.display_order-t.display_order).map(e=>({id:e.id,url:e.image_url,thumbnailUrl:e.thumbnail_url||e.image_url,altText:e.alt_text||"",status:"completed",progress:100})):s.image_url&&(a=[{id:"legacy-main",url:s.image_url,thumbnailUrl:s.thumbnail_url||s.image_url,altText:"",status:"completed",progress:100}]),ep(a);let r=Array.isArray(s.options)?s.options:[];er(r.map(e=>{let t=Array.isArray(e.values)?e.values.map(e=>String(e)):[];return{name:String(e.name||""),values:t,rawValuesInput:t.join(", ")}})),s.variants&&s.variants.length>0?el(s.variants.map(e=>{var t,a,r;let s={};return e.option_values&&Object.entries(e.option_values).forEach(e=>{let[t,a]=e;s[String(t)]=String(a)}),{id:e.id,option_values:s,price:(null!==(t=e.price)&&void 0!==t?t:0).toString(),quantity:(null!==(a=e.quantity)&&void 0!==a?a:0).toString(),sku:e.sku||"",imageIndex:null!==(r=e.image_index)&&void 0!==r?r:null}})):loadVariants(s.id)}},[s]);let loadVariants=async e=>{let{data:t}=await x.O.from("product_variants").select("*").eq("product_id",e);t&&el(t.map(e=>{var t,a,r;let s={};return e.option_values&&Object.entries(e.option_values).forEach(e=>{let[t,a]=e;s[String(t)]=String(a)}),{id:e.id,option_values:s,price:(null!==(t=e.price)&&void 0!==t?t:0).toString(),quantity:(null!==(a=e.quantity)&&void 0!==a?a:0).toString(),sku:e.sku||"",imageIndex:null!==(r=e.image_index)&&void 0!==r?r:null}}))},handleNativeCamera=async()=>{try{if(em.length>=5){eg({title:"Limit Reached",description:"Maximum 5 images allowed.",variant:"destructive"});return}let e=await X.V1.getPhoto({quality:90,allowEditing:!1,resultType:X.dk.DataUrl,source:X.oK.Prompt});if(e.dataUrl){let t=await fetch(e.dataUrl),a=await t.blob(),r=new File([a],"camera_photo.jpg",{type:a.type});handleAddFiles([r])}}catch(e){"User cancelled photos app"!==e.message&&eg({title:"Error",description:"Could not access camera",variant:"destructive"})}},handleAddFiles=async e=>{let t=5-em.length;if(t<=0){eg({title:"Limit Reached",description:"Maximum 5 images allowed.",variant:"destructive"});return}let a=e.slice(0,t),r=a.map(e=>({id:Math.random().toString(36).substr(2,9),url:URL.createObjectURL(e),thumbnailUrl:URL.createObjectURL(e),altText:"",file:e,status:"pending",progress:0}));ep(e=>[...e,...r]),r.forEach(e=>uploadImageItem(e))},uploadImageItem=async e=>{if(e.file){ep(t=>t.map(t=>t.id===e.id?{...t,status:"uploading"}:t));try{let{thumbnail:t,full:r,basePath:s}=await processProductImage(e.file,{productName:d||"product"});if(!a)throw Error("Store information missing");let l=new FormData;l.append("thumbnail",t),l.append("full",r),l.append("storeSlug",a),l.append("productPath",s);let i=await fetch("/api/upload",{method:"POST",body:l}),n=await i.json();if(!i.ok)throw Error(n.error||"Upload failed");ep(t=>t.map(t=>t.id===e.id?{...t,url:n.fullUrl,thumbnailUrl:n.thumbnailUrl,status:"completed",progress:100}:t))}catch(t){console.error("Upload error",t),ep(t=>t.map(t=>t.id===e.id?{...t,status:"error"}:t)),eg({title:"Upload Failed",description:"Failed to upload image.",variant:"destructive"})}}},retryUpload=e=>{let t=em.find(t=>t.id===e);t&&"error"===t.status&&uploadImageItem(t)},removeImage=e=>{ep(t=>t.filter(t=>t.id!==e))},updateAltText=(e,t)=>{ep(a=>a.map(a=>a.id===e?{...a,altText:t}:a))},handleDragStart=e=>{ex(e)},handleDragOver=(e,t)=>{if(e.preventDefault(),null===eh||eh===t)return;let a=[...em],r=a[eh];a.splice(eh,1),a.splice(t,0,r),ep(a),ex(t)},handleDragEnd=()=>{ex(null)},removeOption=e=>{er(ea.filter((t,a)=>a!==e)),el([])},updateOptionName=(e,t)=>{let a=[...ea];a[e].name=t,er(a)},updateOptionValues=(e,t)=>{let a=[...ea];a[e].rawValuesInput=t,a[e].values=t.split(/[,،]/).map(e=>e.trim()).filter(e=>e.length>0),er(a)},applyQuantityToAll=e=>{el(es.map(t=>({...t,quantity:e})))},updateVariant=(e,t,a)=>{let r=[...es];r[e][t]=a,el(r)},removeVariant=e=>{el(es.filter((t,a)=>a!==e))},getVariantLabel=e=>Object.values(e.option_values||{}).map(e=>String(e)).join(" / "),updateVariantImageIndex=(e,t)=>{let a=[...es];a[e].imageIndex=t,el(a)},executeSave=async()=>{en(!0);try{let e;let a=ea.filter(e=>e.name&&e.values.length>0),r={store_id:t,name:d,description:h||null,current_price:parseFloat(b),original_price:w?parseFloat(w):null,category:Q||null,quantity:parseInt(G)||0,unlimited_stock:ee,images:em.map(e=>({url:e.url,thumbnailUrl:e.thumbnailUrl,altText:e.altText})),options:a,variants:es.map(e=>{var t;return{option_values:e.option_values,price:parseFloat(e.price)||0,quantity:parseInt(e.quantity)||0,sku:e.sku||null,image_index:null!==(t=e.imageIndex)&&void 0!==t?t:null}})};if((e=s?await g.h.put("/api/dashboard/products/".concat(s.id),r):await g.h.post("/api/dashboard/products",r)).error)throw Error(e.error);eg({title:s?ef("products.edit_product"):ef("products.add_new"),description:s?ef("dashboard.product_updated_desc"):ef("dashboard.product_added_desc")}),eu(!1),i()}catch(e){eg({title:"Error",description:e.message,variant:"destructive"})}finally{en(!1)}},handleSubmit=async e=>{if(e.preventDefault(),H.dV.isNativePlatform()&&await $.ej.impact({style:$.y$.Light}),0===em.length){eg({title:"Image Required",description:"Please add at least one image",variant:"destructive"});return}if(em.some(e=>"uploading"===e.status||"pending"===e.status)){eg({title:"Upload in Progress",description:"Please wait for images to finish uploading",variant:"destructive"});return}if(em.some(e=>"error"===e.status)){eg({title:"Upload Failed",description:"Please remove or retry failed images",variant:"destructive"});return}let t=es.length>0,a=!ee&&t&&es.every(e=>0===(parseInt(e.quantity)||0));if(a){eu(!0);return}await executeSave()},ey=es.length>0,ej=!ee&&ey&&es.every(e=>0===(parseInt(e.quantity)||0));return(0,r.jsxs)(f.Vq,{open:!0,onOpenChange:l,children:[(0,r.jsxs)(f.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto rounded-3xl",children:[(0,r.jsx)(f.fK,{children:(0,r.jsx)(f.$N,{className:"text-2xl font-bold",children:s?ef("products.edit_product"):ef("products.add_new")})}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(P._,{children:[ef("products.images_label")," (",em.length,"/5)"]}),em.length<5&&(0,r.jsxs)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return H.dV.isNativePlatform()?handleNativeCamera():null===(e=eb.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 mr-1"})," ",ef("products.add_image")]})]}),(0,r.jsx)("input",{ref:eb,type:"file",accept:"image/*",multiple:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&handleAddFiles(Array.from(e.target.files))},className:"hidden"}),(0,r.jsxs)("div",{className:"grid gap-3",children:[0===em.length&&(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-2xl p-8 hover:bg-gray-50 transition flex flex-col items-center justify-center text-gray-400 cursor-pointer",onClick:()=>{var e;return H.dV.isNativePlatform()?handleNativeCamera():null===(e=eb.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(U.Z,{className:"w-8 h-8 mb-2"}),(0,r.jsx)("p",{children:ef("products.add_first_image")})]}),em.map((e,t)=>(0,r.jsxs)("div",{draggable:!0,onDragStart:()=>handleDragStart(t),onDragOver:e=>handleDragOver(e,t),onDragEnd:handleDragEnd,className:"\n                            relative flex items-center gap-3 p-2 bg-white rounded-xl border border-gray-100 shadow-sm group\n                            ".concat(eh===t?"opacity-50 border-blue-400":"","\n                        "),children:[(0,r.jsx)("div",{className:"cursor-grab text-gray-400 hover:text-gray-600",children:(0,r.jsx)(A.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 shrink-0",children:[(0,r.jsx)(B(),{src:e.thumbnailUrl||e.url,alt:"Thumbnail",fill:!0,className:"object-cover ".concat("uploading"===e.status?"opacity-50":"")}),"uploading"===e.status&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})}),"error"===e.status&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-red-500/10",children:(0,r.jsx)(O.Z,{className:"w-6 h-6 text-red-500"})})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)(m.I,{placeholder:ef("products.alt_text_placeholder")||"Alt text (SEO)",value:e.altText,onChange:t=>updateAltText(e.id,t.target.value),className:"h-8 text-sm"}),"error"===e.status&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Upload failed"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:["error"===e.status&&(0,r.jsx)(u.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>retryUpload(e.id),className:"h-8 w-8 p-0 text-blue-500",children:(0,r.jsx)(Z.Z,{className:"w-4 h-4"})}),(0,r.jsx)(u.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>removeImage(e.id),className:"h-8 w-8 p-0 text-red-500 hover:bg-red-50",children:(0,r.jsx)(T.Z,{className:"w-4 h-4"})})]})]},e.id))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,r.jsxs)(P._,{children:[ef("products.name_label")," *"]}),(0,r.jsx)(m.I,{value:d,onChange:e=>c(e.target.value),placeholder:ef("products.name_placeholder"),className:"rounded-2xl"})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,r.jsx)(P._,{children:ef("products.description_label")}),(0,r.jsx)(C.g,{value:h,onChange:e=>v(e.target.value),placeholder:ef("products.description_placeholder"),rows:3,className:"rounded-2xl resize-none"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(P._,{children:ey?ef("products.price_label"):ef("products.price_label")+" *"}),(0,r.jsx)(m.I,{type:"number",step:"1",value:b,onChange:e=>j(e.target.value),placeholder:"29.99",required:!0,className:"rounded-2xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(P._,{children:ef("products.original_price_label")}),(0,r.jsx)(m.I,{type:"number",step:"1",value:w,onChange:e=>M(e.target.value),placeholder:"39.99",className:"rounded-2xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(P._,{children:ef("products.category_label")}),(0,r.jsx)(m.I,{value:Q,onChange:e=>W(e.target.value),placeholder:ef("products.category_placeholder"),className:"rounded-2xl"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(P._,{children:ef("products.stock_label")}),!ee&&(0,r.jsx)(m.I,{type:"number",value:G,onChange:e=>K(e.target.value),placeholder:"10",required:!ey&&!ee,className:"rounded-2xl"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,r.jsx)(J.r,{id:"unlimited-stock",checked:ee,onCheckedChange:et}),(0,r.jsx)(P._,{htmlFor:"unlimited-stock",className:"cursor-pointer",children:ef("products.unlimited_stock")})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(P._,{className:"text-base",children:ef("products.options_label")}),(0,r.jsxs)(u.z,{type:"button",onClick:()=>{if(ea.length>=3){eg({title:"Maximum options reached",description:"You can only add up to 3 options",variant:"destructive"});return}er([...ea,{name:"",values:[],rawValuesInput:""}])},disabled:ea.length>=3,variant:"outline",className:"rounded-2xl",children:[(0,r.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),ef("products.add_option")]})]}),ea.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-2xl relative",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[ef("products.option_name")," ",t+1]}),ea.length>1&&(0,r.jsx)(u.z,{onClick:()=>removeOption(t),variant:"ghost",size:"sm",className:"rounded-full h-8 w-8 p-0",children:(0,r.jsx)(T.Z,{className:"w-4 h-4 text-red-500"})})]}),(0,r.jsx)(m.I,{value:e.name,onChange:e=>updateOptionName(t,e.target.value),placeholder:ef("products.option_name_placeholder"),className:"rounded-2xl bg-white"}),(0,r.jsx)(m.I,{value:e.rawValuesInput,onChange:e=>updateOptionValues(t,e.target.value),placeholder:ef("products.option_values_placeholder"),className:"rounded-2xl bg-white"}),(0,r.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 text-blue-700 rounded-xl text-xs",children:[(0,r.jsx)(R.Z,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,r.jsx)("span",{children:ef("products.option_values_hint")})]})]},t)),ea.length>0&&ea.some(e=>e.name&&e.values.length>0)&&(0,r.jsxs)(u.z,{type:"button",onClick:()=>{try{let e=ea.filter(e=>e.name&&e.values.length>0);if(0===e.length){eg({title:"No options",description:"Please add options first",variant:"destructive"});return}let t=e.map(e=>e.values.map(e=>String(e).trim())),a=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce((e,t)=>e.flatMap(e=>t.map(t=>[...e,t])),[[]])}(...t),r=a.map(t=>{let a={};e.forEach((e,r)=>{a[String(e.name)]=String(t[r]||"")});let r=es.find(e=>JSON.stringify(e.option_values)===JSON.stringify(a));return r?{...r,id:r.id||void 0,price:String(r.price),quantity:String(r.quantity),sku:String(r.sku),imageIndex:r.imageIndex}:{option_values:a,price:b||"0",quantity:"0",sku:"",imageIndex:null}});el(r),eg({title:"Variants generated!",description:"".concat(r.length," variants created")})}catch(e){eg({title:"Error",description:"Failed to generate variants",variant:"destructive"})}},className:"w-full rounded-2xl bg-[#008069] hover:bg-[#017561]",children:[(0,r.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),ef("products.manage_variants")]})]}),es.length>0&&(0,r.jsx)(E.zF,{open:eo,onOpenChange:ed,children:(0,r.jsxs)("div",{className:"border rounded-2xl overflow-hidden",children:[(0,r.jsxs)(E.wy,{className:"w-full p-4 flex items-center justify-between bg-[#008069] text-white hover:bg-[#017561] transition",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("span",{className:"font-medium",children:[ef("products.variants_label")," (",es.length,")"]})}),(0,r.jsx)(D.Z,{className:"w-5 h-5 transition-transform ".concat(eo?"rotate-180":"")})]}),(0,r.jsxs)(E.Fw,{children:[(0,r.jsxs)("div",{className:"p-3 bg-gray-100 border-b flex gap-2 flex-wrap",children:[(0,r.jsxs)(u.z,{type:"button",onClick:()=>{el(es.map(e=>({...e,price:b})))},variant:"outline",size:"sm",className:"rounded-xl",children:[(0,r.jsx)(q.Z,{className:"w-3 h-3 mr-1"}),ef("common.currency")," ",b||"0"]}),(0,r.jsx)(u.z,{type:"button",onClick:()=>applyQuantityToAll("10"),variant:"outline",size:"sm",className:"rounded-xl",children:"Set Qty 10 for all"})]}),ee&&(0,r.jsx)("div",{className:"p-3 bg-blue-50 border-b text-sm text-blue-700",children:'Product is set to "Always in stock". All variants will also be unlimited.'}),ej&&(0,r.jsxs)("div",{className:"p-3 bg-amber-50 border-b text-sm text-amber-700 flex items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"w-4 h-4 shrink-0"}),(0,r.jsx)("span",{className:"font-bold",children:"ar"===ev?"تنبيه: يجب إضافة كمية للأنواع المتاحة":"Warning: You must add quantity for available variants"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border-b text-xs font-semibold text-gray-500 uppercase tracking-wider",children:[(0,r.jsx)("div",{className:"flex-1",children:ef("products.variants_label")}),(0,r.jsx)("div",{className:"w-16 text-center",children:ef("products.variant_image")||"صورة"}),(0,r.jsx)("div",{className:"w-24",children:ef("products.price_label")}),(0,r.jsx)("div",{className:"w-16 text-center",children:ef("products.stock_label")}),(0,r.jsx)("div",{className:"w-8"})]}),(0,r.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:es.map((e,t)=>{var a,s,l,i;return(0,r.jsx)("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50 transition",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0 flex items-center justify-between sm:justify-start gap-2",children:[(0,r.jsx)("div",{className:"inline-block bg-[#dcf8c6] px-3 py-1.5 rounded-2xl rounded-bl-sm text-sm font-medium",children:getVariantLabel(e)}),(0,r.jsx)(u.z,{type:"button",onClick:()=>removeVariant(t),variant:"ghost",size:"sm",className:"sm:hidden h-8 w-8 p-0 rounded-full text-red-500",children:(0,r.jsx)(T.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto mt-2 sm:mt-0",children:[(0,r.jsxs)(z.Ph,{value:null!==e.imageIndex&&void 0!==e.imageIndex?e.imageIndex.toString():"default",onValueChange:e=>updateVariantImageIndex(t,"default"===e?null:parseInt(e)),children:[(0,r.jsx)(z.i4,{className:"w-16 h-10 sm:h-8 text-xs rounded-xl shrink-0",children:(0,r.jsx)(z.ki,{children:null!==e.imageIndex&&void 0!==e.imageIndex&&(null===(a=em[e.imageIndex])||void 0===a?void 0:a.status)==="completed"?(0,r.jsx)("img",{src:null===(s=em[e.imageIndex])||void 0===s?void 0:s.thumbnailUrl,alt:"",className:"w-5 h-5 rounded object-cover"}):(0,r.jsx)(F.Z,{className:"w-4 h-4 text-gray-400"})})}),(0,r.jsxs)(z.Bw,{children:[(0,r.jsx)(z.Ql,{value:"default",children:(0,r.jsx)("span",{className:"text-gray-500",children:ef("products.default_image")||"افتراضي"})}),em.filter(e=>"completed"===e.status).map((e,t)=>(0,r.jsx)(z.Ql,{value:t.toString(),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("img",{src:e.thumbnailUrl,alt:"",className:"w-6 h-6 rounded object-cover"}),(0,r.jsx)("span",{children:t+1})]})},t))]})]}),(0,r.jsx)(m.I,{type:"number",step:"1",value:String(null!==(l=e.price)&&void 0!==l?l:""),onChange:e=>updateVariant(t,"price",e.target.value),placeholder:"Price",className:"flex-1 min-w-[3rem] h-10 sm:h-8 text-sm rounded-xl"}),ee?(0,r.jsx)("div",{className:"w-20 sm:w-16 h-10 sm:h-8 flex items-center justify-center text-gray-400 bg-gray-50 rounded-xl shrink-0",children:(0,r.jsx)(L.Z,{className:"w-5 h-5"})}):(0,r.jsx)(m.I,{type:"number",value:String(null!==(i=e.quantity)&&void 0!==i?i:""),onChange:e=>updateVariant(t,"quantity",e.target.value),placeholder:"Qty",className:"w-20 sm:w-16 h-10 sm:h-8 text-sm rounded-xl shrink-0"}),(0,r.jsx)(u.z,{type:"button",onClick:()=>removeVariant(t),variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0 rounded-full shrink-0",children:(0,r.jsx)(T.Z,{className:"w-4 h-4 text-red-500"})})]})]})},t)})})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(u.z,{type:"button",onClick:l,variant:"outline",className:"flex-1 rounded-3xl h-12",children:ef("common.back")}),(0,r.jsx)(u.z,{type:"submit",disabled:ei,className:"flex-1 rounded-3xl h-12 bg-[#008069] hover:bg-[#017561]",children:ei?ef("common.saving"):s?ef("products.edit_product"):ef("products.add_new")})]})]})]}),(0,r.jsx)(y,{open:ec,onOpenChange:eu,children:(0,r.jsxs)(N,{className:"rounded-2xl",children:[(0,r.jsxs)(AlertDialogHeader,{children:[(0,r.jsxs)(_,{className:"flex items-center gap-2 text-amber-600",children:[(0,r.jsx)(O.Z,{className:"w-5 h-5"}),"ar"===ev?"تنبيه: الكميات صفر":"Warning: Zero Quantities"]}),(0,r.jsx)(k,{children:"ar"===ev?"لم يتم تحديد كمية لأي من الأنواع. سيتم حفظ المنتج ولكن لن يظهر للعملاء حتى تتوفر كمية.":"No quantities specified for variants. The product will be saved but will not be visible to customers until stock is added."})]}),(0,r.jsxs)(AlertDialogFooter,{className:"gap-2 sm:gap-0",children:[(0,r.jsx)(I,{asChild:!0,children:(0,r.jsx)(u.z,{variant:"outline",className:"rounded-xl",onClick:()=>eu(!1),children:"ar"===ev?"تعديل":"Edit"})}),(0,r.jsx)(S,{asChild:!0,children:(0,r.jsx)(u.z,{onClick:e=>{e.preventDefault(),executeSave()},className:"rounded-xl bg-[#008069] hover:bg-[#017561]",children:"ar"===ev?"حفظ كمسودة":"Save as Draft"})})]})]})})]})}var G=a(4301),K=a(6046);function DashboardPage(){var e;let{store:t,loading:a}=(0,K.o)(),[x,f]=(0,o.useState)([]),[v,b]=(0,o.useState)(!0),[y,j]=(0,o.useState)(!1),[w,N]=(0,o.useState)(null),[_,k]=(0,o.useState)(""),[S,I]=(0,o.useState)(!1),{user:C,loading:P}=(0,d.useAuth)();(0,c.useRouter)();let{toast:E}=(0,p.pm)(),{t:z,direction:U,language:A}=(0,Y.Z)(),{subscription:O}=(0,G.m)(),Z=null!==(e=null==O?void 0:O.isReadOnly)&&void 0!==e&&e,T=(0,o.useCallback)(async()=>{try{let e=await g.h.get("/api/dashboard/products");if(e.error){console.error("Error loading products:",e.error);return}f(e.products||[])}catch(e){console.error("Error loading products:",e)}finally{b(!1)}},[]);(0,o.useEffect)(()=>{(P||C)&&(a||(t?T():b(!1)))},[C,t,a,P,T]);let handleEditProduct=e=>{if(Z){E({title:"ar"===A?"وضع القراءة فقط":"Read-Only Mode",description:"ar"===A?"جدد اشتراكك لتعديل المنتجات":"Renew your subscription to edit products",variant:"destructive"});return}N(e),j(!0)},handleDeleteProduct=async e=>{if(Z){E({title:"ar"===A?"وضع القراءة فقط":"Read-Only Mode",description:"ar"===A?"جدد اشتراكك لحذف المنتجات":"Renew your subscription to delete products",variant:"destructive"});return}if(confirm(z("products.delete_confirm")))try{await g.h.delete("/api/dashboard/products/".concat(e)),E({title:z("dashboard.delete_product_title"),description:z("dashboard.delete_product_desc")}),T()}catch(e){E({title:z("common.error"),description:e.message,variant:"destructive"})}};return v?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f0f2f5]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#008069]"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:z("dashboard.products")}),(0,r.jsx)("p",{className:"text-gray-600",children:z("dashboard.products_count",{count:x.length})})]}),(0,r.jsxs)("div",{className:"flex flex-1 gap-2 w-full sm:w-auto",children:[(0,r.jsxs)("div",{className:"relative flex-1 sm:w-72",children:[(0,r.jsx)(s.Z,{className:"absolute ".concat("rtl"===U?"right-3":"left-3"," top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4")}),(0,r.jsx)(m.I,{type:"text",placeholder:z("dashboard.search_products"),value:_,onChange:e=>k(e.target.value),className:"".concat("rtl"===U?"pr-10":"pl-10"," h-10 rounded-2xl border-gray-200")})]}),(0,r.jsxs)(u.z,{variant:S?"default":"outline",onClick:()=>I(!S),className:"h-10 rounded-2xl gap-2 px-3 sm:px-4 ".concat(S?"bg-[#008069] hover:bg-[#017561]":""),children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"whitespace-nowrap",children:z("dashboard.filter_out_of_stock")})]})]})]})}),0===x.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(i.Z,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:z("dashboard.no_products")}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:z("dashboard.start_selling")}),(0,r.jsxs)(u.z,{onClick:()=>{if(Z){E({title:"ar"===A?"وضع القراءة فقط":"Read-Only Mode",description:"ar"===A?"جدد اشتراكك لإضافة منتجات":"Renew your subscription to add products",variant:"destructive"});return}j(!0)},className:"rounded-3xl h-12 px-8 ".concat(Z?"bg-gray-400 cursor-not-allowed":"bg-[#008069] hover:bg-[#017561]"),children:[(0,r.jsx)(n.Z,{className:"w-5 h-5 ".concat("rtl"===U?"ml-2":"mr-2")}),z("dashboard.add_first_product")]})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.filter(e=>{let t=!0;if(_.trim()){var a,r,s,l;let i=_.toLowerCase();t=e.name.toLowerCase().includes(i)||null!==(s=null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(i))&&void 0!==s&&s||null!==(l=null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(i))&&void 0!==l&&l}let i=!0;if(S){let t=e.variants&&e.variants.length>0,a=t?e.variants.reduce((e,t)=>e+t.quantity,0):e.quantity,r=e.unlimited_stock;(r||a>0)&&(i=!1)}return t&&i}).map(e=>(0,r.jsx)(h.Z,{product:e,onEdit:handleEditProduct,onDelete:handleDeleteProduct},e.id))})]}),y&&t&&(0,r.jsx)(ProductFormModal,{storeId:t.id,storeSlug:t.slug,product:w,onClose:()=>{j(!1),N(null)},onSaved:()=>{j(!1),N(null),T()}}),x.length>0&&!y&&(0,r.jsx)("button",{onClick:()=>{if(Z){E({title:"ar"===A?"وضع القراءة فقط":"Read-Only Mode",description:"ar"===A?"جدد اشتراكك لإضافة منتجات":"Renew your subscription to add products",variant:"destructive"});return}j(!0)},className:"fixed bottom-28 ".concat("rtl"===U?"left-8":"right-8"," z-[60] ").concat(Z?"bg-gray-400":"bg-[#008069] hover:bg-[#017561] hover:scale-110"," text-white rounded-full p-5 shadow-2xl transition-all"),"aria-label":z("dashboard.add_product"),children:(0,r.jsx)(n.Z,{className:"w-8 h-8"})})]})}},372:function(e,t,a){"use strict";a.d(t,{Bw:function(){return x},Ph:function(){return c},Ql:function(){return f},i4:function(){return m},ki:function(){return u}});var r=a(8708),s=a(5444),l=a(379),i=a(7216),n=a(8695),o=a(9375),d=a(3883);let c=l.fC;l.ZA;let u=l.B4,m=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(l.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[s,(0,r.jsx)(l.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.xz.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});p.displayName=l.u_.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=l.$G.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...n}=e;return(0,r.jsx)(l.h_,{children:(0,r.jsxs)(l.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,r.jsx)(p,{}),(0,r.jsx)(l.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(h,{})]})})});x.displayName=l.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});g.displayName=l.__.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(l.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(l.eT,{children:s})]})});f.displayName=l.ck.displayName;let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});v.displayName=l.Z0.displayName},8681:function(e,t,a){"use strict";a.d(t,{h:function(){return l}});var r=a(2979);let s=r.dV.isNativePlatform()?"https://whatsou.com":window.location.origin,l=new class{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}getToken(){return this.token||(this.token=localStorage.getItem("auth_token")),this.token}clearToken(){this.token=null,localStorage.removeItem("auth_token")}isAuthenticated(){return!!this.getToken()}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.getToken(),r=await fetch("".concat(s).concat(e),{...t,headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{},...t.headers}}),l=await r.json();if(!r.ok)throw 401===r.status&&console.error("API Unauthorized (401) - Token NOT cleared for debugging"),Error(l.error||"API Error: ".concat(r.status));return l}get(e){return this.fetch(e,{method:"GET"})}post(e,t){return this.fetch(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.fetch(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.fetch(e,{method:"DELETE"})}constructor(){this.token=null}}},6803:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=a(8708),s=a(5444),l=a(2859),i=a(8681);let n=(0,s.createContext)({user:null,loading:!0,signIn:async()=>{},signUp:async()=>{},signOut:async()=>{}});function AuthProvider(e){let{children:t}=e,[a,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),u=(0,l.useRouter)();(0,s.useEffect)(()=>{let checkSession=async()=>{if(!i.h.isAuthenticated()){c(!1);return}try{let e=await i.h.get("/api/auth/session");e.authenticated&&e.user?o(e.user):i.h.clearToken()}catch(e){console.error("Session check failed:",e),i.h.clearToken()}c(!1)};checkSession()},[]);let signIn=async(e,t)=>{let a=await i.h.post("/api/auth/login",{phone:e,password:t});if(a.error)throw Error(a.error);a.token&&(i.h.setToken(a.token),o(a.user)),u.push("/dashboard"),u.refresh()},signUp=async function(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=await i.h.post("/api/auth/signup",{phone:e,password:t,agreedToPrivacy:a});if(r.error)throw Error(r.error);r.token&&(i.h.setToken(r.token),o(r.user)),u.push("/onboarding"),u.refresh()},signOut=async()=>{try{await i.h.post("/api/auth/logout")}catch(e){}i.h.clearToken(),o(null),u.push("/login"),u.refresh()};return(0,r.jsx)(n.Provider,{value:{user:a,loading:d,signIn,signUp,signOut},children:t})}let useAuth=()=>(0,s.useContext)(n)},6046:function(e,t,a){"use strict";a.d(t,{g:function(){return StoreProvider},o:function(){return useStore}});var r=a(8708),s=a(5444);let l=(0,s.createContext)({store:null,loading:!0,refetchStore:async()=>{}});function StoreProvider(e){let{children:t,value:a}=e;return(0,r.jsx)(l.Provider,{value:a,children:t})}let useStore=()=>(0,s.useContext)(l)},4301:function(e,t,a){"use strict";a.d(t,{m:function(){return useSubscription},q:function(){return SubscriptionProvider}});var r=a(8708),s=a(5444),l=a(8681);let i=(0,s.createContext)({subscription:null,loading:!0,refresh:async()=>{}});function SubscriptionProvider(e){let{children:t}=e,[a,n]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0),c=(0,s.useCallback)(async()=>{try{if(!l.h.isAuthenticated()){d(!1);return}let e=await l.h.get("/api/subscription/status");n(e)}catch(e){console.error("Error fetching subscription status:",e)}finally{d(!1)}},[]);return(0,s.useEffect)(()=>{c()},[c]),(0,r.jsx)(i.Provider,{value:{subscription:a,loading:o,refresh:c},children:t})}function useSubscription(){let e=(0,s.useContext)(i);if(!e)throw Error("useSubscription must be used within a SubscriptionProvider");return e}},4996:function(e,t,a){"use strict";a.d(t,{O:function(){return c}});var r=a(5911),s=a(6028),l=a(2979),i=a(7896);let n={getItem:async e=>{let{value:t}=await i.u.get({key:e});return t},setItem:async(e,t)=>{await i.u.set({key:e,value:t})},removeItem:async e=>{await i.u.remove({key:e})}};var o=a(4850);let d=null,getSupabaseClient=()=>{if(!d){let e="https://bwezqrjwdrobztgeutji.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3ZXpxcmp3ZHJvYnp0Z2V1dGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzg0MDIsImV4cCI6MjA4MTcxNDQwMn0.nsiHXb7EW4KmZqlPy2tZ1-5RTLUsfOMcNa9Wq3xtPeQ";if(!e||!t){console.error("Supabase Client Error: Missing env vars");{let a=Object.keys(o.env).filter(e=>e.startsWith("NEXT_PUBLIC_SUPABASE"));console.error("Available SUPABASE env vars:",a),console.error("Expected: NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY"),console.error("Current values status:",{url:!!e,key:!!t,keyLength:t?t.length:0}),console.warn("Initializing Supabase with dummy values to prevent crash. Check your environment variables.")}}d=l.dV.isNativePlatform()?(0,r.eI)(e||"https://placeholder.supabase.co",t||"placeholder-key",{auth:{storage:n,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}):(0,s.createBrowserClient)(e||"https://placeholder.supabase.co",t||"placeholder-key")}return d},c=new Proxy({},{get:(e,t)=>getSupabaseClient()[t]})},5948:function(e,t,a){"use strict";function slugify(e){if(!e)return"";let t={ا:"a",أ:"a",إ:"e",آ:"a",ء:"a",ب:"b",ت:"t",ث:"th",ج:"g",ح:"7",خ:"5",د:"d",ذ:"th",ر:"r",z:"z",ز:"z",س:"s",ش:"sh",ص:"s",ض:"d",ط:"t",ظ:"z",ع:"3",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",m:"m",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"a","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","؟":"","،":"-","؛":""," ":"-"},a=e.split("").map(e=>t[e]||e).join("");return(a=a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""))?a:"store-"+Math.random().toString(36).substring(2,8)}a.d(t,{l:function(){return slugify}})}},function(e){e.O(0,[7683,8389,8679,9203,1989,215,9433,5501,3583,7855,2081,912,9619,1744],function(){return e(e.s=4811)}),_N_E=e.O()}]);