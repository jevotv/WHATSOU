(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6633],{9213:function(e,t,a){"use strict";a.d(t,{Z:function(){return createLucideIcon}});var r=a(5444);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...e)=>e.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:i,iconNode:c,...o},d)=>(0,r.createElement)("svg",{ref:d,...n,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:mergeClasses("lucide",l),...o},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(i)?i:[i]])),createLucideIcon=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...n},l)=>(0,r.createElement)(s,{ref:l,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(e)}`,a),...n}));return a.displayName=`${e}`,a}},852:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8793:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},9526:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},246:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},265:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5395:function(e,t,a){Promise.resolve().then(a.bind(a,8913))},8913:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return SubscriptionPage}});var r=a(8708),n=a(5444),s=a(2859),l=a(6923);a(5913),a(9796);var i=a(4194),c=(0,i.$)("bf0e1330aea4c984fb4b6c37d8690d64d88b26aa"),o=(0,i.$)("b2c3b2c0c4cd18681f1c6b705e0769c170ac9b7a"),d=(0,i.$)("34931017bbcf5e6dc00900cffda6e6f7cbf70b63"),u=(0,i.$)("5f03e88b372d5f6e8284bc0ce0e0f38ece698a10"),m=a(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var h=a(265);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,m.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),p=(0,m.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var f=a(852),b=a(9526);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,m.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var v=a(246);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let w=(0,m.Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),j=(0,m.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var N=a(8793);let k={active:{color:"bg-green-500",textColor:"text-green-600",bgColor:"bg-green-50",icon:x,labelAr:"نشط",labelEn:"Active"},grace:{color:"bg-yellow-500",textColor:"text-yellow-600",bgColor:"bg-yellow-50",icon:h.Z,labelAr:"فترة سماح",labelEn:"Grace Period"},expired:{color:"bg-red-500",textColor:"text-red-600",bgColor:"bg-red-50",icon:y,labelAr:"منتهي",labelEn:"Expired"},inactive:{color:"bg-gray-400",textColor:"text-gray-600",bgColor:"bg-gray-50",icon:p,labelAr:"غير نشط",labelEn:"Inactive"}};function SubscriptionPage(){let{t:e,direction:t,language:a}=(0,l.Z)(),i=(0,s.useRouter)(),m=(0,s.useSearchParams)(),[h,y]=(0,n.useState)(null),[p,C]=(0,n.useState)([]),[S,_]=(0,n.useState)(!0),[E,Z]=(0,n.useState)(!1),[R,P]=(0,n.useState)("card"),[A,L]=(0,n.useState)("monthly"),[M,O]=(0,n.useState)(!1),[D,$]=(0,n.useState)(null);async function loadData(){_(!0);let[e,t]=await Promise.all([c(),d()]);y(e),C(t.transactions||[]),_(!1)}async function handlePayment(){if(Z(!0),"instapay"===R||"vodafone"===R){let e=await u(R,A);if(e.error){alert(e.error),Z(!1);return}$(e),Z(!1);return}let e=await o("card");if(e.error){alert(e.error),Z(!1);return}e.payment_url?window.location.href=e.payment_url:e.client_secret&&e.public_key?window.location.href="https://accept.paymob.com/unifiedcheckout/?publicKey=".concat(e.public_key,"&clientSecret=").concat(e.client_secret):(Z(!1),alert("Something went wrong. Please try again."))}if((0,n.useEffect)(()=>{loadData(),"complete"===m.get("status")&&(O(!0),setTimeout(()=>O(!1),5e3))},[m]),S)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#008069]"})});let z=k[(null==h?void 0:h.status)||"inactive"],H=z.icon;return(0,r.jsxs)("div",{className:"p-4 max-w-2xl mx-auto space-y-6",dir:t,children:[(0,r.jsxs)("button",{onClick:()=>i.push("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-[#008069] transition",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"ar"===a?"الرئيسية":"Home"})]}),M&&(0,r.jsx)("div",{className:"fixed top-4 right-4 left-4 md:left-auto md:w-96 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 animate-slide-down",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(x,{className:"w-6 h-6"}),(0,r.jsx)("span",{children:"ar"===a?"تم تفعيل اشتراكك بنجاح!":"Subscription activated successfully!"})]})}),(0,r.jsxs)("div",{className:"rounded-2xl ".concat(z.bgColor," p-6 shadow-sm"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"ar"===a?"الاشتراك":"Subscription"}),(0,r.jsx)("button",{onClick:loadData,className:"p-2 hover:bg-white/50 rounded-full transition",children:(0,r.jsx)(b.Z,{className:"w-5 h-5 text-gray-500"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 ".concat(z.color," rounded-full flex items-center justify-center"),children:(0,r.jsx)(H,{className:"w-8 h-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(z.textColor),children:"ar"===a?z.labelAr:z.labelEn}),(null==h?void 0:h.daysRemaining)!==null&&(null==h?void 0:h.daysRemaining)!==void 0&&h.daysRemaining>0&&(0,r.jsx)("p",{className:"text-gray-600",children:"ar"===a?"متبقي ".concat(h.daysRemaining," يوم"):"".concat(h.daysRemaining," days remaining")})]})]}),(null==h?void 0:h.isReadOnly)&&(0,r.jsx)("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-4 mb-4",children:(0,r.jsx)("p",{className:"text-yellow-800 font-medium",children:"ar"===a?"⚠️ لوحة التحكم في وضع القراءة فقط. جدد اشتراكك للاستمرار.":"⚠️ Dashboard is in read-only mode. Renew to continue."})}),(null==h?void 0:h.expiresAt)&&"active"===h.status&&(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:["ar"===a?"ينتهي في: ":"Expires: ",new Date(h.expiresAt).toLocaleDateString("ar"===a?"ar-EG":"en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),((null==h?void 0:h.status)!=="active"||(null==h?void 0:h.daysRemaining)!==null&&(null==h?void 0:h.daysRemaining)!==void 0&&h.daysRemaining<=7)&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:(null==h?void 0:h.status)==="active"?"ar"===a?"تجديد مبكر":"Early Renewal":"ar"===a?"اشترك الآن":"Subscribe Now"}),!(null==h?void 0:h.isFirstSubscription)&&(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsxs)("div",{className:"bg-gray-100 p-1 rounded-xl flex",dir:"ltr",children:[(0,r.jsx)("button",{onClick:()=>L("monthly"),className:"px-6 py-2 rounded-lg text-sm font-medium transition-all ".concat("monthly"===A?"bg-white text-[#008069] shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Monthly"}),(0,r.jsxs)("button",{onClick:()=>L("yearly"),className:"px-6 py-2 rounded-lg text-sm font-medium transition-all ".concat("yearly"===A?"bg-white text-[#008069] shadow-sm":"text-gray-500 hover:text-gray-700"),children:["Yearly",(0,r.jsx)("span",{className:"ml-1 text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded-full",children:"-16%"})]})]})}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-[#008069] to-[#00a884] text-white rounded-xl p-4 mb-6",children:[(0,r.jsxs)("p",{className:"text-3xl font-bold",children:[(null==h?void 0:h.isFirstSubscription)?100:"yearly"===A?3e3:300," EGP"]}),(0,r.jsx)("p",{className:"opacity-80",children:(null==h?void 0:h.isFirstSubscription)?"ar"===a?"للشهر الأول":"for the first month":"yearly"===A?"ar"===a?"سنوياً":"per year":"ar"===a?"شهرياً":"per month"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,r.jsxs)("button",{disabled:!0,className:"p-4 rounded-xl border-2 border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed flex flex-col items-center gap-1",children:[(0,r.jsx)(g,{className:"w-6 h-6 text-gray-400"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-400",children:"ar"===a?"بطاقة":"Card"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"ar"===a?"قريباً":"Soon"})]}),(0,r.jsxs)("button",{onClick:()=>{P("instapay"),$(null)},className:"p-4 rounded-xl border-2 transition flex flex-col items-center gap-2 ".concat("instapay"===R?"border-[#008069] bg-[#008069]/5":"border-gray-200 hover:border-gray-300"),children:[(0,r.jsx)(v.Z,{className:"w-6 h-6 ".concat("instapay"===R?"text-[#008069]":"text-gray-400")}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat("instapay"===R?"text-[#008069]":"text-gray-600"),children:"InstaPay"})]}),(0,r.jsxs)("button",{onClick:()=>{P("vodafone"),$(null)},className:"p-4 rounded-xl border-2 transition flex flex-col items-center gap-2 ".concat("vodafone"===R?"border-[#008069] bg-[#008069]/5":"border-gray-200 hover:border-gray-300"),children:[(0,r.jsx)(w,{className:"w-6 h-6 ".concat("vodafone"===R?"text-[#008069]":"text-gray-400")}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat("vodafone"===R?"text-[#008069]":"text-gray-600"),children:"Vodafone"})]})]}),D&&("instapay"===R||"vodafone"===R)&&(0,r.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4 space-y-4",children:[(0,r.jsx)("p",{className:"text-amber-800 font-medium text-center",children:"ar"===a?"✅ تم منحك صلاحية 24 ساعة مؤقتة":"✅ You have 24h temporary access"}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("a",{href:D.payment_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-blue-600 text-white py-3 px-4 rounded-xl font-medium hover:bg-blue-700",children:[(0,r.jsx)(j,{className:"w-5 h-5"}),"ar"===a?"افتح رابط الدفع":"Open Payment Link"]}),(0,r.jsxs)("a",{href:D.whatsapp_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-[#25D366] text-white py-3 px-4 rounded-xl font-medium hover:bg-[#1ebe57]",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5"}),"ar"===a?"أرسل السكرين شوت":"Send Screenshot"]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"ar"===a?"بعد الدفع، أرسل سكرين شوت التحويل على الواتساب":"After payment, send the screenshot via WhatsApp"})]}),(!D||"card"===R)&&(0,r.jsx)("button",{onClick:handlePayment,disabled:E,className:"w-full bg-[#008069] hover:bg-[#006a58] text-white font-bold py-4 px-6 rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed",children:E?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,r.jsx)("span",{children:"ar"===a?"جاري التحميل...":"Loading..."})]}):"card"===R?"ar"===a?"ادفع الآن":"Pay Now":"ar"===a?"تأكيد الدفع":"Confirm Payment"})]}),p.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"ar"===a?"سجل المدفوعات":"Payment History"}),(0,r.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-gray-800",children:[e.amount," EGP"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ar"===a?"ar-EG":"en-US")})]}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("success"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:"success"===e.status?"ar"===a?"ناجح":"Success":"pending"===e.status?"ar"===a?"قيد الانتظار":"Pending":"ar"===a?"فشل":"Failed"})]},e.id))})]})]})}},6923:function(e,t,a){"use strict";a.d(t,{Z:function(){return r.useLanguage}});var r=a(7855)},4194:function(e,t,a){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return createServerReference}});let r=a(5913);function createServerReference(e){let{createServerReference:t}=a(6866);return t(e,r.callServer)}},9796:function(e,t){"use strict";Symbol.for("react.server.reference")},1599:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=a(5444),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var r,s={},o=null,d=null;for(r in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:n,type:e,key:o,ref:d,props:s,_owner:i.current}}t.Fragment=s,t.jsx=q,t.jsxs=q},8708:function(e,t,a){"use strict";e.exports=a(1599)},2859:function(e,t,a){e.exports=a(7699)}},function(e){e.O(0,[7855,912,9619,1744],function(){return e(e.s=5395)}),_N_E=e.O()}]);