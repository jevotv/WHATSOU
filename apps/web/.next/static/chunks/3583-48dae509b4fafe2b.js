"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3583],{3727:function(e,r,i){i.d(r,{V1:function(){return d},dk:function(){return c},oK:function(){return s}});var a,o,l,s,f,c,u=i(2979);(a=s||(s={})).Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS",(o=f||(f={})).Rear="REAR",o.Front="FRONT",(l=c||(c={})).Uri="uri",l.Base64="base64",l.DataUrl="dataUrl";let CameraWeb=class CameraWeb extends u.Uw{async getPhoto(e){return new Promise(async(r,i)=>{if(e.webUseInput||e.source===s.Photos)this.fileInputExperience(e,r,i);else if(e.source===s.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",async a=>{let o=a.detail;0===o?this.fileInputExperience(e,r,i):this.cameraExperience(e,r,i)})}else this.cameraExperience(e,r,i)})}async pickImages(e){return new Promise(async(e,r)=>{this.multipleFileInputExperience(e,r)})}async cameraExperience(e,r,i){if(customElements.get("pwa-camera-modal")){let a=document.createElement("pwa-camera-modal");a.facingMode=e.direction===f.Front?"user":"environment",document.body.appendChild(a);try{await a.componentOnReady(),a.addEventListener("onPhoto",async o=>{let l=o.detail;null===l?i(new u.xz("User cancelled photos app")):l instanceof Error?i(l):r(await this._getCameraPhoto(l,e)),a.dismiss(),document.body.removeChild(a)}),a.present()}catch(a){this.fileInputExperience(e,r,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,r,i)}fileInputExperience(e,r,i){let a=document.querySelector("#_capacitor-camera-input"),cleanup=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||((a=document.createElement("input")).id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",i=>{let o=a.files[0],l="jpeg";if("image/png"===o.type?l="png":"image/gif"===o.type&&(l="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){let i=new FileReader;i.addEventListener("load",()=>{if("dataUrl"===e.resultType)r({dataUrl:i.result,format:l});else if("base64"===e.resultType){let e=i.result.split(",")[1];r({base64String:e,format:l})}cleanup()}),i.readAsDataURL(o)}else r({webPath:URL.createObjectURL(o),format:l}),cleanup()}),a.addEventListener("cancel",e=>{i(new u.xz("User cancelled photos app")),cleanup()})),a.accept="image/*",a.capture=!0,e.source===s.Photos||e.source===s.Prompt?a.removeAttribute("capture"):e.direction===f.Front?a.capture="user":e.direction===f.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(e,r){let i=document.querySelector("#_capacitor-camera-input-multiple"),cleanup=()=>{var e;null===(e=i.parentNode)||void 0===e||e.removeChild(i)};i||((i=document.createElement("input")).id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",r=>{let a=[];for(let e=0;e<i.files.length;e++){let r=i.files[e],o="jpeg";"image/png"===r.type?o="png":"image/gif"===r.type&&(o="gif"),a.push({webPath:URL.createObjectURL(r),format:o})}e({photos:a}),cleanup()}),i.addEventListener("cancel",e=>{r(new u.xz("User cancelled photos app")),cleanup()})),i.accept="image/*",i.click()}_getCameraPhoto(e,r){return new Promise((i,a)=>{let o=new FileReader,l=e.type.split("/")[1];"uri"===r.resultType?i({webPath:URL.createObjectURL(e),format:l,saved:!1}):(o.readAsDataURL(e),o.onloadend=()=>{let e=o.result;"dataUrl"===r.resultType?i({dataUrl:e,format:l,saved:!1}):i({base64String:e.split(",")[1],format:l,saved:!1})},o.onerror=e=>{a(e)})})}async checkPermissions(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{let e=await window.navigator.permissions.query({name:"camera"});return{camera:e.state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}};new CameraWeb;let d=(0,u.fo)("Camera",{web:()=>new CameraWeb})},836:function(e,r,i){var a,o,l,s;i.d(r,{k:function(){return o},y:function(){return a}}),(l=a||(a={})).Heavy="HEAVY",l.Medium="MEDIUM",l.Light="LIGHT",(s=o||(o={})).Success="SUCCESS",s.Warning="WARNING",s.Error="ERROR"},9824:function(e,r,i){i.d(r,{ej:function(){return l},y$:function(){return o.y}});var a=i(2979),o=i(836);let l=(0,a.fo)("Haptics",{web:()=>i.e(503).then(i.bind(i,503)).then(e=>new e.HapticsWeb)})},638:function(e,r,i){i.d(r,{Z:function(){return o}});var a=i(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},6615:function(e,r,i){i.d(r,{Z:function(){return o}});var a=i(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8769:function(e,r,i){i.d(r,{Z:function(){return o}});var a=i(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},6954:function(e,r,i){i.d(r,{Z:function(){return o}});var a=i(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},9526:function(e,r,i){i.d(r,{Z:function(){return o}});var a=i(9213);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},5277:function(e,r,i){i.d(r,{$j:function(){return O},Dx:function(){return k},VY:function(){return R},aU:function(){return S},aV:function(){return T},dk:function(){return L},fC:function(){return B},h_:function(){return P},xz:function(){return M}});var a=i(5444),o=i(6341),l=i(8556),s=i(3507),f=i(1082),c=i(432),u=i(8708),d="AlertDialog",[h,p]=(0,o.b)(d,[s.p8]),g=(0,s.p8)(),AlertDialog=e=>{let{__scopeAlertDialog:r,...i}=e,a=g(r);return(0,u.jsx)(s.fC,{...a,...i,modal:!0})};AlertDialog.displayName=d;var m=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,...a}=e,o=g(i);return(0,u.jsx)(s.xz,{...o,...a,ref:r})});m.displayName="AlertDialogTrigger";var AlertDialogPortal=e=>{let{__scopeAlertDialog:r,...i}=e,a=g(r);return(0,u.jsx)(s.h_,{...a,...i})};AlertDialogPortal.displayName="AlertDialogPortal";var w=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,...a}=e,o=g(i);return(0,u.jsx)(s.aV,{...o,...a,ref:r})});w.displayName="AlertDialogOverlay";var v="AlertDialogContent",[y,A]=h(v),b=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,children:o,...d}=e,h=g(i),p=a.useRef(null),m=(0,l.e)(r,p),w=a.useRef(null);return(0,u.jsx)(s.jm,{contentName:v,titleName:_,docsSlug:"alert-dialog",children:(0,u.jsx)(y,{scope:i,cancelRef:w,children:(0,u.jsxs)(s.VY,{role:"alertdialog",...h,...d,ref:m,onOpenAutoFocus:(0,f.M)(d.onOpenAutoFocus,e=>{e.preventDefault(),w.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,u.jsx)(c.A4,{children:o}),(0,u.jsx)(DescriptionWarning,{contentRef:p})]})})})});b.displayName=v;var _="AlertDialogTitle",F=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,...a}=e,o=g(i);return(0,u.jsx)(s.Dx,{...o,...a,ref:r})});F.displayName=_;var U="AlertDialogDescription",C=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,...a}=e,o=g(i);return(0,u.jsx)(s.dk,{...o,...a,ref:r})});C.displayName=U;var E=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,...a}=e,o=g(i);return(0,u.jsx)(s.x8,{...o,...a,ref:r})});E.displayName="AlertDialogAction";var I="AlertDialogCancel",x=a.forwardRef((e,r)=>{let{__scopeAlertDialog:i,...a}=e,{cancelRef:o}=A(I,i),f=g(i),c=(0,l.e)(r,o);return(0,u.jsx)(s.x8,{...f,...a,ref:c})});x.displayName=I;var DescriptionWarning=({contentRef:e})=>{let r=`\`${v}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${v}\` by passing a \`${U}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${v}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{let i=document.getElementById(e.current?.getAttribute("aria-describedby"));i||console.warn(r)},[r,e]),null},B=AlertDialog,M=m,P=AlertDialogPortal,T=w,R=b,S=E,O=x,k=F,L=C},3960:function(e,r,i){let a;function copyExifWithoutOrientation(e,r){return new Promise(function(i,a){let o;return getApp1Segment(e).then(function(e){try{return o=e,i(new Blob([r.slice(0,2),o,r.slice(2)],{type:"image/jpeg"}))}catch(e){return a(e)}},a)})}i.d(r,{Z:function(){return imageCompression}});let getApp1Segment=e=>new Promise((r,i)=>{let a=new FileReader;a.addEventListener("load",({target:{result:e}})=>{let a=new DataView(e),o=0;if(65496!==a.getUint16(o))return i("not a valid JPEG");for(o+=2;;){let l=a.getUint16(o);if(65498===l)break;let s=a.getUint16(o+2);if(65505===l&&1165519206===a.getUint32(o+4)){let l;let f=o+10;switch(a.getUint16(f)){case 18761:l=!0;break;case 19789:l=!1;break;default:return i("TIFF header contains invalid endian")}if(42!==a.getUint16(f+2,l))return i("TIFF header contains invalid version");let c=a.getUint32(f+4,l),u=f+c+2+12*a.getUint16(f+c,l);for(let e=f+c+2;e<u;e+=12)if(274==a.getUint16(e,l)){if(3!==a.getUint16(e+2,l))return i("Orientation data type is invalid");if(1!==a.getUint32(e+4,l))return i("Orientation data count is invalid");a.setUint16(e+8,1,l);break}return r(e.slice(o,o+2+s))}o+=2+s}return r(new Blob)}),a.readAsArrayBuffer(e)});var o,l,s,f,c={};s={},({get exports(){return c},set exports(t){c=t}}).exports=s,s.parse=function(e,r){for(var i=s.bin.readUshort,a=s.bin.readUint,o=0,l={},f=new Uint8Array(e),c=f.length-4;101010256!=a(f,c);)c--;var u=i(f,o=c+4+4);i(f,o+=2);var d=a(f,o+=2),h=a(f,o+=4);o+=4,o=h;for(var p=0;p<u;p++){a(f,o),a(f,o+=16),d=a(f,o+=4);var g=a(f,o+=4),m=i(f,o+=4),w=i(f,o+2),v=i(f,o+4),y=a(f,o+=14);o+=4+(m+w+v),s._readLocal(f,y,l,d,g,r)}return l},s._readLocal=function(e,r,i,a,o,l){var f=s.bin.readUshort,c=s.bin.readUint;c(e,r),f(e,r+=4),f(e,r+=2);var u=f(e,r+=2);c(e,r+=2),c(e,r+=4);var d=f(e,r+=12),h=f(e,r+=2);r+=2;var p=s.bin.readUTF8(e,r,d);if(r+=d+h,l)i[p]={size:o,csize:a};else{var g=new Uint8Array(e.buffer,r);if(0==u)i[p]=new Uint8Array(g.buffer.slice(r,r+a));else{if(8!=u)throw"unknown compression method: "+u;var m=new Uint8Array(o);s.inflateRaw(g,m),i[p]=m}}},s.inflateRaw=function(e,r){return s.F.inflate(e,r)},s.inflate=function(e,r){return e[0],e[1],s.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)},s.deflate=function(e,r){null==r&&(r={level:6});var i=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[i]=120,a[i+1]=156,i+=2,i=s.F.deflateRaw(e,a,i,r.level);var o=s.adler(e,0,e.length);return a[i+0]=o>>>24&255,a[i+1]=o>>>16&255,a[i+2]=o>>>8&255,a[i+3]=o>>>0&255,new Uint8Array(a.buffer,0,i+4)},s.deflateRaw=function(e,r){null==r&&(r={level:6});var i=new Uint8Array(50+Math.floor(1.1*e.length)),a=s.F.deflateRaw(e,i,a,r.level);return new Uint8Array(i.buffer,0,a)},s.encode=function(e,r){null==r&&(r=!1);var i=0,a=s.bin.writeUint,o=s.bin.writeUshort,l={};for(var f in e){var c=!s._noNeed(f)&&!r,u=e[f],d=s.crc.crc(u,0,u.length);l[f]={cpr:c,usize:u.length,crc:d,file:c?s.deflateRaw(u):u}}for(var f in l)i+=l[f].file.length+30+46+2*s.bin.sizeUTF8(f);i+=22;var h=new Uint8Array(i),p=0,g=[];for(var f in l){var m=l[f];g.push(p),p=s._writeHeader(h,p,f,m,0)}var w=0,v=p;for(var f in l)m=l[f],g.push(p),p=s._writeHeader(h,p,f,m,1,g[w++]);var y=p-v;return a(h,p,101010256),o(h,p+=8,w),o(h,p+=2,w),a(h,p+=2,y),a(h,p+=4,v),p+=6,h.buffer},s._noNeed=function(e){var r=e.split(".").pop().toLowerCase();return -1!="png,jpg,jpeg,zip".indexOf(r)},s._writeHeader=function(e,r,i,a,o,l){var f=s.bin.writeUint,c=s.bin.writeUshort,u=a.file;return f(e,r,0==o?67324752:33639248),r+=4,1==o&&(r+=2),c(e,r,20),c(e,r+=2,0),c(e,r+=2,a.cpr?8:0),f(e,r+=2,0),f(e,r+=4,a.crc),f(e,r+=4,u.length),f(e,r+=4,a.usize),c(e,r+=4,s.bin.sizeUTF8(i)),c(e,r+=2,0),r+=2,1==o&&(f(e,r+=10,l),r+=4),r+=s.bin.writeUTF8(e,r,i),0==o&&(e.set(u,r),r+=u.length),r},s.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var i=r,a=0;a<8;a++)1&i?i=3988292384^i>>>1:i>>>=1;e[r]=i}return e}(),update:function(e,r,i,a){for(var o=0;o<a;o++)e=s.crc.table[255&(e^r[i+o])]^e>>>8;return e},crc:function(e,r,i){return 4294967295^s.crc.update(4294967295,e,r,i)}},s.adler=function(e,r,i){for(var a=1,o=0,l=r,s=r+i;l<s;){for(var f=Math.min(l+5552,s);l<f;)o+=a+=e[l++];a%=65521,o%=65521}return o<<16|a},s.bin={readUshort:function(e,r){return e[r]|e[r+1]<<8},writeUshort:function(e,r,i){e[r]=255&i,e[r+1]=i>>8&255},readUint:function(e,r){return 16777216*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])},writeUint:function(e,r,i){e[r]=255&i,e[r+1]=i>>8&255,e[r+2]=i>>16&255,e[r+3]=i>>24&255},readASCII:function(e,r,i){for(var a="",o=0;o<i;o++)a+=String.fromCharCode(e[r+o]);return a},writeASCII:function(e,r,i){for(var a=0;a<i.length;a++)e[r+a]=i.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,i){for(var a,o="",l=0;l<i;l++)o+="%"+s.bin.pad(e[r+l].toString(16));try{a=decodeURIComponent(o)}catch(a){return s.bin.readASCII(e,r,i)}return a},writeUTF8:function(e,r,i){for(var a=i.length,o=0,l=0;l<a;l++){var s=i.charCodeAt(l);if(0==(4294967168&s))e[r+o]=s,o++;else if(0==(4294965248&s))e[r+o]=192|s>>6,e[r+o+1]=128|s>>0&63,o+=2;else if(0==(4294901760&s))e[r+o]=224|s>>12,e[r+o+1]=128|s>>6&63,e[r+o+2]=128|s>>0&63,o+=3;else{if(0!=(4292870144&s))throw"e";e[r+o]=240|s>>18,e[r+o+1]=128|s>>12&63,e[r+o+2]=128|s>>6&63,e[r+o+3]=128|s>>0&63,o+=4}}return o},sizeUTF8:function(e){for(var r=e.length,i=0,a=0;a<r;a++){var o=e.charCodeAt(a);if(0==(4294967168&o))i++;else if(0==(4294965248&o))i+=2;else if(0==(4294901760&o))i+=3;else{if(0!=(4292870144&o))throw"e";i+=4}}return i}},s.F={},s.F.deflateRaw=function(e,r,i,a){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],l=s.F.U,f=s.F._goodIndex;s.F._hash;var c=s.F._putsE,u=0,d=i<<3,h=0,p=e.length;if(0==a){for(;u<p;)c(r,d,u+(E=Math.min(65535,p-u))==p?1:0),d=s.F._copyExact(e,u,E,r,d+8),u+=E;return d>>>3}var g=l.lits,m=l.strt,w=l.prev,v=0,y=0,A=0,b=0,_=0,F=0;for(p>2&&(m[F=s.F._hash(e,0)]=0),u=0;u<p;u++){if(_=F,u+1<p-2){F=s.F._hash(e,u+1);var U=u+1&32767;w[U]=m[F],m[F]=U}if(h<=u){(v>14e3||y>26697)&&p-u>100&&(h<u&&(g[v]=u-h,v+=2,h=u),d=s.F._writeBlock(u==p-1||h==p?1:0,g,v,b,e,A,u-A,r,d),v=y=b=0,A=u);var C=0;u<p-2&&(C=s.F._bestMatch(e,u,w,_,Math.min(o[2],p-u),o[3]));var E=C>>>16,I=65535&C;if(0!=C){I=65535&C;var x=f(E=C>>>16,l.of0);l.lhst[257+x]++;var B=f(I,l.df0);l.dhst[B]++,b+=l.exb[x]+l.dxb[B],g[v]=E<<23|u-h,g[v+1]=I<<16|x<<8|B,v+=2,h=u+E}else l.lhst[e[u]]++;y++}}for(A==u&&0!=e.length||(h<u&&(g[v]=u-h,v+=2,h=u),d=s.F._writeBlock(1,g,v,b,e,A,u-A,r,d),v=0,y=0,v=y=b=0,A=u);0!=(7&d);)d++;return d>>>3},s.F._bestMatch=function(e,r,i,a,o,l){var f=32767&r,c=i[f],u=f-c+32768&32767;if(c==f||a!=s.F._hash(e,r-u))return 0;for(var d=0,h=0,p=Math.min(32767,r);u<=p&&0!=--l&&c!=f;){if(0==d||e[r+d]==e[r+d-u]){var g=s.F._howLong(e,r,u);if(g>d){if(h=u,(d=g)>=o)break;u+2<g&&(g=u+2);for(var m=0,w=0;w<g-2;w++){var v=r-u+w+32768&32767,y=v-i[v]+32768&32767;y>m&&(m=y,c=v)}}}u+=(f=c)-(c=i[f])+32768&32767}return d<<16|h},s.F._howLong=function(e,r,i){if(e[r]!=e[r-i]||e[r+1]!=e[r+1-i]||e[r+2]!=e[r+2-i])return 0;var a=r,o=Math.min(e.length,r+258);for(r+=3;r<o&&e[r]==e[r-i];)r++;return r-a},s.F._hash=function(e,r){return(e[r]<<8|e[r+1])+(e[r+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(e,r,i,a,o,l,f,c,u){var d,h,p,g,m,w,v,y,A,b,_,F=s.F.U,U=s.F._putsF,C=s.F._putsE;F.lhst[256]++,g=(p=s.F.getTrees())[0],m=p[1],w=p[2],v=p[3],y=p[4],A=p[5],b=p[6],_=p[7];var E=32+(0==(u+3&7)?0:8-(u+3&7))+(f<<3),I=a+s.F.contSize(F.fltree,F.lhst)+s.F.contSize(F.fdtree,F.dhst),x=a+s.F.contSize(F.ltree,F.lhst)+s.F.contSize(F.dtree,F.dhst);x+=14+3*A+s.F.contSize(F.itree,F.ihst)+(2*F.ihst[16]+3*F.ihst[17]+7*F.ihst[18]);for(var B=0;B<286;B++)F.lhst[B]=0;for(B=0;B<30;B++)F.dhst[B]=0;for(B=0;B<19;B++)F.ihst[B]=0;var M=E<I&&E<x?0:I<x?1:2;if(U(c,u,e),U(c,u+1,M),u+=3,0==M){for(;0!=(7&u);)u++;u=s.F._copyExact(o,l,f,c,u)}else{if(1==M&&(d=F.fltree,h=F.fdtree),2==M){s.F.makeCodes(F.ltree,g),s.F.revCodes(F.ltree,g),s.F.makeCodes(F.dtree,m),s.F.revCodes(F.dtree,m),s.F.makeCodes(F.itree,w),s.F.revCodes(F.itree,w),d=F.ltree,h=F.dtree,C(c,u,v-257),C(c,u+=5,y-1),C(c,u+=5,A-4),u+=4;for(var P=0;P<A;P++)C(c,u+3*P,F.itree[1+(F.ordr[P]<<1)]);u+=3*A,u=s.F._codeTiny(b,F.itree,c,u),u=s.F._codeTiny(_,F.itree,c,u)}for(var T=l,R=0;R<i;R+=2){for(var S=r[R],O=S>>>23,k=T+(8388607&S);T<k;)u=s.F._writeLit(o[T++],d,c,u);if(0!=O){var L=r[R+1],H=L>>16,Q=L>>8&255,$=255&L;C(c,u=s.F._writeLit(257+Q,d,c,u),O-F.of0[Q]),u+=F.exb[Q],U(c,u=s.F._writeLit($,h,c,u),H-F.df0[$]),u+=F.dxb[$],T+=O}}u=s.F._writeLit(256,d,c,u)}return u},s.F._copyExact=function(e,r,i,a,o){var l=o>>>3;return a[l]=i,a[l+1]=i>>>8,a[l+2]=255-a[l],a[l+3]=255-a[l+1],l+=4,a.set(new Uint8Array(e.buffer,r,i),l),o+(i+4<<3)},s.F.getTrees=function(){for(var e=s.F.U,r=s.F._hufTree(e.lhst,e.ltree,15),i=s.F._hufTree(e.dhst,e.dtree,15),a=[],o=s.F._lenCodes(e.ltree,a),l=[],f=s.F._lenCodes(e.dtree,l),c=0;c<a.length;c+=2)e.ihst[a[c]]++;for(c=0;c<l.length;c+=2)e.ihst[l[c]]++;for(var u=s.F._hufTree(e.ihst,e.itree,7),d=19;d>4&&0==e.itree[1+(e.ordr[d-1]<<1)];)d--;return[r,i,u,o,f,d,a,l]},s.F.getSecond=function(e){for(var r=[],i=0;i<e.length;i+=2)r.push(e[i+1]);return r},s.F.nonZero=function(e){for(var r="",i=0;i<e.length;i+=2)0!=e[i+1]&&(r+=(i>>1)+",");return r},s.F.contSize=function(e,r){for(var i=0,a=0;a<r.length;a++)i+=r[a]*e[1+(a<<1)];return i},s.F._codeTiny=function(e,r,i,a){for(var o=0;o<e.length;o+=2){var l=e[o],f=e[o+1];a=s.F._writeLit(l,r,i,a);var c=16==l?2:17==l?3:7;l>15&&(s.F._putsE(i,a,f,c),a+=c)}return a},s.F._lenCodes=function(e,r){for(var i=e.length;2!=i&&0==e[i-1];)i-=2;for(var a=0;a<i;a+=2){var o=e[a+1],l=a+3<i?e[a+3]:-1,s=a+5<i?e[a+5]:-1,f=0==a?-1:e[a-1];if(0==o&&l==o&&s==o){for(var c=a+5;c+2<i&&e[c+2]==o;)c+=2;(u=Math.min(c+1-a>>>1,138))<11?r.push(17,u-3):r.push(18,u-11),a+=2*u-2}else if(o==f&&l==o&&s==o){for(c=a+5;c+2<i&&e[c+2]==o;)c+=2;var u=Math.min(c+1-a>>>1,6);r.push(16,u-3),a+=2*u-2}else r.push(o,0)}return i>>>1},s.F._hufTree=function(e,r,i){var a=[],o=e.length,l=r.length,f=0;for(f=0;f<l;f+=2)r[f]=0,r[f+1]=0;for(f=0;f<o;f++)0!=e[f]&&a.push({lit:f,f:e[f]});var c=a.length,u=a.slice(0);if(0==c)return 0;if(1==c){var d=a[0].lit;return u=0==d?1:0,r[1+(d<<1)]=1,r[1+(u<<1)]=1,1}a.sort(function(e,r){return e.f-r.f});var h=a[0],p=a[1],g=0,m=1,w=2;for(a[0]={lit:-1,f:h.f+p.f,l:h,r:p,d:0};m!=c-1;)h=g!=m&&(w==c||a[g].f<a[w].f)?a[g++]:a[w++],p=g!=m&&(w==c||a[g].f<a[w].f)?a[g++]:a[w++],a[m++]={lit:-1,f:h.f+p.f,l:h,r:p};var v=s.F.setDepth(a[m-1],0);for(v>i&&(s.F.restrictDepth(u,i,v),v=i),f=0;f<c;f++)r[1+(u[f].lit<<1)]=u[f].d;return v},s.F.setDepth=function(e,r){return -1!=e.lit?(e.d=r,r):Math.max(s.F.setDepth(e.l,r+1),s.F.setDepth(e.r,r+1))},s.F.restrictDepth=function(e,r,i){var a=0,o=1<<i-r,l=0;for(e.sort(function(e,r){return r.d==e.d?e.f-r.f:r.d-e.d}),a=0;a<e.length&&e[a].d>r;a++){var s=e[a].d;e[a].d=r,l+=o-(1<<i-s)}for(l>>>=i-r;l>0;)(s=e[a].d)<r?(e[a].d++,l-=1<<r-s-1):a++;for(;a>=0;a--)e[a].d==r&&l<0&&(e[a].d--,l++);0!=l&&console.log("debt left")},s.F._goodIndex=function(e,r){var i=0;return r[16]<=e&&(i|=16),r[8|i]<=e&&(i|=8),r[4|i]<=e&&(i|=4),r[2|i]<=e&&(i|=2),r[1|i]<=e&&(i|=1),i},s.F._writeLit=function(e,r,i,a){return s.F._putsF(i,a,r[e<<1]),a+r[1+(e<<1)]},s.F.inflate=function(e,r){var i=Uint8Array;if(3==e[0]&&0==e[1])return r||new i(0);var a=s.F,o=a._bitsF,l=a._bitsE,f=a._decodeTiny,c=a.makeCodes,u=a.codes2map,d=a._get17,h=a.U,p=null==r;p&&(r=new i(e.length>>>2<<3));for(var g,m,w=0,v=0,y=0,A=0,b=0,_=0,F=0,U=0,C=0;0==w;)if(w=o(e,C,1),v=o(e,C+1,2),C+=3,0!=v){if(p&&(r=s.F._check(r,U+131072)),1==v&&(g=h.flmap,m=h.fdmap,_=511,F=31),2==v){y=l(e,C,5)+257,A=l(e,C+5,5)+1,b=l(e,C+10,4)+4,C+=14;for(var E=0;E<38;E+=2)h.itree[E]=0,h.itree[E+1]=0;var I=1;for(E=0;E<b;E++){var x=l(e,C+3*E,3);h.itree[1+(h.ordr[E]<<1)]=x,x>I&&(I=x)}C+=3*b,c(h.itree,I),u(h.itree,I,h.imap),g=h.lmap,m=h.dmap,C=f(h.imap,(1<<I)-1,y+A,e,C,h.ttree);var B=a._copyOut(h.ttree,0,y,h.ltree);_=(1<<B)-1;var M=a._copyOut(h.ttree,y,A,h.dtree);F=(1<<M)-1,c(h.ltree,B),u(h.ltree,B,g),c(h.dtree,M),u(h.dtree,M,m)}for(;;){var P=g[d(e,C)&_];C+=15&P;var T=P>>>4;if(T>>>8==0)r[U++]=T;else{if(256==T)break;var R=U+T-254;if(T>264){var S=h.ldef[T-257];R=U+(S>>>3)+l(e,C,7&S),C+=7&S}var O=m[d(e,C)&F];C+=15&O;var k=O>>>4,L=h.ddef[k],H=(L>>>4)+o(e,C,15&L);for(C+=15&L,p&&(r=s.F._check(r,U+131072));U<R;)r[U]=r[U++-H],r[U]=r[U++-H],r[U]=r[U++-H],r[U]=r[U++-H];U=R}}}else{0!=(7&C)&&(C+=8-(7&C));var Q=4+(C>>>3),$=e[Q-4]|e[Q-3]<<8;p&&(r=s.F._check(r,U+$)),r.set(new i(e.buffer,e.byteOffset+Q,$),U),C=Q+$<<3,U+=$}return r.length==U?r:r.slice(0,U)},s.F._check=function(e,r){var i=e.length;if(r<=i)return e;var a=new Uint8Array(Math.max(i<<1,r));return a.set(e,0),a},s.F._decodeTiny=function(e,r,i,a,o,l){for(var f=s.F._bitsE,c=s.F._get17,u=0;u<i;){var d=e[c(a,o)&r];o+=15&d;var h=d>>>4;if(h<=15)l[u]=h,u++;else{var p=0,g=0;16==h?(g=3+f(a,o,2),o+=2,p=l[u-1]):17==h?(g=3+f(a,o,3),o+=3):18==h&&(g=11+f(a,o,7),o+=7);for(var m=u+g;u<m;)l[u]=p,u++}}return o},s.F._copyOut=function(e,r,i,a){for(var o=0,l=0,s=a.length>>>1;l<i;){var f=e[l+r];a[l<<1]=0,a[1+(l<<1)]=f,f>o&&(o=f),l++}for(;l<s;)a[l<<1]=0,a[1+(l<<1)]=0,l++;return o},s.F.makeCodes=function(e,r){for(var i,a,o,l,f=s.F.U,c=e.length,u=f.bl_count,d=0;d<=r;d++)u[d]=0;for(d=1;d<c;d+=2)u[e[d]]++;var h=f.next_code;for(i=0,u[0]=0,a=1;a<=r;a++)i=i+u[a-1]<<1,h[a]=i;for(o=0;o<c;o+=2)0!=(l=e[o+1])&&(e[o]=h[l],h[l]++)},s.F.codes2map=function(e,r,i){for(var a=e.length,o=s.F.U.rev15,l=0;l<a;l+=2)if(0!=e[l+1])for(var f=l>>1,c=e[l+1],u=f<<4|c,d=r-c,h=e[l]<<d,p=h+(1<<d);h!=p;)i[o[h]>>>15-r]=u,h++},s.F.revCodes=function(e,r){for(var i=s.F.U.rev15,a=15-r,o=0;o<e.length;o+=2){var l=e[o]<<r-e[o+1];e[o]=i[l]>>>a}},s.F._putsE=function(e,r,i){i<<=7&r;var a=r>>>3;e[a]|=i,e[a+1]|=i>>>8},s.F._putsF=function(e,r,i){i<<=7&r;var a=r>>>3;e[a]|=i,e[a+1]|=i>>>8,e[a+2]|=i>>>16},s.F._bitsE=function(e,r,i){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<i)-1},s.F._bitsF=function(e,r,i){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<i)-1},s.F._get17=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},s.F._get25=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},s.F.U=(o=Uint16Array,l=Uint32Array,{next_code:new o(16),bl_count:new o(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new o(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new l(32),flmap:new o(512),fltree:[],fdmap:new o(32),fdtree:[],lmap:new o(32768),ltree:[],ttree:[],dmap:new o(32768),dtree:[],imap:new o(512),itree:[],rev15:new o(32768),lhst:new l(286),dhst:new l(30),ihst:new l(19),lits:new l(15e3),strt:new o(65536),prev:new o(32768)}),function(){for(var e=s.F.U,r=0;r<32768;r++){var i=r;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,e.rev15[r]=(i>>>16|i<<16)>>>17}function pushV(e,r,i){for(;0!=r--;)e.push(0,i)}for(r=0;r<32;r++)e.ldef[r]=e.of0[r]<<3|e.exb[r],e.ddef[r]=e.df0[r]<<4|e.dxb[r];pushV(e.fltree,144,8),pushV(e.fltree,112,9),pushV(e.fltree,24,7),pushV(e.fltree,8,8),s.F.makeCodes(e.fltree,9),s.F.codes2map(e.fltree,9,e.flmap),s.F.revCodes(e.fltree,9),pushV(e.fdtree,32,5),s.F.makeCodes(e.fdtree,5),s.F.codes2map(e.fdtree,5,e.fdmap),s.F.revCodes(e.fdtree,5),pushV(e.itree,19,0),pushV(e.ltree,286,0),pushV(e.dtree,30,0),pushV(e.ttree,320,0)}();var u=(f={__proto__:null,default:c},[c].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in f)){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(f,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(f));let d=function(){var e={nextZero(e,r){for(;0!=e[r];)r++;return r},readUshort:(e,r)=>e[r]<<8|e[r+1],writeUshort(e,r,i){e[r]=i>>8&255,e[r+1]=255&i},readUint:(e,r)=>16777216*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3]),writeUint(e,r,i){e[r]=i>>24&255,e[r+1]=i>>16&255,e[r+2]=i>>8&255,e[r+3]=255&i},readASCII(e,r,i){let a="";for(let o=0;o<i;o++)a+=String.fromCharCode(e[r+o]);return a},writeASCII(e,r,i){for(let a=0;a<i.length;a++)e[r+a]=i.charCodeAt(a)},readBytes(e,r,i){let a=[];for(let o=0;o<i;o++)a.push(e[r+o]);return a},pad:e=>e.length<2?`0${e}`:e,readUTF8(r,i,a){let o,l="";for(let o=0;o<a;o++)l+=`%${e.pad(r[i+o].toString(16))}`;try{o=decodeURIComponent(l)}catch(o){return e.readASCII(r,i,a)}return o}};function decodeImage(r,i,a,o){let l=i*a,s=_getBPP(o),f=Math.ceil(i*s/8),c=new Uint8Array(4*l),u=new Uint32Array(c.buffer),{ctype:d}=o,{depth:h}=o,p=e.readUshort;if(6==d){let e=l<<2;if(8==h)for(var g=0;g<e;g+=4)c[g]=r[g],c[g+1]=r[g+1],c[g+2]=r[g+2],c[g+3]=r[g+3];if(16==h)for(g=0;g<e;g++)c[g]=r[g<<1]}else if(2==d){let e=o.tabs.tRNS;if(null==e){if(8==h)for(g=0;g<l;g++){var m=3*g;u[g]=-16777216|r[m+2]<<16|r[m+1]<<8|r[m]}if(16==h)for(g=0;g<l;g++)m=6*g,u[g]=-16777216|r[m+4]<<16|r[m+2]<<8|r[m]}else{var w=e[0];let i=e[1],a=e[2];if(8==h)for(g=0;g<l;g++){var v=g<<2;m=3*g,u[g]=-16777216|r[m+2]<<16|r[m+1]<<8|r[m],r[m]==w&&r[m+1]==i&&r[m+2]==a&&(c[v+3]=0)}if(16==h)for(g=0;g<l;g++)v=g<<2,m=6*g,u[g]=-16777216|r[m+4]<<16|r[m+2]<<8|r[m],p(r,m)==w&&p(r,m+2)==i&&p(r,m+4)==a&&(c[v+3]=0)}}else if(3==d){let e=o.tabs.PLTE,s=o.tabs.tRNS,u=s?s.length:0;if(1==h)for(var y,A=0;A<a;A++){var b=A*f,_=A*i;for(g=0;g<i;g++){v=_+g<<2;var F=3*(y=r[b+(g>>3)]>>7-((7&g)<<0)&1);c[v]=e[F],c[v+1]=e[F+1],c[v+2]=e[F+2],c[v+3]=y<u?s[y]:255}}if(2==h)for(A=0;A<a;A++)for(b=A*f,_=A*i,g=0;g<i;g++)v=_+g<<2,F=3*(y=r[b+(g>>2)]>>6-((3&g)<<1)&3),c[v]=e[F],c[v+1]=e[F+1],c[v+2]=e[F+2],c[v+3]=y<u?s[y]:255;if(4==h)for(A=0;A<a;A++)for(b=A*f,_=A*i,g=0;g<i;g++)v=_+g<<2,F=3*(y=r[b+(g>>1)]>>4-((1&g)<<2)&15),c[v]=e[F],c[v+1]=e[F+1],c[v+2]=e[F+2],c[v+3]=y<u?s[y]:255;if(8==h)for(g=0;g<l;g++)v=g<<2,F=3*(y=r[g]),c[v]=e[F],c[v+1]=e[F+1],c[v+2]=e[F+2],c[v+3]=y<u?s[y]:255}else if(4==d){if(8==h)for(g=0;g<l;g++){v=g<<2;var U,C=r[U=g<<1];c[v]=C,c[v+1]=C,c[v+2]=C,c[v+3]=r[U+1]}if(16==h)for(g=0;g<l;g++)v=g<<2,C=r[U=g<<2],c[v]=C,c[v+1]=C,c[v+2]=C,c[v+3]=r[U+2]}else if(0==d)for(w=o.tabs.tRNS?o.tabs.tRNS:-1,A=0;A<a;A++){let e=A*f,a=A*i;if(1==h)for(var E=0;E<i;E++){var I=(C=255*(r[e+(E>>>3)]>>>7-(7&E)&1))==255*w?0:255;u[a+E]=I<<24|C<<16|C<<8|C}else if(2==h)for(E=0;E<i;E++)I=(C=85*(r[e+(E>>>2)]>>>6-((3&E)<<1)&3))==85*w?0:255,u[a+E]=I<<24|C<<16|C<<8|C;else if(4==h)for(E=0;E<i;E++)I=(C=17*(r[e+(E>>>1)]>>>4-((1&E)<<2)&15))==17*w?0:255,u[a+E]=I<<24|C<<16|C<<8|C;else if(8==h)for(E=0;E<i;E++)I=(C=r[e+E])==w?0:255,u[a+E]=I<<24|C<<16|C<<8|C;else if(16==h)for(E=0;E<i;E++)C=r[e+(E<<1)],I=p(r,e+(E<<1))==w?0:255,u[a+E]=I<<24|C<<16|C<<8|C}return c}function _decompress(e,i,a,o){let l=_getBPP(e),s=Math.ceil(a*l/8),f=new Uint8Array((s+1+e.interlace)*o);return i=e.tabs.CgBI?r(i,f):_inflate(i,f),0==e.interlace?i=_filterZero(i,e,0,a,o):1==e.interlace&&(i=function(e,r){let i=r.width,a=r.height,o=_getBPP(r),l=o>>3,s=Math.ceil(i*o/8),f=new Uint8Array(a*s),c=0,u=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1],g=0;for(;g<7;){let w=h[g],v=p[g],y=0,A=0,b=u[g];for(;b<a;)b+=w,A++;let _=d[g];for(;_<i;)_+=v,y++;let F=Math.ceil(y*o/8);_filterZero(e,r,c,y,A);let U=0,C=u[g];for(;C<a;){let r=d[g],a=c+U*F<<3;for(;r<i;){var m;if(1==o&&(m=(m=e[a>>3])>>7-(7&a)&1,f[C*s+(r>>3)]|=m<<7-((7&r)<<0)),2==o&&(m=(m=e[a>>3])>>6-(7&a)&3,f[C*s+(r>>2)]|=m<<6-((3&r)<<1)),4==o&&(m=(m=e[a>>3])>>4-(7&a)&15,f[C*s+(r>>1)]|=m<<4-((1&r)<<2)),o>=8){let i=C*s+r*l;for(let r=0;r<l;r++)f[i+r]=e[(a>>3)+r]}a+=o,r+=v}U++,C+=w}y*A!=0&&(c+=A*(1+F)),g+=1}return f}(i,e)),i}function _inflate(e,i){return r(new Uint8Array(e.buffer,2,e.length-6),i)}var r=function(){let e={H:{}};return e.H.N=function(r,i){let a=Uint8Array,o,l,s=0,f=0,c=0,u=0,d=0,h=0,p=0,g=0,m=0;if(3==r[0]&&0==r[1])return i||new a(0);let w=e.H,v=w.b,y=w.e,A=w.R,b=w.n,_=w.A,F=w.Z,U=w.m,C=null==i;for(C&&(i=new a(r.length>>>2<<5));0==s;)if(s=v(r,m,1),f=v(r,m+1,2),m+=3,0!=f){if(C&&(i=e.H.W(i,g+131072)),1==f&&(o=U.J,l=U.h,h=511,p=31),2==f){c=y(r,m,5)+257,u=y(r,m+5,5)+1,d=y(r,m+10,4)+4,m+=14;let e=1;for(var E=0;E<38;E+=2)U.Q[E]=0,U.Q[E+1]=0;for(E=0;E<d;E++){let i=y(r,m+3*E,3);U.Q[1+(U.X[E]<<1)]=i,i>e&&(e=i)}m+=3*d,b(U.Q,e),_(U.Q,e,U.u),o=U.w,l=U.d,m=A(U.u,(1<<e)-1,c+u,r,m,U.v);let i=w.V(U.v,0,c,U.C);h=(1<<i)-1;let a=w.V(U.v,c,u,U.D);p=(1<<a)-1,b(U.C,i),_(U.C,i,o),b(U.D,a),_(U.D,a,l)}for(;;){let e=o[F(r,m)&h];m+=15&e;let a=e>>>4;if(a>>>8==0)i[g++]=a;else{if(256==a)break;{let e=g+a-254;if(a>264){let i=U.q[a-257];e=g+(i>>>3)+y(r,m,7&i),m+=7&i}let o=l[F(r,m)&p];m+=15&o;let s=o>>>4,f=U.c[s],c=(f>>>4)+v(r,m,15&f);for(m+=15&f;g<e;)i[g]=i[g++-c],i[g]=i[g++-c],i[g]=i[g++-c],i[g]=i[g++-c];g=e}}}}else{0!=(7&m)&&(m+=8-(7&m));let o=4+(m>>>3),l=r[o-4]|r[o-3]<<8;C&&(i=e.H.W(i,g+l)),i.set(new a(r.buffer,r.byteOffset+o,l),g),m=o+l<<3,g+=l}return i.length==g?i:i.slice(0,g)},e.H.W=function(e,r){let i=e.length;if(r<=i)return e;let a=new Uint8Array(i<<1);return a.set(e,0),a},e.H.R=function(r,i,a,o,l,s){let f=e.H.e,c=e.H.Z,u=0;for(;u<a;){let e=r[c(o,l)&i];l+=15&e;let a=e>>>4;if(a<=15)s[u]=a,u++;else{let e=0,r=0;16==a?(r=3+f(o,l,2),l+=2,e=s[u-1]):17==a?(r=3+f(o,l,3),l+=3):18==a&&(r=11+f(o,l,7),l+=7);let i=u+r;for(;u<i;)s[u]=e,u++}}return l},e.H.V=function(e,r,i,a){let o=0,l=0,s=a.length>>>1;for(;l<i;){let i=e[l+r];a[l<<1]=0,a[1+(l<<1)]=i,i>o&&(o=i),l++}for(;l<s;)a[l<<1]=0,a[1+(l<<1)]=0,l++;return o},e.H.n=function(r,i){let a,o,l,s;let f=e.H.m,c=r.length,u=f.j;for(var d=0;d<=i;d++)u[d]=0;for(d=1;d<c;d+=2)u[r[d]]++;let h=f.K;for(a=0,u[0]=0,o=1;o<=i;o++)a=a+u[o-1]<<1,h[o]=a;for(l=0;l<c;l+=2)0!=(s=r[l+1])&&(r[l]=h[s],h[s]++)},e.H.A=function(r,i,a){let o=r.length,l=e.H.m.r;for(let e=0;e<o;e+=2)if(0!=r[e+1]){let o=e>>1,s=r[e+1],f=o<<4|s,c=i-s,u=r[e]<<c,d=u+(1<<c);for(;u!=d;)a[l[u]>>>15-i]=f,u++}},e.H.l=function(r,i){let a=e.H.m.r,o=15-i;for(let e=0;e<r.length;e+=2){let l=r[e]<<i-r[e+1];r[e]=a[l]>>>o}},e.H.M=function(e,r,i){i<<=7&r;let a=r>>>3;e[a]|=i,e[a+1]|=i>>>8},e.H.I=function(e,r,i){i<<=7&r;let a=r>>>3;e[a]|=i,e[a+1]|=i>>>8,e[a+2]|=i>>>16},e.H.e=function(e,r,i){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<i)-1},e.H.b=function(e,r,i){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<i)-1},e.H.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},e.H.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},e.H.m=function(){let e=Uint16Array,r=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new e(65536),g:new e(32768)}}(),function(){let r=e.H.m;for(var i=0;i<32768;i++){let e=i;e=(4278255360&(e=(4042322160&(e=(3435973836&(e=(2863311530&e)>>>1|(1431655765&e)<<1))>>>2|(858993459&e)<<2))>>>4|(252645135&e)<<4))>>>8|(16711935&e)<<8,r.r[i]=(e>>>16|e<<16)>>>17}function n(e,r,i){for(;0!=r--;)e.push(0,i)}for(i=0;i<32;i++)r.q[i]=r.S[i]<<3|r.T[i],r.c[i]=r.p[i]<<4|r.z[i];n(r._,144,8),n(r._,112,9),n(r._,24,7),n(r._,8,8),e.H.n(r._,9),e.H.A(r._,9,r.J),e.H.l(r._,9),n(r.$,32,5),e.H.n(r.$,5),e.H.A(r.$,5,r.h),e.H.l(r.$,5),n(r.Q,19,0),n(r.C,286,0),n(r.D,30,0),n(r.v,320,0)}(),e.H.N}();function _getBPP(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function _filterZero(e,r,i,a,o){let l,s,f=_getBPP(r),c=Math.ceil(a*f/8);f=Math.ceil(f/8);let u=e[i],d=0;if(u>1&&(e[i]=[0,0,1][u-2]),3==u)for(d=f;d<c;d++)e[d+1]=e[d+1]+(e[d+1-f]>>>1)&255;for(let r=0;r<o;r++)if(u=e[(s=(l=i+r*c)+r+1)-1],d=0,0==u)for(;d<c;d++)e[l+d]=e[s+d];else if(1==u){for(;d<f;d++)e[l+d]=e[s+d];for(;d<c;d++)e[l+d]=e[s+d]+e[l+d-f]}else if(2==u)for(;d<c;d++)e[l+d]=e[s+d]+e[l+d-c];else if(3==u){for(;d<f;d++)e[l+d]=e[s+d]+(e[l+d-c]>>>1);for(;d<c;d++)e[l+d]=e[s+d]+(e[l+d-c]+e[l+d-f]>>>1)}else{for(;d<f;d++)e[l+d]=e[s+d]+_paeth(0,e[l+d-c],0);for(;d<c;d++)e[l+d]=e[s+d]+_paeth(e[l+d-f],e[l+d-c],e[l+d-f-c])}return e}function _paeth(e,r,i){let a=e+r-i,o=a-e,l=a-r,s=a-i;return o*o<=l*l&&o*o<=s*s?e:l*l<=s*s?r:i}function _copyTile(e,r,i,a,o,l,s,f,c){let u=Math.min(r,o),d=Math.min(i,l),h=0,p=0;for(let i=0;i<d;i++)for(let l=0;l<u;l++)if(s>=0&&f>=0?(h=i*r+l<<2,p=(f+i)*o+s+l<<2):(h=(-f+i)*r-s+l<<2,p=i*o+l<<2),0==c)a[p]=e[h],a[p+1]=e[h+1],a[p+2]=e[h+2],a[p+3]=e[h+3];else if(1==c){var g=e[h+3]*(1/255),m=e[h]*g,w=e[h+1]*g,v=e[h+2]*g,y=a[p+3]*(1/255),A=a[p]*y,b=a[p+1]*y,_=a[p+2]*y;let r=1-g,i=g+y*r,o=0==i?0:1/i;a[p+3]=255*i,a[p+0]=(m+A*r)*o,a[p+1]=(w+b*r)*o,a[p+2]=(v+_*r)*o}else if(2==c)g=e[h+3],m=e[h],w=e[h+1],v=e[h+2],y=a[p+3],A=a[p],b=a[p+1],_=a[p+2],g==y&&m==A&&w==b&&v==_?(a[p]=0,a[p+1]=0,a[p+2]=0,a[p+3]=0):(a[p]=m,a[p+1]=w,a[p+2]=v,a[p+3]=g);else if(3==c){if(g=e[h+3],m=e[h],w=e[h+1],v=e[h+2],y=a[p+3],A=a[p],b=a[p+1],_=a[p+2],g==y&&m==A&&w==b&&v==_)continue;if(g<220&&y>20)return!1}return!0}return{decode:function(i){let a=new Uint8Array(i),o=8,l=e.readUshort,s=e.readUint,f={tabs:{},frames:[]},c=new Uint8Array(a.length),u,d=0,h=0,p=[137,80,78,71,13,10,26,10];for(var g,m=0;m<8;m++)if(a[m]!=p[m])throw"The input is not a PNG file!";for(;o<a.length;){let i=e.readUint(a,o);o+=4;let p=e.readASCII(a,o,4);if(o+=4,"IHDR"==p)w=o,f.width=e.readUint(a,w),w+=4,f.height=e.readUint(a,w),w+=4,f.depth=a[w],w++,f.ctype=a[w],w++,f.compress=a[w],w++,f.filter=a[w],w++,f.interlace=a[w],w++;else if("iCCP"==p){for(var w,v,y=o;0!=a[y];)y++;e.readASCII(a,o,y-o),a[y+1];let l=a.slice(y+2,o+i),s=null;try{s=_inflate(l)}catch(e){s=r(l)}f.tabs[p]=s}else if("CgBI"==p)f.tabs[p]=a.slice(o,o+4);else if("IDAT"==p){for(m=0;m<i;m++)c[d+m]=a[o+m];d+=i}else if("acTL"==p)f.tabs[p]={num_frames:s(a,o),num_plays:s(a,o+4)},u=new Uint8Array(a.length);else if("fcTL"==p){0!=h&&((g=f.frames[f.frames.length-1]).data=_decompress(f,u.slice(0,h),g.rect.width,g.rect.height),h=0);let e={x:s(a,o+12),y:s(a,o+16),width:s(a,o+4),height:s(a,o+8)},r=l(a,o+22);r=l(a,o+20)/(0==r?100:r);let i={rect:e,delay:Math.round(1e3*r),dispose:a[o+24],blend:a[o+25]};f.frames.push(i)}else if("fdAT"==p){for(m=0;m<i-4;m++)u[h+m]=a[o+m+4];h+=i-4}else if("pHYs"==p)f.tabs[p]=[e.readUint(a,o),e.readUint(a,o+4),a[o+8]];else if("cHRM"==p)for(m=0,f.tabs[p]=[];m<8;m++)f.tabs[p].push(e.readUint(a,o+4*m));else if("tEXt"==p||"zTXt"==p){null==f.tabs[p]&&(f.tabs[p]={});var A=e.nextZero(a,o),b=e.readASCII(a,o,A-o),_=o+i-A-1;if("tEXt"==p)v=e.readASCII(a,A+1,_);else{var F=_inflate(a.slice(A+2,A+2+_));v=e.readUTF8(F,0,F.length)}f.tabs[p][b]=v}else if("iTXt"==p){null==f.tabs[p]&&(f.tabs[p]={}),A=0,y=o,A=e.nextZero(a,y),b=e.readASCII(a,y,A-y);let r=a[y=A+1];a[y+1],y+=2,A=e.nextZero(a,y),e.readASCII(a,y,A-y),y=A+1,A=e.nextZero(a,y),e.readUTF8(a,y,A-y),_=i-((y=A+1)-o),0==r?v=e.readUTF8(a,y,_):(F=_inflate(a.slice(y,y+_)),v=e.readUTF8(F,0,F.length)),f.tabs[p][b]=v}else if("PLTE"==p)f.tabs[p]=e.readBytes(a,o,i);else if("hIST"==p){let e=f.tabs.PLTE.length/3;for(m=0,f.tabs[p]=[];m<e;m++)f.tabs[p].push(l(a,o+2*m))}else if("tRNS"==p)3==f.ctype?f.tabs[p]=e.readBytes(a,o,i):0==f.ctype?f.tabs[p]=l(a,o):2==f.ctype&&(f.tabs[p]=[l(a,o),l(a,o+2),l(a,o+4)]);else if("gAMA"==p)f.tabs[p]=e.readUint(a,o)/1e5;else if("sRGB"==p)f.tabs[p]=a[o];else if("bKGD"==p)0==f.ctype||4==f.ctype?f.tabs[p]=[l(a,o)]:2==f.ctype||6==f.ctype?f.tabs[p]=[l(a,o),l(a,o+2),l(a,o+4)]:3==f.ctype&&(f.tabs[p]=a[o]);else if("IEND"==p)break;o+=i,e.readUint(a,o),o+=4}return 0!=h&&((g=f.frames[f.frames.length-1]).data=_decompress(f,u.slice(0,h),g.rect.width,g.rect.height)),f.data=_decompress(f,c,f.width,f.height),delete f.compress,delete f.interlace,delete f.filter,f},toRGBA8:function(e){let r=e.width,i=e.height;if(null==e.tabs.acTL)return[decodeImage(e.data,r,i,e).buffer];let a=[];null==e.frames[0].data&&(e.frames[0].data=e.data);let o=r*i*4,l=new Uint8Array(o),s=new Uint8Array(o),f=new Uint8Array(o);for(let u=0;u<e.frames.length;u++){let d=e.frames[u],h=d.rect.x,p=d.rect.y,g=d.rect.width,m=d.rect.height,w=decodeImage(d.data,g,m,e);if(0!=u)for(var c=0;c<o;c++)f[c]=l[c];if(0==d.blend?_copyTile(w,g,m,l,r,i,h,p,0):1==d.blend&&_copyTile(w,g,m,l,r,i,h,p,1),a.push(l.buffer.slice(0)),0==d.dispose);else if(1==d.dispose)_copyTile(s,g,m,l,r,i,h,p,0);else if(2==d.dispose)for(c=0;c<o;c++)l[c]=f[c]}return a},_paeth:_paeth,_copyTile:_copyTile,_bin:e}}();!function(){let{_copyTile:e}=d,{_bin:r}=d,i=d._paeth;var a={table:function(){let e=new Uint32Array(256);for(let r=0;r<256;r++){let i=r;for(let e=0;e<8;e++)1&i?i=3988292384^i>>>1:i>>>=1;e[r]=i}return e}(),update(e,r,i,o){for(let l=0;l<o;l++)e=a.table[255&(e^r[i+l])]^e>>>8;return e},crc:(e,r,i)=>4294967295^a.update(4294967295,e,r,i)};function addErr(e,r,i,a){r[i]+=e[0]*a>>4,r[i+1]+=e[1]*a>>4,r[i+2]+=e[2]*a>>4,r[i+3]+=e[3]*a>>4}function N(e){return Math.max(0,Math.min(255,e))}function D(e,r){let i=e[0]-r[0],a=e[1]-r[1],o=e[2]-r[2],l=e[3]-r[3];return i*i+a*a+o*o+l*l}function dither(e,r,i,a,o,l,s){null==s&&(s=1);let f=a.length,c=[];for(var u,d=0;d<f;d++){let e=a[d];c.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(d=0;d<f;d++){let e=4294967295;for(var h=0,p=0;p<f;p++){var g=D(c[d],c[p]);p!=d&&g<e&&(e=g,h=p)}}let m=new Uint32Array(o.buffer),w=new Int16Array(r*i*4),v=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<v.length;d++)v[d]=255*((v[d]+.5)/16-.5);for(let o=0;o<i;o++)for(let y=0;y<r;y++){d=4*(o*r+y),2!=s?u=[N(e[d]+w[d]),N(e[d+1]+w[d+1]),N(e[d+2]+w[d+2]),N(e[d+3]+w[d+3])]:(g=v[4*(3&o)+(3&y)],u=[N(e[d]+g),N(e[d+1]+g),N(e[d+2]+g),N(e[d+3]+g)]),h=0;let A=16777215;for(p=0;p<f;p++){let e=D(u,c[p]);e<A&&(A=e,h=p)}let b=c[h],_=[u[0]-b[0],u[1]-b[1],u[2]-b[2],u[3]-b[3]];1==s&&(y!=r-1&&addErr(_,w,d+4,7),o!=i-1&&(0!=y&&addErr(_,w,d+4*r-4,3),addErr(_,w,d+4*r,5),y!=r-1&&addErr(_,w,d+4*r+4,1))),l[d>>2]=h,m[d>>2]=a[h]}}function _main(e,i,o,l,s){null==s&&(s={});let{crc:f}=a,c=r.writeUint,u=r.writeUshort,d=r.writeASCII,h=8,p=e.frames.length>1,g,m=!1,w=33+(p?20:0);if(null!=s.sRGB&&(w+=13),null!=s.pHYs&&(w+=21),null!=s.iCCP&&(w+=21+(g=pako.deflate(s.iCCP)).length+4),3==e.ctype){for(var v=e.plte.length,y=0;y<v;y++)e.plte[y]>>>24!=255&&(m=!0);w+=8+3*v+4+(m?8+1*v+4:0)}for(var A=0;A<e.frames.length;A++)p&&(w+=38),w+=(U=e.frames[A]).cimg.length+12,0!=A&&(w+=4);w+=12;let b=new Uint8Array(w),_=[137,80,78,71,13,10,26,10];for(y=0;y<8;y++)b[y]=_[y];if(c(b,h,13),d(b,h+=4,"IHDR"),c(b,h+=4,i),c(b,h+=4,o),b[h+=4]=e.depth,b[++h]=e.ctype,b[++h]=0,b[++h]=0,b[++h]=0,c(b,++h,f(b,h-17,17)),h+=4,null!=s.sRGB&&(c(b,h,1),d(b,h+=4,"sRGB"),b[h+=4]=s.sRGB,c(b,++h,f(b,h-5,5)),h+=4),null!=s.iCCP){let e=13+g.length;c(b,h,e),d(b,h+=4,"iCCP"),d(b,h+=4,"ICC profile"),h+=13,b.set(g,h),c(b,h+=g.length,f(b,h-(e+4),e+4)),h+=4}if(null!=s.pHYs&&(c(b,h,9),d(b,h+=4,"pHYs"),c(b,h+=4,s.pHYs[0]),c(b,h+=4,s.pHYs[1]),b[h+=4]=s.pHYs[2],c(b,++h,f(b,h-13,13)),h+=4),p&&(c(b,h,8),d(b,h+=4,"acTL"),c(b,h+=4,e.frames.length),c(b,h+=4,null!=s.loop?s.loop:0),c(b,h+=4,f(b,h-12,12)),h+=4),3==e.ctype){for(c(b,h,3*(v=e.plte.length)),d(b,h+=4,"PLTE"),h+=4,y=0;y<v;y++){let r=3*y,i=e.plte[y],a=255&i,o=i>>>8&255,l=i>>>16&255;b[h+r+0]=a,b[h+r+1]=o,b[h+r+2]=l}if(c(b,h+=3*v,f(b,h-3*v-4,3*v+4)),h+=4,m){for(c(b,h,v),d(b,h+=4,"tRNS"),h+=4,y=0;y<v;y++)b[h+y]=e.plte[y]>>>24&255;c(b,h+=v,f(b,h-v-4,v+4)),h+=4}}let F=0;for(A=0;A<e.frames.length;A++){var U=e.frames[A];p&&(c(b,h,26),d(b,h+=4,"fcTL"),c(b,h+=4,F++),c(b,h+=4,U.rect.width),c(b,h+=4,U.rect.height),c(b,h+=4,U.rect.x),c(b,h+=4,U.rect.y),u(b,h+=4,l[A]),u(b,h+=2,1e3),b[h+=2]=U.dispose,b[++h]=U.blend,c(b,++h,f(b,h-30,30)),h+=4);let r=U.cimg;c(b,h,(v=r.length)+(0==A?0:4)),h+=4;let i=h;d(b,h,0==A?"IDAT":"fdAT"),h+=4,0!=A&&(c(b,h,F++),h+=4),b.set(r,h),c(b,h+=v,f(b,i,h-i)),h+=4}return c(b,h,0),d(b,h+=4,"IEND"),c(b,h+=4,f(b,h-4,4)),h+=4,b.buffer}function compressPNG(e,r,a){for(let o=0;o<e.frames.length;o++){let l=e.frames[o];l.rect.width;let s=l.rect.height,f=new Uint8Array(s*l.bpl+s);l.cimg=function(e,r,a,o,l,s,f){let c=[],d,h=[0,1,2,3,4];-1!=s?h=[s]:(r*o>5e5||1==a)&&(h=[0]),f&&(d={level:0});for(var p=0;p<h.length;p++){for(let s=0;s<r;s++)!function(e,r,a,o,l,s){let f=a*o,c=f+a;if(e[c]=s,c++,0==s){if(o<500)for(var u=0;u<o;u++)e[c+u]=r[f+u];else e.set(new Uint8Array(r.buffer,f,o),c)}else if(1==s){for(u=0;u<l;u++)e[c+u]=r[f+u];for(u=l;u<o;u++)e[c+u]=r[f+u]-r[f+u-l]+256&255}else if(0==a){for(u=0;u<l;u++)e[c+u]=r[f+u];if(2==s)for(u=l;u<o;u++)e[c+u]=r[f+u];if(3==s)for(u=l;u<o;u++)e[c+u]=r[f+u]-(r[f+u-l]>>1)+256&255;if(4==s)for(u=l;u<o;u++)e[c+u]=r[f+u]-i(r[f+u-l],0,0)+256&255}else{if(2==s)for(u=0;u<o;u++)e[c+u]=r[f+u]+256-r[f+u-o]&255;if(3==s){for(u=0;u<l;u++)e[c+u]=r[f+u]+256-(r[f+u-o]>>1)&255;for(u=l;u<o;u++)e[c+u]=r[f+u]+256-(r[f+u-o]+r[f+u-l]>>1)&255}if(4==s){for(u=0;u<l;u++)e[c+u]=r[f+u]+256-i(0,r[f+u-o],0)&255;for(u=l;u<o;u++)e[c+u]=r[f+u]+256-i(r[f+u-l],r[f+u-o],r[f+u-l-o])&255}}}(l,e,s,o,a,h[p]);c.push(u.deflate(l,d))}let g,m=1e9;for(p=0;p<c.length;p++)c[p].length<m&&(g=p,m=c[p].length);return c[g]}(l.img,s,l.bpp,l.bpl,f,r,a)}}function compress(r,i,a,o,l){let s=l[0],f=l[1],c=l[2],u=l[3],d=l[4],h=l[5],p=6,g=8,m=255;for(var w=0;w<r.length;w++){let e=new Uint8Array(r[w]);for(var v=e.length,y=0;y<v;y+=4)m&=e[y+3]}let A=255!=m,b=function(r,i,a,o,l,s){let f=[];for(var c,u=0;u<r.length;u++){let c=new Uint8Array(r[u]),g=new Uint32Array(c.buffer),m=0,w=0,v=i,y=a,A=o?1:0;if(0!=u){let b=s||o||1==u||0!=f[u-2].dispose?1:2,_=0,F=1e9;for(let e=0;e<b;e++){var d,h=new Uint8Array(r[u-1-e]);let o=new Uint32Array(r[u-1-e]),s=i,f=a,c=-1,A=-1;for(let e=0;e<a;e++)for(let r=0;r<i;r++)g[p=e*i+r]!=o[p]&&(r<s&&(s=r),r>c&&(c=r),e<f&&(f=e),e>A&&(A=e));-1==c&&(s=f=c=A=0),l&&(1==(1&s)&&s--,1==(1&f)&&f--);let b=(c-s+1)*(A-f+1);b<F&&(F=b,_=e,m=s,w=f,v=c-s+1,y=A-f+1)}h=new Uint8Array(r[u-1-_]),1==_&&(f[u-1].dispose=2),e(h,i,a,d=new Uint8Array(v*y*4),v,y,-m,-w,0),1==(A=e(c,i,a,d,v,y,-m,-w,3)?1:0)?_prepareDiff(c,i,a,d,{x:m,y:w,width:v,height:y}):e(c,i,a,d,v,y,-m,-w,0)}else d=c.slice(0);f.push({rect:{x:m,y:w,width:v,height:y},img:d,blend:A,dispose:0})}if(o)for(u=0;u<f.length;u++){if(1==(c=f[u]).blend)continue;let e=c.rect,o=f[u-1].rect,s=Math.min(e.x,o.x),d=Math.min(e.y,o.y),h={x:s,y:d,width:Math.max(e.x+e.width,o.x+o.width)-s,height:Math.max(e.y+e.height,o.y+o.height)-d};f[u-1].dispose=1,u-1!=0&&_updateFrame(r,i,a,f,u-1,h,l),_updateFrame(r,i,a,f,u,h,l)}if(1!=r.length)for(var p=0;p<f.length;p++)(c=f[p]).rect.width,c.rect.height;return f}(r,i,a,s,f,c),_={},F=[],U=[];if(0!=o){let e=[];for(y=0;y<b.length;y++)e.push(b[y].img.buffer);let r=function(e){let r=0;for(var i=0;i<e.length;i++)r+=e[i].byteLength;let a=new Uint8Array(r),o=0;for(i=0;i<e.length;i++){let r=new Uint8Array(e[i]),l=r.length;for(let e=0;e<l;e+=4){let i=r[e],l=r[e+1],s=r[e+2],f=r[e+3];0==f&&(i=l=s=0),a[o+e]=i,a[o+e+1]=l,a[o+e+2]=s,a[o+e+3]=f}o+=l}return a.buffer}(e),i=quantize(r,o);for(y=0;y<i.plte.length;y++)F.push(i.plte[y].est.rgba);let a=0;for(y=0;y<b.length;y++){let e=(E=b[y]).img.length;var C=new Uint8Array(i.inds.buffer,a>>2,e>>2);U.push(C);let r=new Uint8Array(i.abuf,a,e);h&&dither(E.img,E.rect.width,E.rect.height,F,r,C),E.img.set(r),a+=e}}else for(w=0;w<b.length;w++){var E=b[w];let e=new Uint32Array(E.img.buffer);var I=E.rect.width;for(v=e.length,C=new Uint8Array(v),U.push(C),y=0;y<v;y++){let r=e[y];if(0!=y&&r==e[y-1])C[y]=C[y-1];else if(y>I&&r==e[y-I])C[y]=C[y-I];else{let e=_[r];if(null==e&&(_[r]=e=F.length,F.push(r),F.length>=300))break;C[y]=e}}}let x=F.length;for(x<=256&&0==d&&(g=Math.max(g=x<=2?1:x<=4?2:x<=16?4:8,u)),w=0;w<b.length;w++){(E=b[w]).rect.x,E.rect.y,I=E.rect.width;let e=E.rect.height,r=E.img;new Uint32Array(r.buffer);let i=4*I,a=4;if(x<=256&&0==d){i=Math.ceil(g*I/8);var B=new Uint8Array(i*e);let o=U[w];for(let r=0;r<e;r++){y=r*i;let e=r*I;if(8==g)for(var M=0;M<I;M++)B[y+M]=o[e+M];else if(4==g)for(M=0;M<I;M++)B[y+(M>>1)]|=o[e+M]<<4-4*(1&M);else if(2==g)for(M=0;M<I;M++)B[y+(M>>2)]|=o[e+M]<<6-2*(3&M);else if(1==g)for(M=0;M<I;M++)B[y+(M>>3)]|=o[e+M]<<7-1*(7&M)}r=B,p=3,a=1}else if(0==A&&1==b.length){B=new Uint8Array(I*e*3);let o=I*e;for(y=0;y<o;y++){let e=3*y,i=4*y;B[e]=r[i],B[e+1]=r[i+1],B[e+2]=r[i+2]}r=B,p=2,a=3,i=3*I}E.img=r,E.bpl=i,E.bpp=a}return{ctype:p,depth:g,plte:F,frames:b}}function _updateFrame(r,i,a,o,l,s,f){let c=Uint8Array,u=Uint32Array,d=new c(r[l-1]),h=new u(r[l-1]),p=l+1<r.length?new c(r[l+1]):null,g=new c(r[l]),m=new u(g.buffer),w=i,v=a,y=-1,A=-1;for(let e=0;e<s.height;e++)for(let r=0;r<s.width;r++){let a=s.x+r,f=s.y+e,c=f*i+a,u=m[c];0==u||0==o[l-1].dispose&&h[c]==u&&(null==p||0!=p[4*c+3])||(a<w&&(w=a),a>y&&(y=a),f<v&&(v=f),f>A&&(A=f))}-1==y&&(w=v=y=A=0),f&&(1==(1&w)&&w--,1==(1&v)&&v--),s={x:w,y:v,width:y-w+1,height:A-v+1};let b=o[l];b.rect=s,b.blend=1,b.img=new Uint8Array(s.width*s.height*4),0==o[l-1].dispose?(e(d,i,a,b.img,s.width,s.height,-s.x,-s.y,0),_prepareDiff(g,i,a,b.img,s)):e(g,i,a,b.img,s.width,s.height,-s.x,-s.y,0)}function _prepareDiff(r,i,a,o,l){e(r,i,a,o,l.width,l.height,-l.x,-l.y,2)}function quantize(e,r){let i;let a=new Uint8Array(e),o=a.slice(0),l=new Uint32Array(o.buffer),s=getKDtree(o,r),f=s[0],c=s[1],u=a.length,d=new Uint8Array(u>>2);if(a.length<2e7)for(var h=0;h<u;h+=4)i=getNearest(f,p=a[h]*(1/255),g=a[h+1]*(1/255),m=a[h+2]*(1/255),w=a[h+3]*(1/255)),d[h>>2]=i.ind,l[h>>2]=i.est.rgba;else for(h=0;h<u;h+=4){var p=a[h]*(1/255),g=a[h+1]*(1/255),m=a[h+2]*(1/255),w=a[h+3]*(1/255);for(i=f;i.left;)i=0>=planeDst(i.est,p,g,m,w)?i.left:i.right;d[h>>2]=i.ind,l[h>>2]=i.est.rgba}return{abuf:o.buffer,inds:d,plte:c}}function getKDtree(e,r,i){null==i&&(i=1e-4);let a=new Uint32Array(e.buffer),o={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};o.bst=stats(e,o.i0,o.i1),o.est=estats(o.bst);let l=[o];for(;l.length<r;){let r=0,o=0;for(var s=0;s<l.length;s++)l[s].est.L>r&&(r=l[s].est.L,o=s);if(r<i)break;let f=l[o],c=function(e,r,i,a,o,l){for(a-=4;i<a;){for(;vecDot(e,i,o)<=l;)i+=4;for(;vecDot(e,a,o)>l;)a-=4;if(i>=a)break;let s=r[i>>2];r[i>>2]=r[a>>2],r[a>>2]=s,i+=4,a-=4}for(;vecDot(e,i,o)>l;)i-=4;return i+4}(e,a,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=c||f.i1<=c){f.est.L=0;continue}let u={i0:f.i0,i1:c,bst:null,est:null,tdst:0,left:null,right:null};u.bst=stats(e,u.i0,u.i1),u.est=estats(u.bst);let d={i0:c,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(s=0,d.bst={R:[],m:[],N:f.bst.N-u.bst.N};s<16;s++)d.bst.R[s]=f.bst.R[s]-u.bst.R[s];for(s=0;s<4;s++)d.bst.m[s]=f.bst.m[s]-u.bst.m[s];d.est=estats(d.bst),f.left=u,f.right=d,l[o]=u,l.push(d)}for(l.sort((e,r)=>r.bst.N-e.bst.N),s=0;s<l.length;s++)l[s].ind=s;return[o,l]}function getNearest(e,r,i,a,o){if(null==e.left)return e.tdst=function(e,r,i,a,o){let l=r-e[0],s=i-e[1],f=a-e[2],c=o-e[3];return l*l+s*s+f*f+c*c}(e.est.q,r,i,a,o),e;let l=planeDst(e.est,r,i,a,o),s=e.left,f=e.right;l>0&&(s=e.right,f=e.left);let c=getNearest(s,r,i,a,o);if(c.tdst<=l*l)return c;let u=getNearest(f,r,i,a,o);return u.tdst<c.tdst?u:c}function planeDst(e,r,i,a,o){let{e:l}=e;return l[0]*r+l[1]*i+l[2]*a+l[3]*o-e.eMq}function vecDot(e,r,i){return e[r]*i[0]+e[r+1]*i[1]+e[r+2]*i[2]+e[r+3]*i[3]}function stats(e,r,i){let a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0];for(let l=r;l<i;l+=4){let r=e[l]*(1/255),i=e[l+1]*(1/255),s=e[l+2]*(1/255),f=e[l+3]*(1/255);o[0]+=r,o[1]+=i,o[2]+=s,o[3]+=f,a[0]+=r*r,a[1]+=r*i,a[2]+=r*s,a[3]+=r*f,a[5]+=i*i,a[6]+=i*s,a[7]+=i*f,a[10]+=s*s,a[11]+=s*f,a[15]+=f*f}return a[4]=a[1],a[8]=a[2],a[9]=a[6],a[12]=a[3],a[13]=a[7],a[14]=a[11],{R:a,m:o,N:i-r>>2}}function estats(e){let{R:r}=e,{m:i}=e,{N:a}=e,l=i[0],s=i[1],f=i[2],c=i[3],u=0==a?0:1/a,d=[r[0]-l*l*u,r[1]-l*s*u,r[2]-l*f*u,r[3]-l*c*u,r[4]-s*l*u,r[5]-s*s*u,r[6]-s*f*u,r[7]-s*c*u,r[8]-f*l*u,r[9]-f*s*u,r[10]-f*f*u,r[11]-f*c*u,r[12]-c*l*u,r[13]-c*s*u,r[14]-c*f*u,r[15]-c*c*u],h=[Math.random(),Math.random(),Math.random(),Math.random()],p=0,g=0;if(0!=a)for(let e=0;e<16&&(h=o.multVec(d,h),g=Math.sqrt(o.dot(h,h)),h=o.sml(1/g,h),!(0!=e&&1e-9>Math.abs(g-p)));e++)p=g;let m=[l*u,s*u,f*u,c*u];return{Cov:d,q:m,e:h,L:p,eMq255:o.dot(o.sml(255,m),h),eMq:o.dot(h,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0])<<0)>>>0}}var o={multVec:(e,r)=>[e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],e[4]*r[0]+e[5]*r[1]+e[6]*r[2]+e[7]*r[3],e[8]*r[0]+e[9]*r[1]+e[10]*r[2]+e[11]*r[3],e[12]*r[0]+e[13]*r[1]+e[14]*r[2]+e[15]*r[3]],dot:(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],sml:(e,r)=>[e*r[0],e*r[1],e*r[2],e*r[3]]};d.encode=function(e,r,i,a,o,l,s){null==a&&(a=0),null==s&&(s=!1);let f=compress(e,r,i,a,[!1,!1,!1,0,s,!1]);return compressPNG(f,-1),_main(f,r,i,o,l)},d.encodeLL=function(e,r,i,a,o,l,s,f){let c={ctype:0+(1==a?0:2)+(0==o?0:4),depth:l,frames:[]},u=(a+o)*l,d=u*r;for(let a=0;a<e.length;a++)c.frames.push({rect:{x:0,y:0,width:r,height:i},img:new Uint8Array(e[a]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(d/8)});return compressPNG(c,0,!0),_main(c,r,i,s,f)},d.encode.compress=compress,d.encode.dither=dither,d.quantize=quantize,d.quantize.getKDtree=getKDtree,d.quantize.getNearest=getNearest}();let h={toArrayBuffer(e,r){let i=e.width,a=e.height,o=i<<2,l=e.getContext("2d").getImageData(0,0,i,a),s=new Uint32Array(l.data.buffer),f=(32*i+31)/32<<2,c=f*a,u=122+c,d=new ArrayBuffer(u),p=new DataView(d),g,m,w,v,y=1048576,A=0,b=0,_=0;function set16(e){p.setUint16(b,e,!0),b+=2}function set32(e){p.setUint32(b,e,!0),b+=4}set16(19778),set32(u),b+=4,set32(122),set32(108),set32(i),set32(-a>>>0),set16(1),set16(32),set32(3),set32(c),set32(2835),set32(2835),b+=8,set32(16711680),set32(65280),set32(255),set32(4278190080),set32(1466527264),function convert(){for(;A<a&&y>0;){for(v=122+A*f,g=0;g<o;)y--,w=(m=s[_++])>>>24,p.setUint32(v+g,m<<8|w),g+=4;A++}_<s.length?(y=1048576,setTimeout(convert,h._dly)):r(d)}()},toBlob(e,r){this.toArrayBuffer(e,e=>{r(new Blob([e],{type:"image/bmp"}))})},_dly:9};var p={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},g={[p.CHROME]:16384,[p.FIREFOX]:11180,[p.DESKTOP_SAFARI]:16384,[p.IE]:8192,[p.IOS]:4096,[p.ETC]:8192};let m="undefined"!=typeof window,w="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,v=m&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),y=(m||w)&&(v&&v.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),A=(m||w)&&(v&&v.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function getFilefromDataUrl(e,r,i=Date.now()){return new Promise(a=>{let o=e.split(","),l=o[0].match(/:(.*?);/)[1],s=globalThis.atob(o[1]),f=s.length,c=new Uint8Array(f);for(;f--;)c[f]=s.charCodeAt(f);let u=new Blob([c],{type:l});u.name=r,u.lastModified=i,a(u)})}function getDataUrlFromFile(e){return new Promise((r,i)=>{let a=new A;a.onload=()=>r(a.result),a.onerror=e=>i(e),a.readAsDataURL(e)})}function loadImage(e){return new Promise((r,i)=>{let a=new Image;a.onload=()=>r(a),a.onerror=e=>i(e),a.src=e})}function getBrowserName(){if(void 0!==getBrowserName.cachedResult)return getBrowserName.cachedResult;let e=p.ETC,{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=p.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=p.IOS:/Safari/i.test(r)?e=p.DESKTOP_SAFARI:/Firefox/i.test(r)?e=p.FIREFOX:(/MSIE/i.test(r)||!0==!!document.documentMode)&&(e=p.IE),getBrowserName.cachedResult=e,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(e,r){let i=getBrowserName(),a=g[i],o=e,l=r,s=o*l,f=o>l?l/o:o/l;for(;s>a*a;){let e=(a+o)/2,r=(a+l)/2;e<r?(l=r,o=r*f):(l=e*f,o=e),s=o*l}return{width:o,height:l}}function getNewCanvasAndCtx(e,r){let i,a;try{if(a=(i=new OffscreenCanvas(e,r)).getContext("2d"),null===a)throw Error("getContext of OffscreenCanvas returns null")}catch(e){a=(i=document.createElement("canvas")).getContext("2d")}return i.width=e,i.height=r,[i,a]}function drawImageInCanvas(e,r){let{width:i,height:a}=approximateBelowMaximumCanvasSizeOfBrowser(e.width,e.height),[o,l]=getNewCanvasAndCtx(i,a);return r&&/jpe?g/.test(r)&&(l.fillStyle="white",l.fillRect(0,0,o.width,o.height)),l.drawImage(e,0,0,o.width,o.height),o}function isIOS(){return void 0!==isIOS.cachedResult||(isIOS.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),isIOS.cachedResult}function drawFileInCanvas(e,r={}){return new Promise(function(i,a){let o,l;var $Try_2_Post=function(){try{return l=drawImageInCanvas(o,r.fileType||e.type),i([o,l])}catch(e){return a(e)}},$Try_2_Catch=function(r){try{var $Try_3_Catch=function(e){try{throw e}catch(e){return a(e)}};try{let r;return getDataUrlFromFile(e).then(function(e){try{return r=e,loadImage(r).then(function(e){try{return o=e,function(){try{return $Try_2_Post()}catch(e){return a(e)}}()}catch(e){return $Try_3_Catch(e)}},$Try_3_Catch)}catch(e){return $Try_3_Catch(e)}},$Try_3_Catch)}catch(e){$Try_3_Catch(e)}}catch(e){return a(e)}};try{if(isIOS()||[p.DESKTOP_SAFARI,p.MOBILE_SAFARI].includes(getBrowserName()))throw Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return o=e,$Try_2_Post()}catch(e){return $Try_2_Catch()}},$Try_2_Catch)}catch(e){$Try_2_Catch()}})}function canvasToFile(e,r,i,a,o=1){return new Promise(function(l,s){let f;if("image/png"===r){let l,s,c;return l=e.getContext("2d"),{data:s}=l.getImageData(0,0,e.width,e.height),c=d.encode([s.buffer],e.width,e.height,4096*o),(f=new Blob([c],{type:r})).name=i,f.lastModified=a,$If_4.call(this)}if("image/bmp"===r)return new Promise(r=>h.toBlob(e,r)).then((function(e){try{return(f=e).name=i,f.lastModified=a,$If_5.call(this)}catch(e){return s(e)}}).bind(this),s);if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:o}).then((function(e){try{return(f=e).name=i,f.lastModified=a,$If_6.call(this)}catch(e){return s(e)}}).bind(this),s);return getFilefromDataUrl(e.toDataURL(r,o),i,a).then((function(e){try{return f=e,$If_6.call(this)}catch(e){return s(e)}}).bind(this),s);function $If_6(){return $If_5.call(this)}function $If_5(){return $If_4.call(this)}function $If_4(){return l(f)}})}function cleanupCanvasMemory(e){e.width=0,e.height=0}function isAutoOrientationInBrowser(){return new Promise(function(e,r){let i,a,o,l;return void 0!==isAutoOrientationInBrowser.cachedResult?e(isAutoOrientationInBrowser.cachedResult):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return i=s,drawFileInCanvas(i).then(function(s){try{return a=s[1],canvasToFile(a,i.type,i.name,i.lastModified).then(function(i){try{return o=i,cleanupCanvasMemory(a),drawFileInCanvas(o).then(function(i){try{return l=i[0],isAutoOrientationInBrowser.cachedResult=1===l.width&&2===l.height,e(isAutoOrientationInBrowser.cachedResult)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)})}function getExifOrientation(e){return new Promise((r,i)=>{let a=new A;a.onload=e=>{let i=new DataView(e.target.result);if(65496!=i.getUint16(0,!1))return r(-2);let a=i.byteLength,o=2;for(;o<a&&!(8>=i.getUint16(o+2,!1));){let e=i.getUint16(o,!1);if(o+=2,65505==e){if(1165519206!=i.getUint32(o+=2,!1))return r(-1);let e=18761==i.getUint16(o+=6,!1);o+=i.getUint32(o+4,e);let a=i.getUint16(o,e);o+=2;for(let l=0;l<a;l++)if(274==i.getUint16(o+12*l,e))return r(i.getUint16(o+12*l+8,e))}else{if(65280!=(65280&e))break;o+=i.getUint16(o,!1)}}return r(-1)},a.onerror=e=>i(e),a.readAsArrayBuffer(e)})}function handleMaxWidthOrHeight(e,r){let{width:i}=e,{height:a}=e,{maxWidthOrHeight:o}=r,l,s=e;return isFinite(o)&&(i>o||a>o)&&([s,l]=getNewCanvasAndCtx(i,a),i>a?(s.width=o,s.height=a/i*o):(s.width=i/a*o,s.height=o),l.drawImage(e,0,0,s.width,s.height),cleanupCanvasMemory(e)),s}function followExifOrientation(e,r){let{width:i}=e,{height:a}=e,[o,l]=getNewCanvasAndCtx(i,a);switch(r>4&&r<9?(o.width=a,o.height=i):(o.width=i,o.height=a),r){case 2:l.transform(-1,0,0,1,i,0);break;case 3:l.transform(-1,0,0,-1,i,a);break;case 4:l.transform(1,0,0,-1,0,a);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,a,0);break;case 7:l.transform(0,-1,-1,0,a,i);break;case 8:l.transform(0,-1,1,0,0,i)}return l.drawImage(e,0,0,i,a),cleanupCanvasMemory(e),o}function compress(e,r,i=0){return new Promise(function(a,o){let l,s,f,c,u,d,h,p,g,m,w,v,y,A,b,_,F,U,C,E;function incProgress(e=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;l+=e,r.onProgress(Math.min(l,100))}function setProgress(e){if(r.signal&&r.signal.aborted)throw r.signal.reason;l=Math.min(Math.max(e,l),100),r.onProgress(l)}return l=i,s=r.maxIteration||10,f=1024*r.maxSizeMB*1024,incProgress(),drawFileInCanvas(e,r).then((function(i){try{return[,c]=i,incProgress(),u=handleMaxWidthOrHeight(c,r),incProgress(),new Promise(function(i,a){var o;if(!(o=r.exifOrientation))return getExifOrientation(e).then((function(e){try{return o=e,$If_2.call(this)}catch(e){return a(e)}}).bind(this),a);function $If_2(){return i(o)}return $If_2.call(this)}).then((function(i){try{return d=i,incProgress(),isAutoOrientationInBrowser().then((function(i){try{return h=i?u:followExifOrientation(u,d),incProgress(),p=r.initialQuality||1,g=r.fileType||e.type,canvasToFile(h,g,e.name,e.lastModified,p).then((function(i){try{var l;if(m=i,incProgress(),w=m.size>f,v=m.size>e.size,!w&&!v)return setProgress(100),a(m);function $Loop_3(){if(s--&&(b>f||b>y)){let r,i;return r=E?.95*C.width:C.width,i=E?.95*C.height:C.height,[F,U]=getNewCanvasAndCtx(r,i),U.drawImage(C,0,0,r,i),p*="image/png"===g?.85:.95,canvasToFile(F,g,e.name,e.lastModified,p).then(function(e){try{return _=e,cleanupCanvasMemory(C),C=F,b=_.size,setProgress(Math.min(99,Math.floor((A-b)/(A-f)*100))),$Loop_3}catch(e){return o(e)}},o)}return[1]}return y=e.size,b=A=m.size,C=h,E=!r.alwaysKeepResolution&&w,(l=(function(e){for(;e;){if(e.then)return void e.then(l,o);try{if(e.pop){if(e.length)return e.pop()?$Loop_3_exit.call(this):e;e=$Loop_3}else e=e.call(this)}catch(e){return o(e)}}}).bind(this))($Loop_3);function $Loop_3_exit(){return cleanupCanvasMemory(C),cleanupCanvasMemory(F),cleanupCanvasMemory(u),cleanupCanvasMemory(h),cleanupCanvasMemory(c),setProgress(100),a(_)}}catch(e){return o(e)}}).bind(this),o)}catch(e){return o(e)}}).bind(this),o)}catch(e){return o(e)}}).bind(this),o)}catch(e){return o(e)}}).bind(this),o)})}function imageCompression(e,r){return new Promise(function(i,o){let l,s,f,c,u,d;if(l={...r},f=0,{onProgress:c}=l,l.maxSizeMB=l.maxSizeMB||Number.POSITIVE_INFINITY,u="boolean"!=typeof l.useWebWorker||l.useWebWorker,delete l.useWebWorker,l.onProgress=e=>{f=e,"function"==typeof c&&c(f)},!(e instanceof Blob||e instanceof y))return o(Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return o(Error("The file given is not an image"));if(d="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!u||"function"!=typeof Worker||d)return compress(e,l).then((function(e){try{return s=e,$If_4.call(this)}catch(e){return o(e)}}).bind(this),o);var h=(function(){try{return $If_4.call(this)}catch(e){return o(e)}}).bind(this),$Try_1_Catch=function(r){try{return compress(e,l).then(function(e){try{return s=e,h()}catch(e){return o(e)}},o)}catch(e){return o(e)}};try{return l.libURL=l.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",new Promise((r,i)=>{a||(a=function(e){let r=[];return"function"==typeof e?r.push(`(${e})()`):r.push(e),URL.createObjectURL(new Blob(r))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));let o=new Worker(a);o.addEventListener("message",function(e){if(l.signal&&l.signal.aborted)o.terminate();else if(void 0===e.data.progress){if(e.data.error)return i(Error(e.data.error)),void o.terminate();r(e.data.file),o.terminate()}else l.onProgress(e.data.progress)}),o.addEventListener("error",i),l.signal&&l.signal.addEventListener("abort",()=>{i(l.signal.reason),o.terminate()}),o.postMessage({file:e,imageCompressionLibUrl:l.libURL,options:{...l,onProgress:void 0,signal:void 0}})}).then(function(e){try{return s=e,h()}catch(e){return $Try_1_Catch()}},$Try_1_Catch)}catch(e){$Try_1_Catch()}function $If_4(){try{s.name=e.name,s.lastModified=e.lastModified}catch(e){}try{l.preserveExif&&"image/jpeg"===e.type&&(!l.fileType||l.fileType&&l.fileType===e.type)&&(s=copyExifWithoutOrientation(e,s))}catch(e){}return i(s)}})}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.copyExifWithoutOrientation=copyExifWithoutOrientation,imageCompression.getBrowserName=getBrowserName,imageCompression.version="2.0.2"}}]);