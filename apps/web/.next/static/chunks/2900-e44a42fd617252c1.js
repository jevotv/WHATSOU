"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2900],{9930:function(e,t,r){r.d(t,{Z:function(){return AdminBar}});var a=r(8708),s=r(6923),n=r(2056),i=r.n(n),o=r(6609);function AdminBar(){let{t:e}=(0,s.Z)();return(0,a.jsxs)("div",{className:"sticky top-0 z-[100] w-full bg-[#111813] text-white px-4 py-3 shadow-md flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-[#19e65e]"}),(0,a.jsx)("span",{className:"font-medium text-sm sm:text-base",children:e("storefront.admin_viewing_store")})]}),(0,a.jsx)(i(),{href:"/dashboard",className:"bg-[#19e65e] text-[#111813] px-4 py-1.5 rounded-full text-sm font-bold hover:bg-[#16cc52] transition-colors",children:e("storefront.go_to_dashboard")})]})}},2491:function(e,t,r){r.d(t,{Z:function(){return CartDrawer}});var a=r(8708),s=r(5444),n=r(8690),i=r(3507),o=r(6005),l=r(7342),c=r(3883);let d=i.fC;i.xz,i.x8;let u=i.h_,p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.aV,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});p.displayName=i.aV.displayName;let f=(0,o.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=s.forwardRef((e,t)=>{let{side:r="right",className:s,children:n,...o}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(p,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,c.cn)(f({side:r}),s),...o,children:[n,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.VY.displayName;let SheetHeader=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};SheetHeader.displayName="SheetHeader";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,c.cn)("text-lg font-semibold text-foreground",r),...s})});h.displayName=i.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",r),...s})});x.displayName=i.dk.displayName;var g=r(7321),y=r(4896),v=r(9861),b=r(9602),j=r(3733),N=r(7917),w=r(8073),_=r(646),S=r(852),k=r(1452),I=r(6072),C=r.n(I),T=r(2272),E=r(4996),O=r(8681),A=r(6811),z=r(6923),P=r(372),Z=r(8685);let R=s.forwardRef((e,t)=>{let{className:r,value:s,...n}=e;return(0,a.jsx)(Z.fC,{ref:t,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,a.jsx)(Z.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});function CartDrawer(e){let{open:t,onClose:r,store:i}=e,{items:o,removeItem:l,updateQuantity:u,clearCart:p,totalPrice:f}=(0,n.useCart)(),[x,I]=(0,s.useState)(!1),[Z,q]=(0,s.useState)(""),[F,J]=(0,s.useState)(""),[U,B]=(0,s.useState)(""),[D,V]=(0,s.useState)(""),[M,L]=(0,s.useState)(!1),[Q,X]=(0,s.useState)("delivery"),{toast:Y}=(0,T.pm)(),{t:G,language:W,direction:H}=(0,z.Z)(),[$,K]=(0,s.useState)([]),[ee,et]=(0,s.useState)([]),[er,ea]=(0,s.useState)([]),[es,en]=(0,s.useState)(""),[ei,eo]=(0,s.useState)(""),[el,ec]=(0,s.useState)(""),[ed,eu]=(0,s.useState)(0),[ep,ef]=(0,s.useState)(!1),em=i.shipping_config||{type:"none"},eh=i.free_shipping_threshold;(0,s.useEffect)(()=>{t&&0===$.length&&O.h.get("/api/locations").then(e=>{if(e.success){if(e.cities){let t=e.cities;if("by_city"===em.type&&"rates"in em){let r=Object.keys(em.rates);t=e.cities.filter(e=>r.includes(e.id.toString()))}K(t)}e.districts&&ea(e.districts)}}).catch(e=>console.error("Error fetching locations",e))},[t,$.length,em]),(0,s.useEffect)(()=>{if(es&&er.length>0){let e=er.filter(e=>e.city_id.toString()===es);if("by_district"===em.type&&"rates"in em){let t=Object.keys(em.rates);e=e.filter(e=>t.includes(e.id.toString()))}et(e),eo("")}else et([]),eo("")},[es,em,er]),(0,s.useEffect)(()=>{if("pickup"===Q){eu(0),ef(!1);return}let{price:e,isFree:t}=function(e,t,r,a,s){if(r&&t>=r)return{price:0,isFree:!0};switch(e.type){case"none":default:return{price:0,isFree:!1};case"nationwide":return{price:e.price,isFree:!1};case"by_city":if(a&&e.rates[a.toString()])return{price:e.rates[a.toString()],isFree:!1};return{price:0,isFree:!1};case"by_district":if(s&&e.rates[s.toString()])return{price:e.rates[s.toString()],isFree:!1};return{price:0,isFree:!1}}}(em,f,eh||null,es?parseInt(es):void 0,ei?parseInt(ei):void 0);eu(e),ef(t)},[f,es,ei,Q,em,eh]);let ex=f+ed,handleCheckout=async()=>{let e="delivery"===Q,t=U;if(e){if(!Z||!F){Y({title:G("cart.missing_info"),description:G("cart.missing_info_desc"),variant:"destructive"});return}if("none"!==em.type&&"nationwide"!==em.type){if(!es||"by_district"===em.type&&!ei||!el){Y({title:G("cart.missing_info"),description:G("cart.missing_address_details"),variant:"destructive"});return}}else if(!U&&!el){Y({title:G("cart.missing_info"),description:G("cart.missing_info_desc"),variant:"destructive"});return}if(es){let e=$.find(e=>e.id.toString()===es),r=ee.find(e=>e.id.toString()===ei),a="rtl"===H?null==e?void 0:e.name_ar:null==e?void 0:e.name_en,s="rtl"===H?null==r?void 0:r.name_ar:null==r?void 0:r.name_en;t="".concat(a||""," - ").concat(s||""," - ").concat(el)}else t=U||el}else if(!Z||!F){Y({title:G("cart.missing_info"),description:G("cart.missing_info_desc"),variant:"destructive"});return}L(!0);try{var a,s;let e="".concat(G("whatsapp.greeting",{storeName:i.name}),"\n\n");e+="".concat(G("whatsapp.personal_details"),"\n")+"".concat(G("whatsapp.name",{name:Z}),"\n")+"".concat(G("whatsapp.phone",{phone:(0,A.yL)(F)}),"\n"),"delivery"===Q&&t?e+="".concat(G("whatsapp.address",{address:t}),"\n"):e+="".concat(G("whatsapp.pickup_order"),"\n"),D.trim()&&(e+="".concat(G("whatsapp.notes",{notes:D}),"\n")),e+="\n".concat(G("whatsapp.order_details"),"\n")+"".concat(G("whatsapp.separator"),"\n"),o.forEach(t=>{e+="".concat(G("whatsapp.product_prefix")).concat(t.product_name,"\n");let r=Object.entries(t.selected_options).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r)}).join(", ");r&&(e+="   (".concat(r,")\n")),e+="".concat(G("whatsapp.quantity",{quantity:t.quantity}),"\n")+"".concat(G("whatsapp.price",{price:(t.price*t.quantity).toFixed(2)}),"\n")+"".concat(G("whatsapp.separator"),"\n")}),e+="\n".concat(G("whatsapp.subtotal",{total:f.toFixed(2)}),"\n"),ed>0?e+="".concat(G("whatsapp.shipping",{cost:ed.toFixed(2)}),"\n"):ep&&(e+="".concat(G("whatsapp.free_shipping"),"\n")),e+="".concat(G("whatsapp.total",{total:ex.toFixed(2)}),"\n\n")+"".concat(G("whatsapp.footer"));let n="https://wa.me/".concat(i.whatsapp_number,"?text=").concat(encodeURIComponent(e));window.open(n,"_blank"),p(),q(""),J(""),B(""),V(""),I(!1),r(),Y({title:G("cart.order_placed"),description:G("cart.order_placed_desc")});let l=es?null===(a=$.find(e=>e.id.toString()===es))||void 0===a?void 0:a.name_en:null,c=ei?null===(s=ee.find(e=>e.id.toString()===ei))||void 0===s?void 0:s.name_en:null;for(let e of(E.O.from("orders").insert({store_id:i.id,customer_name:Z,customer_phone:(0,A.yL)(F),customer_address:"delivery"===Q?U:null,delivery_type:Q,order_items:o,total_price:ex,shipping_cost:ed,city:l,district:c,notes:D}).then(e=>{let{error:t}=e;t&&console.error("Error logging order:",t)}),o))e.variant_id?E.O.rpc("decrement_variant_quantity",{p_variant_id:e.variant_id,p_quantity:e.quantity}).then(e=>{let{error:t}=e;t&&console.error("Error updating variant quantity:",t)}):E.O.rpc("decrement_product_quantity",{p_product_id:e.product_id,p_quantity:e.quantity}).then(e=>{let{error:t}=e;t&&console.error("Error updating product quantity:",t)})}catch(e){console.error("Checkout error:",e),Y({title:"Error",description:e.message,variant:"destructive"})}finally{L(!1)}};return(0,a.jsx)(d,{open:t,onOpenChange:r,children:(0,a.jsxs)(m,{className:"w-full sm:max-w-lg flex flex-col",children:[(0,a.jsx)(SheetHeader,{children:(0,a.jsx)(h,{className:"text-2xl font-bold",children:x?G("cart.checkout_title"):G("cart.title")})}),x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto py-6 space-y-6",children:[i.allow_delivery&&i.allow_pickup&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{children:G("cart.delivery_type")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>X("delivery"),className:"flex-1 flex items-center justify-center gap-2 p-4 rounded-2xl border-2 transition-all ".concat("delivery"===Q?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"),children:[(0,a.jsx)(S.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:G("cart.home_delivery")})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>X("pickup"),className:"flex-1 flex items-center justify-center gap-2 p-4 rounded-2xl border-2 transition-all ".concat("pickup"===Q?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"),children:[(0,a.jsx)(k.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:G("cart.pickup")})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{children:G("cart.form.name")}),(0,a.jsx)(y.I,{value:Z,onChange:e=>q(e.target.value),placeholder:G("cart.form.name_placeholder"),className:"rounded-2xl h-12",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{children:G("cart.form.phone")}),(0,a.jsx)(y.I,{value:F,onChange:e=>J(e.target.value),placeholder:G("cart.form.phone_placeholder"),type:"tel",className:"rounded-2xl h-12",required:!0})]}),i.allow_delivery&&(!i.allow_pickup||"delivery"===Q)&&(0,a.jsxs)("div",{className:"space-y-3 animate-in fade-in slide-in-from-top-1",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{children:"rtl"===H?"المحافظة":"Governorate"}),(0,a.jsxs)(P.Ph,{value:es,onValueChange:en,children:[(0,a.jsx)(P.i4,{className:"rounded-2xl h-12 bg-gray-50 border-none",children:(0,a.jsx)(P.ki,{placeholder:"rtl"===H?"اختر المحافظة":"Select Governorate"})}),(0,a.jsx)(P.Bw,{children:$.map(e=>(0,a.jsx)(P.Ql,{value:e.id.toString(),children:"rtl"===H?e.name_ar:e.name_en},e.id))})]})]}),es&&(0,a.jsxs)("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1",children:[(0,a.jsx)(v._,{children:"rtl"===H?"المنطقة":"District"}),(0,a.jsxs)(P.Ph,{value:ei,onValueChange:eo,children:[(0,a.jsx)(P.i4,{className:"rounded-2xl h-12 bg-gray-50 border-none",children:(0,a.jsx)(P.ki,{placeholder:"rtl"===H?"اختر المنطقة":"Select District"})}),(0,a.jsx)(P.Bw,{children:ee.map(e=>(0,a.jsx)(P.Ql,{value:e.id.toString(),children:"rtl"===H?e.name_ar:e.name_en},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{children:G("cart.form.address")}),(0,a.jsx)(y.I,{value:el||U,onChange:e=>{ec(e.target.value),B(e.target.value)},placeholder:"rtl"===H?"اسم الشارع، رقم المبنى، علامة مميزة":"Street Name, Building No., Landmark",className:"rounded-2xl h-12",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(v._,{children:G("cart.form.notes")}),(0,a.jsx)(y.I,{value:D,onChange:e=>V(e.target.value),placeholder:G("cart.form.notes_placeholder"),className:"rounded-2xl h-12"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-2xl space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:G("cart.form.summary")}),eh&&f<eh&&(0,a.jsxs)("div",{className:"space-y-1 pb-2 border-b",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"rtl"===H?"متبقي للشحن المجاني":"Remaining for free shipping"}),(0,a.jsxs)("span",{children:[G("common.currency")," ",(eh-f).toFixed(2)]})]}),(0,a.jsx)(R,{value:f/eh*100,className:"h-2"})]}),o.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:[e.product_name," x ",e.quantity]}),(0,a.jsxs)("span",{children:[G("common.currency")," ",(e.price*e.quantity).toFixed(2)]})]},t)),(0,a.jsx)("div",{className:"border-t border-dashed my-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:G("cart.subtotal")}),(0,a.jsxs)("span",{children:[G("common.currency")," ",f.toFixed(2)]})]}),"delivery"===Q&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:G("cart.shipping")}),ep?(0,a.jsx)("span",{className:"text-green-600 font-bold",children:G("cart.free")}):(0,a.jsx)("span",{children:ed>0?"".concat(G("common.currency")," ").concat(ed.toFixed(2)):"rtl"===H?"يتم حسابه عند اختيار العنوان":"Calculated at checkout"})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[(0,a.jsx)("span",{children:G("cart.total")}),(0,a.jsxs)("span",{children:[G("common.currency")," ",ex.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,a.jsx)(g.z,{onClick:handleCheckout,disabled:M,className:"w-full h-14 rounded-3xl bg-green-600 hover:bg-green-700 text-lg font-semibold",children:M?G("cart.processing"):G("cart.confirm_order")}),(0,a.jsx)(g.z,{onClick:()=>I(!1),variant:"outline",className:"w-full h-14 rounded-3xl text-lg font-semibold",children:G("cart.back_to_cart")})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-6 space-y-4",children:0===o.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.Z,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:G("cart.empty")})]}):o.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-2xl",children:[(0,a.jsx)("div",{className:"relative w-20 h-20 bg-gray-200 rounded-xl overflow-hidden flex-shrink-0",children:e.image_url?(0,a.jsx)(C(),{src:e.image_url,alt:e.product_name,fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-8 h-8 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm line-clamp-1",children:e.product_name}),Object.keys(e.selected_options).length>0&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:Object.entries(e.selected_options).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r)}).join(", ")}),(0,a.jsxs)("p",{className:"text-sm font-bold text-green-600 mt-1",children:[G("common.currency")," ",(e.price*e.quantity).toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(g.z,{size:"icon",variant:"outline",className:"h-8 w-8 rounded-lg",onClick:()=>u(e.product_id,e.selected_options,e.quantity-1),children:(0,a.jsx)(j.Z,{className:"w-3 h-3"})}),(0,a.jsx)("span",{className:"text-sm font-medium w-8 text-center",children:e.quantity}),(0,a.jsx)(g.z,{size:"icon",variant:"outline",className:"h-8 w-8 rounded-lg",onClick:()=>u(e.product_id,e.selected_options,e.quantity+1),children:(0,a.jsx)(N.Z,{className:"w-3 h-3"})}),(0,a.jsx)(g.z,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-lg ml-auto",onClick:()=>l(e.product_id,e.selected_options),children:(0,a.jsx)(w.Z,{className:"w-4 h-4 text-red-500"})})]})]})]},t))}),o.length>0&&(0,a.jsxs)("div",{className:"border-t pt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xl font-bold",children:[(0,a.jsx)("span",{children:G("cart.total")}),(0,a.jsxs)("span",{children:[G("common.currency")," ",f.toFixed(2)]})]}),eh&&(0,a.jsxs)("div",{className:"space-y-2",children:[f>=eh?(0,a.jsxs)("div",{className:"text-sm font-bold text-green-600 flex items-center gap-2 bg-green-50 p-2 rounded-lg border border-green-100",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4 fill-current"}),"rtl"===H?"مبروك! لقد حصلت على شحن مجاني":"Congratulations! You got free shipping"]}):(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"rtl"===H?"متبقي للشحن المجاني":"Remaining for free shipping"}),(0,a.jsxs)("span",{children:[G("common.currency")," ",(eh-f).toFixed(2)]})]}),(0,a.jsx)(R,{value:Math.min(f/eh*100,100),className:(0,c.cn)("h-2",f>=eh?"[&>div]:bg-green-500":"")})]}),(0,a.jsx)(g.z,{onClick:()=>I(!0),className:"w-full h-14 rounded-3xl bg-green-600 hover:bg-green-700 text-lg font-semibold",children:G("cart.proceed")})]})]})]})})}R.displayName=Z.fC.displayName},7321:function(e,t,r){r.d(t,{d:function(){return l},z:function(){return c}});var a=r(8708),s=r(5444),n=r(432),i=r(6005),o=r(3883);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},4896:function(e,t,r){r.d(t,{I:function(){return i}});var a=r(8708),s=r(5444),n=r(3883);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},9861:function(e,t,r){r.d(t,{_:function(){return c}});var a=r(8708),s=r(5444),n=r(1500),i=r(6005),o=r(3883);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),r),...s})});c.displayName=n.f.displayName},372:function(e,t,r){r.d(t,{Bw:function(){return h},Ph:function(){return d},Ql:function(){return g},i4:function(){return p},ki:function(){return u}});var a=r(8708),s=r(5444),n=r(379),i=r(7216),o=r(8695),l=r(9375),c=r(3883);let d=n.fC;n.ZA;let u=n.B4,p=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=n.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=n.u_.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=n.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...o}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...o,children:[(0,a.jsx)(f,{}),(0,a.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(m,{})]})})});h.displayName=n.VY.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});x.displayName=n.__.displayName;let g=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});g.displayName=n.ck.displayName;let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...s})});y.displayName=n.Z0.displayName},2272:function(e,t,r){r.d(t,{pm:function(){return useToast}});var a=r(5444);let s=0,n=new Map,addToRemoveQueue=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?addToRemoveQueue(r):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function dispatch(e){o=reducer(o,e),i.forEach(e=>{e(o)})}function toast(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:r});return dispatch({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:r,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function useToast(){let[e,t]=a.useState(o);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}},8681:function(e,t,r){r.d(t,{h:function(){return n}});var a=r(2979);let s=a.dV.isNativePlatform()?"https://whatsou.com":window.location.origin,n=new class{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}getToken(){return this.token||(this.token=localStorage.getItem("auth_token")),this.token}clearToken(){this.token=null,localStorage.removeItem("auth_token")}isAuthenticated(){return!!this.getToken()}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getToken(),a=await fetch("".concat(s).concat(e),{...t,headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...t.headers}}),n=await a.json();if(!a.ok)throw 401===a.status&&console.error("API Unauthorized (401) - Token NOT cleared for debugging"),Error(n.error||"API Error: ".concat(a.status));return n}get(e){return this.fetch(e,{method:"GET"})}post(e,t){return this.fetch(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.fetch(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.fetch(e,{method:"DELETE"})}constructor(){this.token=null}}},6803:function(e,t,r){r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var a=r(8708),s=r(5444),n=r(2859),i=r(8681);let o=(0,s.createContext)({user:null,loading:!0,signIn:async()=>{},signUp:async()=>{},signOut:async()=>{}});function AuthProvider(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),u=(0,n.useRouter)();(0,s.useEffect)(()=>{let checkSession=async()=>{if(!i.h.isAuthenticated()){d(!1);return}try{let e=await i.h.get("/api/auth/session");e.authenticated&&e.user?l(e.user):i.h.clearToken()}catch(e){console.error("Session check failed:",e),i.h.clearToken()}d(!1)};checkSession()},[]);let signIn=async(e,t)=>{let r=await i.h.post("/api/auth/login",{phone:e,password:t});if(r.error)throw Error(r.error);r.token&&(i.h.setToken(r.token),l(r.user)),u.push("/dashboard"),u.refresh()},signUp=async function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=await i.h.post("/api/auth/signup",{phone:e,password:t,agreedToPrivacy:r});if(a.error)throw Error(a.error);a.token&&(i.h.setToken(a.token),l(a.user)),u.push("/onboarding"),u.refresh()},signOut=async()=>{try{await i.h.post("/api/auth/logout")}catch(e){}i.h.clearToken(),l(null),u.push("/login"),u.refresh()};return(0,a.jsx)(o.Provider,{value:{user:r,loading:c,signIn,signUp,signOut},children:t})}let useAuth=()=>(0,s.useContext)(o)},8690:function(e,t,r){r.r(t),r.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var a=r(8708),s=r(5444);let n=(0,s.createContext)({items:[],addItem:()=>{},removeItem:()=>{},updateQuantity:()=>{},clearCart:()=>{},totalItems:0,totalPrice:0});function CartProvider(e){let{children:t}=e,[r,i]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=localStorage.getItem("whatsou_cart");e&&i(JSON.parse(e))},[]),(0,s.useEffect)(()=>{localStorage.setItem("whatsou_cart",JSON.stringify(r))},[r]);let removeItem=(e,t)=>{i(r=>r.filter(r=>!(r.product_id===e&&JSON.stringify(r.selected_options)===JSON.stringify(t))))},o=r.reduce((e,t)=>e+t.quantity,0),l=r.reduce((e,t)=>e+t.price*t.quantity,0);return(0,a.jsx)(n.Provider,{value:{items:r,addItem:e=>{i(t=>{let r=t.findIndex(t=>t.product_id===e.product_id&&JSON.stringify(t.selected_options)===JSON.stringify(e.selected_options));if(r>-1){let a=[...t];return a[r].quantity+=e.quantity,a}return[...t,e]})},removeItem,updateQuantity:(e,t,r)=>{if(r<=0){removeItem(e,t);return}i(a=>a.map(a=>a.product_id===e&&JSON.stringify(a.selected_options)===JSON.stringify(t)?{...a,quantity:r}:a))},clearCart:()=>{i([])},totalItems:o,totalPrice:l},children:t})}let useCart=()=>(0,s.useContext)(n)},4996:function(e,t,r){r.d(t,{O:function(){return d}});var a=r(5911),s=r(6028),n=r(2979),i=r(7896);let o={getItem:async e=>{let{value:t}=await i.u.get({key:e});return t},setItem:async(e,t)=>{await i.u.set({key:e,value:t})},removeItem:async e=>{await i.u.remove({key:e})}};var l=r(4850);let c=null,getSupabaseClient=()=>{if(!c){let e="https://bwezqrjwdrobztgeutji.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3ZXpxcmp3ZHJvYnp0Z2V1dGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzg0MDIsImV4cCI6MjA4MTcxNDQwMn0.nsiHXb7EW4KmZqlPy2tZ1-5RTLUsfOMcNa9Wq3xtPeQ";if(!e||!t){console.error("Supabase Client Error: Missing env vars");{let r=Object.keys(l.env).filter(e=>e.startsWith("NEXT_PUBLIC_SUPABASE"));console.error("Available SUPABASE env vars:",r),console.error("Expected: NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY"),console.error("Current values status:",{url:!!e,key:!!t,keyLength:t?t.length:0}),console.warn("Initializing Supabase with dummy values to prevent crash. Check your environment variables.")}}c=n.dV.isNativePlatform()?(0,a.eI)(e||"https://placeholder.supabase.co",t||"placeholder-key",{auth:{storage:o,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}):(0,s.createBrowserClient)(e||"https://placeholder.supabase.co",t||"placeholder-key")}return c},d=new Proxy({},{get:(e,t)=>getSupabaseClient()[t]})},3883:function(e,t,r){r.d(t,{cn:function(){return cn}});var a=r(794),s=r(9654);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},6811:function(e,t,r){r.d(t,{yL:function(){return standardizePhoneNumber}});function standardizePhoneNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"20",r=e.replace(/[^\d+]/g,"");return r.startsWith("+")?r:r.startsWith(t)?"+".concat(r):r.startsWith("0")?"+".concat(t).concat(r.substring(1)):"+".concat(t).concat(r)}},6923:function(e,t,r){r.d(t,{Z:function(){return a.useLanguage}});var a=r(7855)}}]);