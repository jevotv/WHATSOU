exports.id=5616,exports.ids=[5616],exports.modules={20598:(e,t,r)=>{Promise.resolve().then(r.bind(r,92089)),Promise.resolve().then(r.bind(r,70004))},92089:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>DemoLayoutClient});var s=r(84196),a=r(97487),o=r(24288),i=r.n(o),d=r(74555),n=r(78646),l=r(66447),c=r(77560);function MockBottomNav(){let e=(0,d.usePathname)(),{t}=(0,a.Z)(),isActive=t=>!!("/demo"===t&&"/demo"===e||"/demo"!==t&&e?.startsWith(t));return(0,s.jsx)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 w-full px-4 sm:w-auto",children:(0,s.jsxs)("nav",{className:"flex items-center justify-center gap-2 px-2 py-2 bg-white/80 backdrop-blur-lg border border-white/20 shadow-2xl rounded-full mx-auto max-w-fit",children:[(0,s.jsxs)(i(),{href:"/demo/orders",className:`flex flex-col items-center justify-center min-w-[64px] px-4 h-14 rounded-full transition-all duration-300 ${isActive("/demo/orders")?"bg-[#008069] text-white shadow-lg translate-y-[-4px]":"text-gray-500 hover:text-[#111813] hover:bg-gray-100"}`,children:[(0,s.jsx)(n.Z,{className:`w-5 h-5 ${isActive("/demo/orders")?"fill-current":""}`}),(0,s.jsx)("span",{className:"text-[10px] font-bold mt-1 text-center leading-3 whitespace-nowrap",children:t("dashboard.nav_orders")||"Orders"})]}),(0,s.jsxs)(i(),{href:"/demo",className:`flex flex-col items-center justify-center min-w-[64px] px-4 h-14 rounded-full transition-all duration-300 ${isActive("/demo")?"bg-[#008069] text-white shadow-lg translate-y-[-4px]":"text-gray-500 hover:text-[#111813] hover:bg-gray-100"}`,children:[(0,s.jsx)(l.Z,{className:`w-5 h-5 ${isActive("/demo")?"fill-current":""}`}),(0,s.jsx)("span",{className:"text-[10px] font-bold mt-1 text-center leading-3 whitespace-nowrap",children:t("dashboard.nav_home")||"Home"})]}),(0,s.jsxs)(i(),{href:"/demo/customers",className:`flex flex-col items-center justify-center min-w-[64px] px-4 h-14 rounded-full transition-all duration-300 ${isActive("/demo/customers")?"bg-[#008069] text-white shadow-lg translate-y-[-4px]":"text-gray-500 hover:text-[#111813] hover:bg-gray-100"}`,children:[(0,s.jsx)(c.Z,{className:`w-5 h-5 ${isActive("/demo/customers")?"fill-current":""}`}),(0,s.jsx)("span",{className:"text-[10px] font-bold mt-1 text-center leading-3 whitespace-nowrap",children:t("dashboard.nav_customers")||"Customers"})]})]})})}var m=r(78726),h=r(19328),u=r.n(h),p=r(28214),x=r(14748),w=r(2344),g=r(91657),f=r(32583),b=r(31155),v=r(64626),j=r(88568),_=r(16052),y=r(2420),N=r(79892),k=r(77952),S=r(40689),D=r(25413);function MockDashboardHeader({store:e}){let[t,r]=(0,m.useState)(!1),[o,i]=(0,m.useState)(null),n=(0,d.useRouter)(),{toast:l}=(0,D.pm)(),{t:c,language:h,setLanguage:C}=(0,a.Z)();(0,m.useEffect)(()=>{if(e){if(e.qr_code)i(e.qr_code);else{let t=`${window.location.origin}/go/${e.id}`;S.toDataURL(t).then(i).catch(console.error)}}},[e]);let handleCopyStoreLink=()=>{if(!e)return;let t=`${window.location.origin}/${e.slug}`;navigator.clipboard.writeText(t),l({title:c("dashboard.link_copied"),description:c("dashboard.link_copied_desc")})},handleDownloadQr=async()=>{if(o)try{let t=await fetch(o),r=await t.blob(),s=window.URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`qr-${e?.slug||"store"}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),l({title:c("common.success"),description:c("dashboard.qr_downloaded")})}catch(e){console.error("Download failed:",e),l({title:c("common.error"),description:"Failed to download QR",variant:"destructive"})}},handleShareQr=async()=>{if(!o||!navigator.share){handleCopyStoreLink();return}try{let t=await fetch(o),r=await t.blob(),s=new File([r],"qr-code.png",{type:"image/png"});await navigator.share({title:e?.name||"Store QR",text:`Scan to order from ${e?.name}`,files:[s]})}catch(e){console.error("Share failed:",e),l({title:"Sharing not supported",description:"Falling back to copying link."}),handleCopyStoreLink()}},handleMockAction=e=>{l({title:"Demo Mode",description:`${e} is simulated or disabled in demo.`})};return(0,s.jsx)("header",{className:"bg-[#008069] text-white sticky top-0 z-40 shadow-lg",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0 pr-4",children:[(0,s.jsx)(u(),{src:"/logo.png",alt:"Logo",width:32,height:32,className:"w-8 h-8 shrink-0 object-contain brightness-0 invert"}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h1",{className:"text-xl font-bold truncate",children:e?.name}),(0,s.jsx)("p",{className:"text-xs text-green-100 hidden sm:block",children:c("dashboard.whatsapp_commerce")})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 shrink-0",children:[(0,s.jsxs)(N.h_,{children:[(0,s.jsx)(N.$F,{asChild:!0,children:(0,s.jsxs)(y.z,{variant:"ghost",className:"text-white hover:bg-[#017561] rounded-2xl px-2 sm:px-4 h-9 sm:h-10",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 ml-0 md:ml-0"}),(0,s.jsx)("span",{className:"hidden md:inline ml-2",children:c("dashboard.share")})]})}),(0,s.jsxs)(N.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(N.Xi,{onClick:handleCopyStoreLink,className:"cursor-pointer",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),c("dashboard.copy_link")]}),(0,s.jsxs)(N.Xi,{onClick:()=>handleMockAction("Sharing"),className:"cursor-pointer",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),c("dashboard.share_link")]}),(0,s.jsxs)(N.Xi,{onClick:()=>r(!0),className:"cursor-pointer",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),c("dashboard.share_qr")]})]})]}),(0,s.jsxs)(N.h_,{children:[(0,s.jsx)(N.$F,{asChild:!0,children:(0,s.jsx)(y.z,{variant:"ghost",size:"icon",className:"text-white hover:bg-[#017561] rounded-2xl w-9 h-9 sm:w-10 sm:h-10",children:(0,s.jsx)(g.Z,{className:"w-5 h-5"})})}),(0,s.jsxs)(N.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(N.Xi,{onClick:()=>C("en"===h?"ar":"en"),className:"cursor-pointer",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"en"===h?"العربية":"English"]}),(0,s.jsxs)(N.Xi,{onClick:()=>n.push("/demo/settings"),className:"cursor-pointer",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),c("dashboard.settings")]}),(0,s.jsxs)(N.Xi,{onClick:()=>window.open("https://wa.me/201000499431","_blank"),className:"cursor-pointer",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),c("dashboard.chat_support")]}),(0,s.jsxs)(N.Xi,{onClick:()=>n.push("/"),className:"cursor-pointer text-red-600 focus:text-red-600",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Quit Demo"]})]})]}),(0,s.jsx)(k.Vq,{open:t,onOpenChange:r,children:(0,s.jsxs)(k.cZ,{className:"sm:max-w-md",children:[(0,s.jsx)(k.fK,{children:(0,s.jsx)(k.$N,{className:"text-center",children:c("dashboard.share_qr")})}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center p-6 space-y-4",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative w-64 h-64 border-4 border-[#008069] rounded-xl overflow-hidden p-2 bg-white",children:(0,s.jsx)("img",{src:o,alt:"Store QR Code",className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,s.jsxs)(y.z,{className:"flex-1 bg-[#008069] hover:bg-[#017561]",onClick:handleShareQr,children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),c("dashboard.share")]}),(0,s.jsxs)(y.z,{variant:"outline",className:"flex-1",onClick:handleDownloadQr,children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),c("common.download")]})]})]}):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#008069] mx-auto mb-4"}),(0,s.jsx)("p",{children:c("common.loading")})]})})]})})]})]})})})}var C=r(70004);function DemoLayoutClient({children:e}){let{store:t}=(0,C.useMockDashboard)(),{direction:r}=(0,a.Z)();return(0,s.jsxs)("div",{className:"min-h-screen bg-[#f0f2f5] overflow-x-hidden",dir:r,children:[(0,s.jsx)(MockDashboardHeader,{store:t}),(0,s.jsx)("div",{className:"pb-24",children:e}),(0,s.jsx)(MockBottomNav,{})]})}},70004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MockDashboardProvider:()=>MockDashboardProvider,useMockDashboard:()=>useMockDashboard});var s=r(84196),a=r(78726),o=r(25413);let i=(0,a.createContext)(void 0);function MockDashboardProvider({children:e,initialStore:t,initialProducts:r,initialOrders:d}){let[n,l]=(0,a.useState)(t),[c,m]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[p,x]=(0,a.useState)(!0),{toast:w}=(0,o.pm)();return(0,a.useEffect)(()=>{m(r),u(d.map(e=>({...e,delivery_type:e.delivery_type||"delivery",status:e.status||"pending"}))),x(!1)},[r,d]),(0,s.jsx)(i.Provider,{value:{store:n,products:c,orders:h,loading:p,addProduct:e=>{let t={...e,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),store_id:n.id,description:e.description||void 0,original_price:e.original_price||void 0,category:e.category||void 0,image_url:e.image_url||void 0,thumbnail_url:e.thumbnail_url||void 0,options:e.options||[],name:e.name,current_price:e.current_price,quantity:e.quantity??0,unlimited_stock:e.unlimited_stock??!1},r={...t,variants:e.variants?.map(e=>({...e,id:crypto.randomUUID(),product_id:t.id}))||[]};m(e=>[r,...e]),w({title:"Product added (Demo)",description:"This product exists only in your browser session."})},updateProduct:e=>{m(t=>t.map(t=>{if(t.id===e.id){let r={...t,...e};return e.variants&&(r.variants=e.variants.map(e=>({...e,id:e.id||crypto.randomUUID(),product_id:t.id}))),r}return t})),w({title:"Product updated (Demo)",description:"Changes are local."})},deleteProduct:e=>{m(t=>t.filter(t=>t.id!==e)),w({title:"Product deleted (Demo)",description:"Removed from local session."})},createOrder:e=>{let t={id:crypto.randomUUID(),store_id:n.id,created_at:new Date().toISOString(),customer_name:e.customer_name,customer_phone:e.customer_phone,customer_address:e.customer_address,total_price:e.total_price,order_items:e.order_items||[],delivery_type:e.delivery_type||"delivery",notes:e.notes,status:"pending"};u(e=>[t,...e]),w({title:"Order created (Demo)",description:"Check Orders or Customers page."})},updateStore:e=>{l(t=>t?{...t,...e}:null),w({title:"Store updated (Demo)",description:"Settings saved for this session."})}},children:e})}function useMockDashboard(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useMockDashboard must be used within a MockDashboardProvider");return e}},78517:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>DemoLayout,dynamic:()=>p});var s=r(25620),a=r(80941),o=r(64074);let i=(0,o.createProxy)(String.raw`D:\whatsou\apps\web\lib\contexts\MockDashboardContext.tsx`),{__esModule:d,$$typeof:n}=i;i.default;let l=i.MockDashboardProvider;i.useMockDashboard;let c=(0,o.createProxy)(String.raw`D:\whatsou\apps\web\app\demo\DemoLayoutClient.tsx`),{__esModule:m,$$typeof:h}=c,u=c.default,p="force-dynamic";async function DemoLayout({children:e}){let t=await (0,a.l)(),{data:r}=await t.from("stores").select("*").ilike("name","%John%").limit(1),o=r?.[0],i=[],d=[];if(o){let{data:e}=await t.from("products").select("*").eq("store_id",o.id).order("created_at",{ascending:!1});if((i=e||[]).length>0){let e=i.map(e=>e.id),{data:r}=await t.from("product_variants").select("*").in("product_id",e);i=i.map(e=>({...e,variants:r?.filter(t=>t.product_id===e.id)||[]}))}let{data:r}=await t.from("orders").select("*").eq("store_id",o.id).order("created_at",{ascending:!1}).limit(10);d=r||[]}else o={id:"mock-store-id",user_id:"mock-user",name:"John Store",slug:"john",description:"This is a demo store for testing purposes.",qr_code:"/demo/john-qr.png",whatsapp_number:"201000000000",currency:"EGP",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),allow_delivery:!0,allow_pickup:!0},i=[{id:"p1",store_id:"mock-store-id",name:"Premium Headphones",description:"High quality noise cancelling headphones.",current_price:2500,quantity:10,category:"Electronics",image_url:"/demo/1766646435982-full.webp",thumbnail_url:"/demo/1766646435982-full.webp",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),options:[]},{id:"p2",store_id:"mock-store-id",name:"Cotton T-Shirt",description:"100% Organic Cotton.",current_price:300,quantity:50,category:"Clothing",image_url:"/demo/1766646655020-full.webp",thumbnail_url:"/demo/1766646655020-full.webp",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),options:[{name:"Size",values:["S","M","L"]}]}];return(0,s.jsx)(l,{initialStore:o,initialProducts:i,initialOrders:d,children:(0,s.jsx)(u,{children:e})})}}};