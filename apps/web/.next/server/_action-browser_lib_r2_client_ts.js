"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_action-browser_lib_r2_client_ts";
exports.ids = ["_action-browser_lib_r2_client_ts"];
exports.modules = {

/***/ "(action-browser)/./lib/r2/client.ts":
/*!**************************!*\
  !*** ./lib/r2/client.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUCKET_NAME: () => (/* binding */ BUCKET_NAME),\n/* harmony export */   PUBLIC_URL: () => (/* binding */ PUBLIC_URL),\n/* harmony export */   R2: () => (/* binding */ R2),\n/* harmony export */   deleteFromR2: () => (/* binding */ deleteFromR2),\n/* harmony export */   deleteMultipleFromR2: () => (/* binding */ deleteMultipleFromR2),\n/* harmony export */   uploadToR2: () => (/* binding */ uploadToR2)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);\n\n// R2 Client configuration\nconst R2 = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({\n    region: \"auto\",\n    endpoint: process.env.R2_ENDPOINT,\n    credentials: {\n        accessKeyId: process.env.R2_ACCESS_KEY_ID || \"\",\n        secretAccessKey: process.env.R2_SECRET_ACCESS_KEY || \"\"\n    }\n});\nconst BUCKET_NAME = process.env.R2_BUCKET_NAME || \"whatsou\";\nconst PUBLIC_URL = process.env.R2_PUBLIC_URL || \"\";\n/**\r\n * Upload a file to Cloudflare R2\r\n * @param file - The file to upload\r\n * @param folder - The folder path (e.g., 'products', 'logos')\r\n * @returns The public URL of the uploaded file\r\n */ async function uploadToR2(file, folder = \"products\") {\n    const fileExt = file.name.split(\".\").pop();\n    const fileName = `${folder}/${Date.now()}-${Math.random().toString(36).substring(7)}.${fileExt}`;\n    const arrayBuffer = await file.arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand({\n        Bucket: BUCKET_NAME,\n        Key: fileName,\n        Body: buffer,\n        ContentType: file.type\n    });\n    await R2.send(command);\n    // Return the public URL\n    return `${PUBLIC_URL}/${fileName}`;\n}\n/**\r\n * Delete a single file from Cloudflare R2\r\n * @param key - The object key (path) to delete\r\n */ async function deleteFromR2(key) {\n    const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.DeleteObjectCommand({\n        Bucket: BUCKET_NAME,\n        Key: key\n    });\n    await R2.send(command);\n}\n/**\r\n * Delete multiple files from Cloudflare R2 by their public URLs\r\n * Used for account deletion cleanup\r\n * @param urls - Array of public URLs to delete\r\n */ async function deleteMultipleFromR2(urls) {\n    for (const url of urls){\n        if (!url || !PUBLIC_URL || !url.includes(PUBLIC_URL)) continue;\n        try {\n            const key = url.replace(`${PUBLIC_URL}/`, \"\");\n            await deleteFromR2(key);\n        } catch (error) {\n            console.error(`Failed to delete R2 object: ${url}`, error);\n        // Continue with other deletions even if one fails\n        }\n    }\n}\n/**\r\n * Get the R2 client for advanced operations\r\n */ \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL2xpYi9yMi9jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUY7QUFFckYsMEJBQTBCO0FBQzFCLE1BQU1HLEtBQUssSUFBSUgsd0RBQVFBLENBQUM7SUFDcEJJLFFBQVE7SUFDUkMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0lBQ2pDQyxhQUFhO1FBQ1RDLGFBQWFKLFFBQVFDLEdBQUcsQ0FBQ0ksZ0JBQWdCLElBQUk7UUFDN0NDLGlCQUFpQk4sUUFBUUMsR0FBRyxDQUFDTSxvQkFBb0IsSUFBSTtJQUN6RDtBQUNKO0FBRUEsTUFBTUMsY0FBY1IsUUFBUUMsR0FBRyxDQUFDUSxjQUFjLElBQUk7QUFDbEQsTUFBTUMsYUFBYVYsUUFBUUMsR0FBRyxDQUFDVSxhQUFhLElBQUk7QUFFaEQ7Ozs7O0NBS0MsR0FDTSxlQUFlQyxXQUNsQkMsSUFBVSxFQUNWQyxTQUFpQixVQUFVO0lBRTNCLE1BQU1DLFVBQVVGLEtBQUtHLElBQUksQ0FBQ0MsS0FBSyxDQUFDLEtBQUtDLEdBQUc7SUFDeEMsTUFBTUMsV0FBVyxDQUFDLEVBQUVMLE9BQU8sQ0FBQyxFQUFFTSxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFQyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUVWLFFBQVEsQ0FBQztJQUVoRyxNQUFNVyxjQUFjLE1BQU1iLEtBQUthLFdBQVc7SUFDMUMsTUFBTUMsU0FBU0MsT0FBT0MsSUFBSSxDQUFDSDtJQUUzQixNQUFNSSxVQUFVLElBQUluQyxnRUFBZ0JBLENBQUM7UUFDakNvQyxRQUFRdkI7UUFDUndCLEtBQUtiO1FBQ0xjLE1BQU1OO1FBQ05PLGFBQWFyQixLQUFLc0IsSUFBSTtJQUMxQjtJQUVBLE1BQU10QyxHQUFHdUMsSUFBSSxDQUFDTjtJQUVkLHdCQUF3QjtJQUN4QixPQUFPLENBQUMsRUFBRXBCLFdBQVcsQ0FBQyxFQUFFUyxTQUFTLENBQUM7QUFDdEM7QUFFQTs7O0NBR0MsR0FDTSxlQUFla0IsYUFBYUMsR0FBVztJQUMxQyxNQUFNUixVQUFVLElBQUlsQyxtRUFBbUJBLENBQUM7UUFDcENtQyxRQUFRdkI7UUFDUndCLEtBQUtNO0lBQ1Q7SUFDQSxNQUFNekMsR0FBR3VDLElBQUksQ0FBQ047QUFDbEI7QUFFQTs7OztDQUlDLEdBQ00sZUFBZVMscUJBQXFCQyxJQUFjO0lBQ3JELEtBQUssTUFBTUMsT0FBT0QsS0FBTTtRQUNwQixJQUFJLENBQUNDLE9BQU8sQ0FBQy9CLGNBQWMsQ0FBQytCLElBQUlDLFFBQVEsQ0FBQ2hDLGFBQWE7UUFDdEQsSUFBSTtZQUNBLE1BQU00QixNQUFNRyxJQUFJRSxPQUFPLENBQUMsQ0FBQyxFQUFFakMsV0FBVyxDQUFDLENBQUMsRUFBRTtZQUMxQyxNQUFNMkIsYUFBYUM7UUFDdkIsRUFBRSxPQUFPTSxPQUFPO1lBQ1pDLFFBQVFELEtBQUssQ0FBQyxDQUFDLDRCQUE0QixFQUFFSCxJQUFJLENBQUMsRUFBRUc7UUFDcEQsa0RBQWtEO1FBQ3REO0lBQ0o7QUFDSjtBQUVBOztDQUVDLEdBQ3NDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHdoYXRzb3Uvd2ViLy4vbGliL3IyL2NsaWVudC50cz83NTdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFMzQ2xpZW50LCBQdXRPYmplY3RDb21tYW5kLCBEZWxldGVPYmplY3RDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LXMzJztcclxuXHJcbi8vIFIyIENsaWVudCBjb25maWd1cmF0aW9uXHJcbmNvbnN0IFIyID0gbmV3IFMzQ2xpZW50KHtcclxuICAgIHJlZ2lvbjogJ2F1dG8nLFxyXG4gICAgZW5kcG9pbnQ6IHByb2Nlc3MuZW52LlIyX0VORFBPSU5ULFxyXG4gICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuUjJfQUNDRVNTX0tFWV9JRCB8fCAnJyxcclxuICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6IHByb2Nlc3MuZW52LlIyX1NFQ1JFVF9BQ0NFU1NfS0VZIHx8ICcnLFxyXG4gICAgfSxcclxufSk7XHJcblxyXG5jb25zdCBCVUNLRVRfTkFNRSA9IHByb2Nlc3MuZW52LlIyX0JVQ0tFVF9OQU1FIHx8ICd3aGF0c291JztcclxuY29uc3QgUFVCTElDX1VSTCA9IHByb2Nlc3MuZW52LlIyX1BVQkxJQ19VUkwgfHwgJyc7XHJcblxyXG4vKipcclxuICogVXBsb2FkIGEgZmlsZSB0byBDbG91ZGZsYXJlIFIyXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgdG8gdXBsb2FkXHJcbiAqIEBwYXJhbSBmb2xkZXIgLSBUaGUgZm9sZGVyIHBhdGggKGUuZy4sICdwcm9kdWN0cycsICdsb2dvcycpXHJcbiAqIEByZXR1cm5zIFRoZSBwdWJsaWMgVVJMIG9mIHRoZSB1cGxvYWRlZCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBsb2FkVG9SMihcclxuICAgIGZpbGU6IEZpbGUsXHJcbiAgICBmb2xkZXI6IHN0cmluZyA9ICdwcm9kdWN0cydcclxuKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IGZpbGVFeHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcclxuICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7Zm9sZGVyfS8ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpfS4ke2ZpbGVFeHR9YDtcclxuXHJcbiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcclxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKTtcclxuXHJcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IFB1dE9iamVjdENvbW1hbmQoe1xyXG4gICAgICAgIEJ1Y2tldDogQlVDS0VUX05BTUUsXHJcbiAgICAgICAgS2V5OiBmaWxlTmFtZSxcclxuICAgICAgICBCb2R5OiBidWZmZXIsXHJcbiAgICAgICAgQ29udGVudFR5cGU6IGZpbGUudHlwZSxcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IFIyLnNlbmQoY29tbWFuZCk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBwdWJsaWMgVVJMXHJcbiAgICByZXR1cm4gYCR7UFVCTElDX1VSTH0vJHtmaWxlTmFtZX1gO1xyXG59XHJcblxyXG4vKipcclxuICogRGVsZXRlIGEgc2luZ2xlIGZpbGUgZnJvbSBDbG91ZGZsYXJlIFIyXHJcbiAqIEBwYXJhbSBrZXkgLSBUaGUgb2JqZWN0IGtleSAocGF0aCkgdG8gZGVsZXRlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRnJvbVIyKGtleTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IERlbGV0ZU9iamVjdENvbW1hbmQoe1xyXG4gICAgICAgIEJ1Y2tldDogQlVDS0VUX05BTUUsXHJcbiAgICAgICAgS2V5OiBrZXksXHJcbiAgICB9KTtcclxuICAgIGF3YWl0IFIyLnNlbmQoY29tbWFuZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWxldGUgbXVsdGlwbGUgZmlsZXMgZnJvbSBDbG91ZGZsYXJlIFIyIGJ5IHRoZWlyIHB1YmxpYyBVUkxzXHJcbiAqIFVzZWQgZm9yIGFjY291bnQgZGVsZXRpb24gY2xlYW51cFxyXG4gKiBAcGFyYW0gdXJscyAtIEFycmF5IG9mIHB1YmxpYyBVUkxzIHRvIGRlbGV0ZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU11bHRpcGxlRnJvbVIyKHVybHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBmb3IgKGNvbnN0IHVybCBvZiB1cmxzKSB7XHJcbiAgICAgICAgaWYgKCF1cmwgfHwgIVBVQkxJQ19VUkwgfHwgIXVybC5pbmNsdWRlcyhQVUJMSUNfVVJMKSkgY29udGludWU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdXJsLnJlcGxhY2UoYCR7UFVCTElDX1VSTH0vYCwgJycpO1xyXG4gICAgICAgICAgICBhd2FpdCBkZWxldGVGcm9tUjIoa2V5KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIFIyIG9iamVjdDogJHt1cmx9YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBDb250aW51ZSB3aXRoIG90aGVyIGRlbGV0aW9ucyBldmVuIGlmIG9uZSBmYWlsc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgUjIgY2xpZW50IGZvciBhZHZhbmNlZCBvcGVyYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgeyBSMiwgQlVDS0VUX05BTUUsIFBVQkxJQ19VUkwgfTtcclxuXHJcbiJdLCJuYW1lcyI6WyJTM0NsaWVudCIsIlB1dE9iamVjdENvbW1hbmQiLCJEZWxldGVPYmplY3RDb21tYW5kIiwiUjIiLCJyZWdpb24iLCJlbmRwb2ludCIsInByb2Nlc3MiLCJlbnYiLCJSMl9FTkRQT0lOVCIsImNyZWRlbnRpYWxzIiwiYWNjZXNzS2V5SWQiLCJSMl9BQ0NFU1NfS0VZX0lEIiwic2VjcmV0QWNjZXNzS2V5IiwiUjJfU0VDUkVUX0FDQ0VTU19LRVkiLCJCVUNLRVRfTkFNRSIsIlIyX0JVQ0tFVF9OQU1FIiwiUFVCTElDX1VSTCIsIlIyX1BVQkxJQ19VUkwiLCJ1cGxvYWRUb1IyIiwiZmlsZSIsImZvbGRlciIsImZpbGVFeHQiLCJuYW1lIiwic3BsaXQiLCJwb3AiLCJmaWxlTmFtZSIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJjb21tYW5kIiwiQnVja2V0IiwiS2V5IiwiQm9keSIsIkNvbnRlbnRUeXBlIiwidHlwZSIsInNlbmQiLCJkZWxldGVGcm9tUjIiLCJrZXkiLCJkZWxldGVNdWx0aXBsZUZyb21SMiIsInVybHMiLCJ1cmwiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./lib/r2/client.ts\n");

/***/ })

};
;