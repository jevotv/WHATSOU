(()=>{var e={};e.id=3455,e.ids=[3455],e.modules={21841:e=>{"use strict";e.exports=require("@aws-sdk/client-s3")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},79364:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(66965),a=s(74902),i=s(36408),l=s.n(i),n=s(14346),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8362)),"D:\\whatsou\\apps\\web\\app\\dashboard\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,97913)),"D:\\whatsou\\apps\\web\\app\\dashboard\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,47273)),"D:\\whatsou\\apps\\web\\app\\dashboard\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,47814))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,90133))).default(e)],openGraph:[async e=>(await Promise.resolve().then(s.bind(s,3774))).default(e)],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(s.bind(s,27734)),"D:\\whatsou\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35438,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,47814))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,90133))).default(e)],openGraph:[async e=>(await Promise.resolve().then(s.bind(s,3774))).default(e)],twitter:[],manifest:"/manifest.webmanifest"}}],d=["D:\\whatsou\\apps\\web\\app\\dashboard\\settings\\page.tsx"],m="/dashboard/settings/page",g={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9618:(e,t,s)=>{Promise.resolve().then(s.bind(s,30217))},30217:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>SettingsPage});var r=s(84196),a=s(78726),i=s(65714),l=s(74555),n=s(2420),o=s(12753),c=s(91586),d=s(82182),m=s(64690),g=s(76154),h=s(6006),x=s(29930),p=s(85905),u=s(53374),b=s(38249),f=s(34105),y=s(2344),v=s(60546),j=s(37714),N=s(25413),w=s(19328),_=s.n(w),C=s(19886),k=s(97487),S=s(69211),P=s(59640),z=s(98952),I=s(52065),R=s(68124),q=s(69764),A=s(80819),E=s(19635),Z=s(3258),D=s(83235),T=s(42135);let G=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(Z.fC,{className:(0,T.cn)("grid gap-2",e),...t,ref:s}));G.displayName=Z.fC.displayName;let F=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(Z.ck,{ref:s,className:(0,T.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(Z.z$,{className:"flex items-center justify-center",children:(0,r.jsx)(D.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));F.displayName=Z.ck.displayName;var O=s(28467),$=s(50198),Q=s(58406),U=s(24850),L=s(8410),B=s(59341);let M=B.fC,V=B.xz,H=a.forwardRef(({className:e,align:t="center",sideOffset:s=4,...a},i)=>(0,r.jsx)(B.h_,{children:(0,r.jsx)(B.VY,{ref:i,align:t,sideOffset:s,className:(0,T.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));H.displayName=B.VY.displayName;var Y=s(24552);let X=(0,Y.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:e,variant:t,...s}){return(0,r.jsx)("div",{className:(0,T.cn)(X({variant:t}),e),...s})}function StoreShippingSettings({shippingConfig:e,freeShippingThreshold:t,onConfigChange:s,onThresholdChange:i}){let{t:l,direction:c}=(0,k.Z)(),[m,g]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[p,b]=(0,a.useState)(!0),[f,y]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[w,_]=(0,a.useState)(""),[C,P]=(0,a.useState)(!1),[z,I]=(0,a.useState)(""),[R,A]=(0,a.useState)(!1),[E,Z]=(0,a.useState)(new Set),[D,B]=(0,a.useState)(""),[Y,X]=(0,a.useState)(!1);(0,a.useEffect)(()=>{fetchLocations()},[]);let fetchLocations=async()=>{try{let e=await S.h.get("/api/locations");e.success&&(e.cities&&g(e.cities),e.districts&&x(e.districts))}catch(e){console.error("Error fetching locations:",e)}finally{b(!1)}},handleTypeChange=e=>{let t;switch(e){case"none":t={type:"none"};break;case"nationwide":t={type:"nationwide",price:0};break;case"by_city":t={type:"by_city",rates:{}};break;case"by_district":t={type:"by_district",rates:{}};break;default:return}s(t)},handleNationwidePriceChange=e=>{s({type:"nationwide",price:parseFloat(e)||0})},handleRemoveRate=t=>{if("by_city"===e.type||"by_district"===e.type){let r={...e.rates};delete r[t],s({...e,rates:r})}},handleToggleSelect=e=>{let t=new Set(E);t.has(e)?t.delete(e):t.add(e),Z(t)},getCityName=e=>{let t=m.find(t=>t.id===parseInt(e));return"rtl"===c?t?.name_ar:t?.name_en},getDistrictName=e=>{let t=h.find(t=>t.id===parseInt(e)),s=m.find(e=>e.id===t?.city_id),r="rtl"===c?t?.name_ar:t?.name_en,a="rtl"===c?s?.name_ar:s?.name_en;return`${a} - ${r}`},K=(0,a.useMemo)(()=>f?h.filter(e=>e.city_id===f):[],[f,h]);return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 text-[#008069]"}),"rtl"===c?"إعدادات الشحن":"Shipping Settings"]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(G,{value:e.type,onValueChange:handleTypeChange,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{onClick:()=>handleTypeChange("none"),className:(0,T.cn)("flex items-start space-x-3 space-x-reverse rounded-lg border p-4 cursor-pointer hover:bg-gray-50 transition-colors","none"===e.type&&"border-[#008069] bg-green-50/50"),children:[(0,r.jsx)(F,{value:"none",id:"type-none",className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(d._,{htmlFor:"type-none",className:"font-bold cursor-pointer block",children:"rtl"===c?"لا يوجد شحن":"No Shipping"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"rtl"===c?"تعطيل خيارات الشحن (استلام من المتجر فقط)":"Disable shipping options (Pickup only)"})]})]}),(0,r.jsxs)("div",{onClick:()=>handleTypeChange("nationwide"),className:(0,T.cn)("flex items-start space-x-3 space-x-reverse rounded-lg border p-4 cursor-pointer hover:bg-gray-50 transition-colors","nationwide"===e.type&&"border-[#008069] bg-green-50/50"),children:[(0,r.jsx)(F,{value:"nationwide",id:"type-nationwide",className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(d._,{htmlFor:"type-nationwide",className:"font-bold cursor-pointer block",children:"rtl"===c?"سعر موحد":"Flat Rate"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"rtl"===c?"سعر شحن ثابت لجميع المناطق":"Fixed shipping price for all locations"})]})]}),(0,r.jsxs)("div",{onClick:()=>handleTypeChange("by_city"),className:(0,T.cn)("flex items-start space-x-3 space-x-reverse rounded-lg border p-4 cursor-pointer hover:bg-gray-50 transition-colors","by_city"===e.type&&"border-[#008069] bg-green-50/50"),children:[(0,r.jsx)(F,{value:"by_city",id:"type-city",className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(d._,{htmlFor:"type-city",className:"font-bold cursor-pointer block",children:"rtl"===c?"حسب المحافظة":"By Governorate"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"rtl"===c?"تحديد سعر شحن مختلف لكل محافظة":"Set different shipping prices per governorate"})]})]}),(0,r.jsxs)("div",{onClick:()=>handleTypeChange("by_district"),className:(0,T.cn)("flex items-start space-x-3 space-x-reverse rounded-lg border p-4 cursor-pointer hover:bg-gray-50 transition-colors","by_district"===e.type&&"border-[#008069] bg-green-50/50"),children:[(0,r.jsx)(F,{value:"by_district",id:"type-district",className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(d._,{htmlFor:"type-district",className:"font-bold cursor-pointer block",children:"rtl"===c?"حسب المنطقة":"By District"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"rtl"===c?"تحديد سعر شحن مفصل لكل منطقة/حي":"Set detailed shipping prices per district/area"})]})]})]}),"nationwide"===e.type&&(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100 animate-in fade-in slide-in-from-top-2",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700 block mb-2",children:"rtl"===c?"سعر الشحن":"Shipping Price"}),(0,r.jsxs)("div",{className:"relative max-w-xs",children:[(0,r.jsx)(o.I,{type:"number",min:"0",value:e.price||"",onChange:e=>handleNationwidePriceChange(e.target.value),className:"pl-16 rtl:pl-4 rtl:pr-16 text-left rtl:text-right",placeholder:"0.00"}),(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 flex items-center px-4 pointer-events-none text-gray-500 bg-gray-100 border-r rtl:border-r-0 rtl:border-l border-gray-200 rounded-l rtl:rounded-l-none rtl:rounded-r-md",children:"EGP"})]})]}),("by_city"===e.type||"by_district"===e.type)&&(0,r.jsxs)("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"rtl"===c?"أسعار المناطق":"Zone Rates"}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)(M,{open:C,onOpenChange:P,children:[(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)(n.z,{size:"sm",className:"bg-[#008069] hover:bg-green-600",children:[(0,r.jsx)(O.Z,{className:"w-4 h-4 mr-1 rtl:mr-0 rtl:ml-1"}),"rtl"===c?"إضافة منطقة":"Add Zone"]})}),(0,r.jsx)(H,{className:"w-80 p-4",align:"rtl"===c?"start":"end",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium leading-none",children:"rtl"===c?"إضافة سعر جديد":"Add New Rate"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{children:"rtl"===c?"المحافظة":"Governorate"}),(0,r.jsxs)(L.Ph,{value:f?.toString(),onValueChange:e=>{y(parseInt(e)),N(null)},children:[(0,r.jsx)(L.i4,{children:(0,r.jsx)(L.ki,{placeholder:"rtl"===c?"اختر محافظة":"Select Governorate"})}),(0,r.jsx)(L.Bw,{className:"max-h-60",children:m.map(e=>(0,r.jsx)(L.Ql,{value:e.id.toString(),children:"rtl"===c?e.name_ar:e.name_en},e.id))})]})]}),"by_district"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{children:"rtl"===c?"المنطقة":"District"}),(0,r.jsxs)(L.Ph,{value:j?.toString(),onValueChange:e=>N(parseInt(e)),disabled:!f,children:[(0,r.jsx)(L.i4,{children:(0,r.jsx)(L.ki,{placeholder:"rtl"===c?"اختر منطقة":"Select District"})}),(0,r.jsx)(L.Bw,{className:"max-h-60",children:K.map(e=>(0,r.jsx)(L.Ql,{value:e.id.toString(),children:"rtl"===c?e.name_ar:e.name_en},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{children:"rtl"===c?"السعر":"Price"}),(0,r.jsx)(o.I,{type:"number",min:"0",value:w,onChange:e=>_(e.target.value),placeholder:"0.00"})]}),(0,r.jsx)(n.z,{onClick:()=>{let t=parseFloat(w);isNaN(t)||("by_city"===e.type&&f?s({...e,rates:{...e.rates,[f]:t}}):"by_district"===e.type&&j&&s({...e,rates:{...e.rates,[j]:t}}),y(null),N(null),_(""),P(!1))},className:"w-full bg-[#008069] hover:bg-green-600",children:"rtl"===c?"إضافة":"Add"})]})})]}),(0,r.jsxs)(M,{open:R,onOpenChange:A,children:[(0,r.jsx)(V,{asChild:!0,children:(0,r.jsx)(n.z,{size:"sm",variant:"outline",children:"rtl"===c?"إضافة الكل":"Add All"})}),(0,r.jsx)(H,{className:"w-80 p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium leading-none",children:"rtl"===c?"تطبيق سعر موحد":"Apply Bulk Price"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"by_city"===e.type?"rtl"===c?"سيتم إضافة جميع المحافظات بهذا السعر":"All governorates will be added with this price":"rtl"===c?"يجب اختيار محافظة أولاً لإضافة كل مناطقها":"Select a governorate first to add all its districts"}),"by_district"===e.type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{children:"rtl"===c?"المحافظة":"Governorate"}),(0,r.jsxs)(L.Ph,{value:f?.toString(),onValueChange:e=>{y(parseInt(e))},children:[(0,r.jsx)(L.i4,{children:(0,r.jsx)(L.ki,{placeholder:"rtl"===c?"اختر محافظة":"Select Governorate"})}),(0,r.jsx)(L.Bw,{className:"max-h-60",children:m.map(e=>(0,r.jsx)(L.Ql,{value:e.id.toString(),children:"rtl"===c?e.name_ar:e.name_en},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{children:"rtl"===c?"السعر":"Price"}),(0,r.jsx)(o.I,{type:"number",min:"0",value:z,onChange:e=>I(e.target.value),placeholder:"0.00"})]}),(0,r.jsx)(n.z,{onClick:()=>{let t=parseFloat(z);if(isNaN(t)||"by_city"!==e.type&&"by_district"!==e.type)return;let r={...e.rates};if("by_city"===e.type)m.forEach(e=>{r[e.id]=t});else if("by_district"===e.type&&f){let e=h.filter(e=>e.city_id===f);e.forEach(e=>{r[e.id]=t})}s({...e,rates:r}),A(!1),I("")},className:"w-full bg-[#008069] hover:bg-green-600",children:"rtl"===c?"تطبيق":"Apply"})]})})]}),("by_city"===e.type||"by_district"===e.type)&&Object.keys(e.rates).length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)(n.z,{size:"sm",variant:"ghost",onClick:()=>{("by_city"===e.type||"by_district"===e.type)&&(E.size===Object.keys(e.rates).length?Z(new Set):Z(new Set(Object.keys(e.rates))))},className:"text-gray-600",children:E.size===Object.keys(e.rates).length?"rtl"===c?"إلغاء تحديد الكل":"Deselect All":"rtl"===c?"تحديد الكل":"Select All"}),E.size>0&&(0,r.jsxs)(M,{open:Y,onOpenChange:X,children:[(0,r.jsx)(V,{asChild:!0,children:(0,r.jsx)(n.z,{size:"sm",variant:"outline",className:"border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100",children:"rtl"===c?`تحديث (${E.size})`:`Update (${E.size})`})}),(0,r.jsx)(H,{className:"w-80 p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-medium leading-none",children:"rtl"===c?"تحديث السعر للمحدد":"Update Price for Selected"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{children:"rtl"===c?"السعر":"Price"}),(0,r.jsx)(o.I,{type:"number",min:"0",value:D,onChange:e=>B(e.target.value),placeholder:"0.00"})]}),(0,r.jsx)(n.z,{onClick:()=>{if("by_city"!==e.type&&"by_district"!==e.type)return;let t=parseFloat(D);if(isNaN(t))return;let r={...e.rates};E.forEach(e=>{r[e]=t}),s({...e,rates:r}),X(!1),B(""),Z(new Set)},className:"w-full bg-blue-600 hover:bg-blue-700",children:"rtl"===c?"تحديث":"Update"})]})})]}),(0,r.jsx)(n.z,{size:"sm",variant:"ghost",onClick:()=>{("by_city"===e.type||"by_district"===e.type)&&(s({...e,rates:{}}),Z(new Set))},className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:"rtl"===c?"حذف الكل":"Clear All"})]})]})]}),(0,r.jsx)("div",{className:"border rounded-lg divide-y bg-gray-50 max-h-60 overflow-y-auto",children:("by_city"===e.type||"by_district"===e.type)&&0===Object.entries(e.rates).length?(0,r.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,r.jsx)($.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{children:"rtl"===c?"لم يتم إضافة مناطق بعد":"No zones added yet"})]}):("by_city"===e.type||"by_district"===e.type)&&Object.entries(e.rates).map(([t,s])=>(0,r.jsxs)("div",{className:(0,T.cn)("flex items-center justify-between p-3 cursor-pointer transition-colors",E.has(t)?"bg-blue-50 border-blue-200":"hover:bg-gray-100"),onClick:()=>handleToggleSelect(t),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:(0,T.cn)("p-2 rounded-full border",E.has(t)?"bg-blue-100 border-blue-200":"bg-white"),children:E.has(t)?(0,r.jsx)(Q.Z,{className:"w-4 h-4 text-blue-600"}):(0,r.jsx)($.Z,{className:"w-4 h-4 text-[#008069]"})}),(0,r.jsx)("span",{className:"font-medium text-gray-700",children:"by_city"===e.type?getCityName(t):getDistrictName(t)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(Badge,{variant:E.has(t)?"default":"secondary",className:E.has(t)?"bg-blue-600 hover:bg-blue-700":"bg-white",children:[s," EGP"]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),handleRemoveRate(t)},className:"text-red-500 hover:bg-red-50 p-1.5 rounded-full transition-colors",children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})]})]},t))})]}),"none"!==e.type&&(0,r.jsxs)("div",{className:"pt-6 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d._,{className:"text-base font-bold text-gray-900 block",children:"rtl"===c?"شحن مجاني للطلبات الكبيرة":"Free Shipping for Large Orders"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"rtl"===c?"سيتم تطبيق شحن مجاني تلقائياً عندما يتجاوز الطلب هذا المبلغ":"Free shipping will be automatically applied when order total exceeds this amount"})]}),(0,r.jsx)(q.r,{checked:null!==t,onCheckedChange:e=>i(e?0:null)})]}),null!==t&&(0,r.jsxs)("div",{className:"mt-4 max-w-xs animate-in fade-in slide-in-from-top-1",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700 block mb-2",children:"rtl"===c?"الحد الأدنى للطلب":"Minimum Order Amount"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.I,{type:"number",min:"0",value:t,onChange:e=>i(parseFloat(e.target.value)||0),className:"pl-16 rtl:pl-4 rtl:pr-16 text-left rtl:text-right"}),(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 rtl:left-auto rtl:right-0 flex items-center px-4 pointer-events-none text-gray-500 bg-gray-100 border-r rtl:border-r-0 rtl:border-l border-gray-200 rounded-l rtl:rounded-l-none rtl:rounded-r-md",children:"EGP"})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 border-t pt-6 animate-in fade-in slide-in-from-top-4",children:[(0,r.jsxs)("h4",{className:"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,r.jsx)(U.Z,{className:"w-4 h-4"}),"rtl"===c?"معاينة للعميل":"Customer Preview"]}),(0,r.jsx)("div",{className:"bg-gray-50 border rounded-xl p-4 max-w-sm mx-auto shadow-sm",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"rtl"===c?"المنتجات":"Subtotal"}),(0,r.jsx)("span",{className:"font-medium",children:"250.00 EGP"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"rtl"===c?"الشحن":"Shipping"}),(0,r.jsx)("span",{className:"font-medium text-[#008069]",children:"none"===e.type?"rtl"===c?"غير متاح":"N/A":"nationwide"===e.type?`${e.price} EGP`:"rtl"===c?"يختلف حسب العنوان":"Depends on address"})]}),t&&(0,r.jsxs)("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded border border-green-100 flex items-center gap-2",children:[(0,r.jsx)(Q.Z,{className:"w-3 h-3"}),"rtl"===c?`شحن مجاني للطلبات فوق ${t} ج.م`:`Free shipping on orders over ${t} EGP`]}),(0,r.jsxs)("div",{className:"pt-2 border-t flex justify-between font-bold",children:[(0,r.jsx)("span",{children:"rtl"===c?"الإجمالي":"Total"}),(0,r.jsx)("span",{children:"..."})]})]})})]})]})}var K=s(69615);function SettingsPage(){let{store:e,loading:t,refetchStore:s}=(0,K.o)(),[w,Z]=(0,a.useState)(!0),[D,T]=(0,a.useState)(!1),[G,F]=(0,a.useState)(""),[O,$]=(0,a.useState)(""),[Q,U]=(0,a.useState)(""),[L,B]=(0,a.useState)("en"),[M,V]=(0,a.useState)(""),[H,Y]=(0,a.useState)(""),[X,J]=(0,a.useState)(null),[W,ee]=(0,a.useState)(""),[et,es]=(0,a.useState)(""),[er,ea]=(0,a.useState)(""),[ei,el]=(0,a.useState)(""),[en,eo]=(0,a.useState)(""),[ec,ed]=(0,a.useState)(""),[em,eg]=(0,a.useState)(!0),[eh,ex]=(0,a.useState)(!1),[ep,eu]=(0,a.useState)({type:"none"}),[eb,ef]=(0,a.useState)(null),[ey,ev]=(0,a.useState)(""),[ej,eN]=(0,a.useState)(""),[ew,e_]=(0,a.useState)(""),[eC,ek]=(0,a.useState)(!1),[eS,eP]=(0,a.useState)(!1),[ez,eI]=(0,a.useState)(!1),[eR,eq]=(0,a.useState)(!1),[eA,eE]=(0,a.useState)(""),[eZ,eD]=(0,a.useState)(!1),{user:eT,loading:eG}=(0,i.useAuth)(),eF=(0,l.useRouter)(),{toast:eO}=(0,N.pm)(),{t:e$,direction:eQ}=(0,k.Z)();(0,a.useEffect)(()=>{eG||eT||eF.push("/login"),eT&&I.Capacitor.isNativePlatform()&&E.Hc.isAvailable().then(e=>{eI(e.isAvailable),A.u.get({key:"biometric_enabled"}).then(({value:e})=>{eP("true"===e)})}).catch(()=>{})},[eT,eF,eG]),(0,a.useEffect)(()=>{e?(F(e.name),$(e.description||""),U(e.whatsapp_number),B(e.default_language||"en"),V(e.email||""),Y(e.logo_url||""),ee(e.logo_url||""),es(e.facebook_url||""),ea(e.instagram_url||""),el(e.twitter_url||""),eo(e.tiktok_url||""),ed(e.location_url||""),eg(e.allow_delivery??!0),ex(e.allow_pickup??!1),eu(e.shipping_config||{type:"none"}),ef(e.free_shipping_threshold??null),Z(!1)):t||Z(!1)},[e,t]);let handleNativeLogoCamera=async()=>{try{let e=await z.V1.getPhoto({quality:90,allowEditing:!0,resultType:z.dk.DataUrl,source:z.oK.Prompt});if(e.dataUrl){ee(e.dataUrl);let t=await fetch(e.dataUrl),s=await t.blob(),r=new File([s],"logo.jpg",{type:s.type});J(r)}}catch(e){console.error("Camera error",e)}},uploadLogo=async()=>{if(!X)return H;try{let e=new FormData;e.append("file",X),e.append("folder","logos");let t=await fetch("/api/upload",{method:"POST",body:e}),s=await t.json();if(!t.ok)throw Error(s.error||"Upload failed");return s.url}catch(e){return eO({title:"Logo upload failed",description:e.message,variant:"destructive"}),H}},handleRegenerateQR=async()=>{if(e){I.Capacitor.isNativePlatform()&&await R.ej.impact({style:R.y$.Heavy}),T(!0);try{let e=await S.h.post("/api/store/qr");if(e.error)throw Error(e.error);await s(),eO({title:"rtl"===eQ?"تم تحديث رمز QR":"QR Code Regenerated",description:"rtl"===eQ?"تم تحديث رمز الاستجابة السريعة بنجاح":"Your store QR code has been regenerated successfully."})}catch(e){eO({title:e$("common.error"),description:e.message,variant:"destructive"})}finally{T(!1)}}},handleSave=async()=>{if(e){I.Capacitor.isNativePlatform()&&await R.ej.impact({style:R.y$.Medium}),T(!0);try{let e=await uploadLogo(),t={name:G,description:O||null,whatsapp_number:(0,C.yL)(Q),default_language:L,email:M||null,logo_url:e,facebook_url:et||null,instagram_url:er||null,twitter_url:ei||null,tiktok_url:en||null,location_url:ec||null,allow_delivery:em,allow_pickup:eh,shipping_config:ep,free_shipping_threshold:eb},r=await S.h.put("/api/dashboard/store",t);if(r.error)throw Error(r.error);await s(),eO({title:e$("settings.saved"),description:e$("settings.saved_desc")})}catch(e){eO({title:e$("common.error"),description:e.message,variant:"destructive"})}finally{T(!1)}}},handlePasswordChange=async()=>{if(!ey||!ej||!ew){eO({title:e$("common.error"),description:"rtl"===eQ?"يرجى ملء جميع حقول كلمة المرور":"Please fill all password fields",variant:"destructive"});return}if(ej!==ew){eO({title:e$("common.error"),description:"rtl"===eQ?"كلمات المرور الجديدة غير متطابقة":"New passwords do not match",variant:"destructive"});return}if(ej.length<6){eO({title:e$("common.error"),description:"rtl"===eQ?"يجب أن تكون كلمة المرور 6 أحرف على الأقل":"Password must be at least 6 characters",variant:"destructive"});return}ek(!0);try{let e=await S.h.post("/api/auth/change-password",{currentPassword:ey,newPassword:ej});if(e.error)throw Error(e.error);eO({title:e$("settings.saved"),description:"rtl"===eQ?"تم تغيير كلمة المرور بنجاح":"Password changed successfully"}),ev(""),eN(""),e_("")}catch(e){eO({title:e$("common.error"),description:"Incorrect current password"===e.message?"rtl"===eQ?"كلمة المرور الحالية غير صحيحة":"Incorrect current password":e.message,variant:"destructive"})}finally{ek(!1)}},handleDeleteAccount=async()=>{if(!eA.trim()){eO({title:e$("common.error"),description:e$("settings.delete_reason_required"),variant:"destructive"});return}eD(!0);try{let e=await S.h.post("/api/auth/delete-account",{reason:eA});if(e.error)throw Error(e.error);eF.push("/login")}catch(e){eO({title:e$("common.error"),description:e.message,variant:"destructive"})}finally{eD(!1)}};return w?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f6f8f7]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#008069]"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-[#f6f8f7]",dir:eQ,children:[(0,r.jsx)("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("button",{onClick:()=>eF.push("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,r.jsx)(m.Z,{className:`w-5 h-5 ${"rtl"===eQ?"rotate-180":""}`}),(0,r.jsx)("span",{className:"font-medium",children:e$("common.back")})]}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:e$("settings.title")}),(0,r.jsxs)(n.z,{onClick:handleSave,disabled:D,className:"bg-[#008069] hover:bg-green-500 text-[#111813] font-bold rounded-lg",children:[(0,r.jsx)(g.Z,{className:`w-4 h-4 ${"rtl"===eQ?"ml-2":"mr-2"}`}),D?e$("common.saving"):e$("common.save")]})]})})}),(0,r.jsx)("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-[#008069]"}),e$("settings.identity")]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative group cursor-pointer",children:[(0,r.jsx)("div",{className:"relative h-32 w-32 rounded-full border-4 border-gray-100 overflow-hidden bg-gradient-to-br from-[#008069] to-green-600",children:W?(0,r.jsx)(_(),{src:W,alt:"Store logo",fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-4xl font-bold",children:G.charAt(0).toUpperCase()})})}),(0,r.jsxs)("label",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:e=>{I.Capacitor.isNativePlatform()&&(e.preventDefault(),handleNativeLogoCamera())},children:[(0,r.jsx)(x.Z,{className:"w-8 h-8 text-white"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){J(t);let e=new FileReader;e.onloadend=()=>{ee(e.result)},e.readAsDataURL(t)}},className:(I.Capacitor.isNativePlatform(),"hidden")})]})]}),(0,r.jsx)("span",{className:"text-sm font-medium text-[#008069]",children:e$("settings.change_logo")})]}),(0,r.jsxs)("div",{className:"flex-1 w-full space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:e$("settings.store_name")}),(0,r.jsx)(o.I,{value:G,onChange:e=>F(e.target.value),placeholder:"My Awesome Store",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:e$("settings.description")}),(0,r.jsx)(c.g,{value:O,onChange:e=>$(e.target.value),placeholder:e$("settings.description"),rows:4,className:"rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069] resize-none"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 text-right",children:e$("settings.character_limit",{current:O.length,max:500})})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 text-[#008069]"}),e$("settings.contact_info")]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:e$("settings.whatsapp")}),(0,r.jsx)(o.I,{value:Q,onChange:e=>U(e.target.value),placeholder:"+1 (555) 123-4567",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e$("settings.whatsapp_desc")})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:e$("settings.email")}),(0,r.jsx)(o.I,{type:"email",value:M,onChange:e=>V(e.target.value),placeholder:"support@yourstore.com",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5 mt-6",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:e$("settings.default_language")}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"language",value:"en",checked:"en"===L,onChange:e=>B(e.target.value),className:"w-4 h-4 text-[#008069] focus:ring-[#008069]"}),(0,r.jsx)("span",{children:e$("settings.english")})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"language",value:"ar",checked:"ar"===L,onChange:e=>B(e.target.value),className:"w-4 h-4 text-[#008069] focus:ring-[#008069]"}),(0,r.jsx)("span",{children:e$("settings.arabic")})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e$("settings.language_help")})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 text-[#008069]"}),e$("settings.delivery_options")]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:em,onChange:e=>{if(!e.target.checked&&!eh){eO({title:e$("settings.delivery_required_error"),variant:"destructive"});return}eg(e.target.checked)},className:"w-5 h-5 text-[#008069] focus:ring-[#008069] rounded"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e$("settings.allow_delivery")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e$("settings.allow_delivery_desc")})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:eh,onChange:e=>{if(!e.target.checked&&!em){eO({title:e$("settings.delivery_required_error"),variant:"destructive"});return}ex(e.target.checked)},className:"w-5 h-5 text-[#008069] focus:ring-[#008069] rounded"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e$("settings.allow_pickup")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e$("settings.allow_pickup_desc")})]})]})]})]}),(0,r.jsx)(StoreShippingSettings,{shippingConfig:ep,freeShippingThreshold:eb,onConfigChange:eu,onThresholdChange:ef}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-5 h-5 text-[#008069]"}),e$("settings.social_media")]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"Facebook"}),(0,r.jsx)(o.I,{value:et,onChange:e=>es(e.target.value),placeholder:"https://facebook.com/yourstore",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"Instagram"}),(0,r.jsx)(o.I,{value:er,onChange:e=>ea(e.target.value),placeholder:"https://instagram.com/yourstore",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"Twitter / X"}),(0,r.jsx)(o.I,{value:ei,onChange:e=>el(e.target.value),placeholder:"https://twitter.com/yourstore",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"TikTok"}),(0,r.jsx)(o.I,{value:en,onChange:e=>eo(e.target.value),placeholder:"https://tiktok.com/@yourstore",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:e$("onboarding.location")}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.I,{value:ec,onChange:e=>ed(e.target.value),placeholder:"https://maps.google.com/...",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"}),(0,r.jsx)(n.z,{type:"button",variant:"outline",onClick:async()=>{if(I.Capacitor.isNativePlatform()){try{eO({title:e$("onboarding.locating"),description:e$("onboarding.getting_location")});let e=await P.b.checkPermissions();if("granted"!==e.location){let e=await P.b.requestPermissions();if("granted"!==e.location)throw Error("Permission denied")}let t=await P.b.getCurrentPosition(),{latitude:s,longitude:r}=t.coords,a=`https://www.google.com/maps?q=${s},${r}`;ed(a),eO({title:e$("onboarding.location_found"),description:e$("onboarding.location_set")})}catch(e){console.error("Geolocation error:",e),eO({title:e$("common.error"),description:e.message||e$("onboarding.location_error"),variant:"destructive"})}return}if(!navigator.geolocation){eO({title:e$("common.error"),description:e$("onboarding.geolocation_not_supported"),variant:"destructive"});return}eO({title:e$("onboarding.locating"),description:e$("onboarding.getting_location")}),navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:s}=e.coords,r=`https://www.google.com/maps?q=${t},${s}`;ed(r),eO({title:e$("onboarding.location_found"),description:e$("onboarding.location_set")})},e=>{console.error("Geolocation error:",e);let t=e$("onboarding.location_error");e.code===e.PERMISSION_DENIED?t=e$("onboarding.location_permission_denied"):e.code===e.POSITION_UNAVAILABLE?t=e$("onboarding.location_unavailable"):e.code===e.TIMEOUT&&(t=e$("onboarding.location_timeout")),eO({title:e$("common.error"),description:t,variant:"destructive"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},className:"h-11 rounded-lg border-gray-200 text-gray-600 hover:text-[#008069] shrink-0",title:e$("onboarding.get_current_location"),children:(0,r.jsx)(h.Z,{className:"w-5 h-5"})})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-[#008069]"}),"rtl"===eQ?"الأمان":"Security"]}),(0,r.jsxs)("div",{className:"space-y-4 max-w-md",children:[(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"rtl"===eQ?"كلمة المرور الحالية":"Current Password"}),(0,r.jsx)(o.I,{type:"password",value:ey,onChange:e=>ev(e.target.value),placeholder:"••••••",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"rtl"===eQ?"كلمة المرور الجديدة":"New Password"}),(0,r.jsx)(o.I,{type:"password",value:ej,onChange:e=>eN(e.target.value),placeholder:"••••••",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)(d._,{className:"text-sm font-bold text-gray-700",children:"rtl"===eQ?"تأكيد كلمة المرور الجديدة":"Confirm New Password"}),(0,r.jsx)(o.I,{type:"password",value:ew,onChange:e=>e_(e.target.value),placeholder:"••••••",className:"h-11 rounded-lg bg-gray-50 border-none focus:ring-2 focus:ring-[#008069]"})]}),(0,r.jsx)(n.z,{onClick:handlePasswordChange,disabled:eC,className:"bg-[#008069] hover:bg-green-500 text-white font-bold rounded-lg mt-2 w-full",children:eC?"rtl"===eQ?"جاري التغيير...":"Changing...":"rtl"===eQ?"تغيير كلمة المرور":"Change Password"})]})]}),ez&&(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5 text-[#008069]"}),"rtl"===eQ?"تسجيل الدخول بالبصمة":"Biometric Login"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"rtl"===eQ?"استخدم بصمة الإصبع أو الوجه لتسجيل الدخول":"Use fingerprint or face ID to log in"})]}),(0,r.jsx)(q.r,{checked:eS,onCheckedChange:async e=>{if(eP(e),await A.u.set({key:"biometric_enabled",value:String(e)}),e)try{await E.Hc.verifyIdentity({reason:"Verify to enable",title:"Biometric Setup",subtitle:"",description:""})}catch(e){eP(!1),await A.u.set({key:"biometric_enabled",value:"false"}),eO({title:e$("common.error"),description:"Biometric verification failed",variant:"destructive"})}}})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,r.jsx)(y.Z,{className:"w-5 h-5 text-[#008069]"}),"rtl"===eQ?"رمز الاستجابة السريعة (QR)":"QR Code"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"rtl"===eQ?"إذا كنت تواجه مشاكل في مسح رمز QR الخاص بمتجرك، يمكنك إعادة إنشائه هنا.":"If you are experiencing issues with scanning your store QR code, you can regenerate it here."}),(0,r.jsx)(n.z,{onClick:handleRegenerateQR,disabled:D,variant:"outline",className:"border-[#008069] text-[#008069] hover:bg-green-50",children:"rtl"===eQ?"إعادة إنشاء رمز QR":"Regenerate QR Code"})]})]}),(0,r.jsxs)("div",{className:"bg-red-50 rounded-xl shadow-sm border border-red-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 text-red-700 flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5"}),e$("settings.danger_zone")]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e$("settings.delete_warning")}),(0,r.jsxs)(n.z,{variant:"destructive",onClick:()=>eq(!0),className:"bg-red-600 hover:bg-red-700",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),e$("settings.delete_account")]})]})]})}),eR&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-xl",dir:eQ,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:[(0,r.jsx)(j.Z,{className:"w-8 h-8"}),(0,r.jsx)("h2",{className:"text-xl font-bold",children:e$("settings.confirm_delete")})]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-red-800 font-medium",children:e$("settings.delete_consequences")}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 mt-2 list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:e$("settings.delete_store")}),(0,r.jsx)("li",{children:e$("settings.delete_products")}),(0,r.jsx)("li",{children:e$("settings.delete_orders")}),(0,r.jsx)("li",{children:e$("settings.delete_subscription")})]})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,r.jsxs)(d._,{className:"text-sm font-medium",children:[e$("settings.delete_reason_label")," ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(c.g,{value:eA,onChange:e=>eE(e.target.value),placeholder:e$("settings.delete_reason_placeholder"),className:"resize-none border-red-200 focus:border-red-400 focus:ring-red-400",rows:3})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(n.z,{variant:"outline",onClick:()=>{eq(!1),eE("")},className:"flex-1",disabled:eZ,children:"rtl"===eQ?"إلغاء":"Cancel"}),(0,r.jsx)(n.z,{variant:"destructive",onClick:handleDeleteAccount,disabled:eZ||!eA.trim(),className:"flex-1 bg-red-600 hover:bg-red-700",children:eZ?"rtl"===eQ?"جاري الحذف...":"Deleting...":e$("settings.delete_permanently")})]})]})})]})}},69764:(e,t,s)=>{"use strict";s.d(t,{r:()=>n});var r=s(84196),a=s(78726),i=s(665),l=s(42135);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:(0,r.jsx)(i.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));n.displayName=i.fC.displayName},8362:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var r=s(64074);let a=(0,r.createProxy)(String.raw`D:\whatsou\apps\web\app\dashboard\settings\page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[771,7124,4304,6819,9328,4288,1980,265,3665,5131,129,6762,3345,7182,665,1026,3833,9640,3054,3517,8444,4378,7952,7286,9406,8410,7953,2855],()=>__webpack_exec__(79364));module.exports=s})();