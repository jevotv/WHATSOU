"use strict";(()=>{var e={};e.id=6366,e.ids=[6366],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14021:e=>{e.exports=import("next/dist/compiled/@vercel/og/index.node.js")},2797:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>w,originalPathname:()=>h,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>_,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>v});var r={};a.r(r),a.d(r,{default:()=>sitemap});var s={};a.r(s),a.d(s,{GET:()=>GET}),a(44388);var i=a(15789),n=a(74902),o=a(23112),u=a(55392),l=a(85119);async function createServerClient(){let e=(0,l.cookies)();return(0,u.createServerClient)("https://bwezqrjwdrobztgeutji.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3ZXpxcmp3ZHJvYnp0Z2V1dGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzg0MDIsImV4cCI6MjA4MTcxNDQwMn0.nsiHXb7EW4KmZqlPy2tZ1-5RTLUsfOMcNa9Wq3xtPeQ",{cookies:{get:t=>e.get(t)?.value,set(t,a,r){try{e.set({name:t,value:a,...r})}catch(e){}},remove(t,a){try{e.set({name:t,value:"",...a})}catch(e){}}}})}async function sitemap({id:e}){let t=await createServerClient(),{data:a}=await t.from("stores").select("id, slug, updated_at").eq("slug",e).maybeSingle();if(!a)return[];let r=`https://whatsou.com/${e}`,{data:s}=await t.from("products").select("id, updated_at").eq("store_id",a.id),i=(s||[]).map(e=>({url:`${r}/p/${e.id}`,lastModified:e.updated_at||new Date,changeFrequency:"weekly",priority:.8}));return[{url:r,lastModified:a.updated_at||new Date,changeFrequency:"daily",priority:1},...i]}var p=a(43872);let c={...r},d=c.default,m=c.generateSitemaps;async function GET(e,t){let a;let{__metadata_id__:r=[],...s}=t.params||{},i=r[0],n=m?await m():null;if(n&&null==(a=n.find(e=>e.id.toString()===i)?.id))return new o.NextResponse("Not Found",{status:404});let u=await d({id:a}),l=(0,p.resolveRouteData)(u,"sitemap");return new o.NextResponse(l,{headers:{"Content-Type":"application/xml","Cache-Control":"public, max-age=0, must-revalidate"}})}let x=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/[slug]/sitemap.xml/route",pathname:"/[slug]/sitemap.xml",filename:"sitemap",bundlePath:"app/[slug]/sitemap.xml/route"},resolvedPagePath:"next-metadata-route-loader?page=%2F%5Bslug%5D%2Fsitemap.xml%2Froute&isDynamic=1!D:\\whatsou\\apps\\web\\app\\[slug]\\sitemap.ts?__next_metadata_route__",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:y,serverHooks:_,headerHooks:w,staticGenerationBailout:v}=x,h="/[slug]/sitemap.xml/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[1861,7742,3872,112],()=>__webpack_exec__(2797));module.exports=a})();