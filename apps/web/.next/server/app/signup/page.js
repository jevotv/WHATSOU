(()=>{var e={};e.id=4966,e.ids=[4966],e.modules={21841:e=>{"use strict";e.exports=require("@aws-sdk/client-s3")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6113:e=>{"use strict";e.exports=require("crypto")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},32583:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(72023);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},5643:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=a(66965),r=a(74902),n=a(36408),i=a.n(n),l=a(14346),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["signup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,70478)),"D:\\whatsou\\apps\\web\\app\\signup\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,47814))).default(e)],apple:[async e=>(await Promise.resolve().then(a.bind(a,90133))).default(e)],openGraph:[async e=>(await Promise.resolve().then(a.bind(a,3774))).default(e)],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(a.bind(a,27734)),"D:\\whatsou\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35438,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,47814))).default(e)],apple:[async e=>(await Promise.resolve().then(a.bind(a,90133))).default(e)],openGraph:[async e=>(await Promise.resolve().then(a.bind(a,3774))).default(e)],twitter:[],manifest:"/manifest.webmanifest"}}],d=["D:\\whatsou\\apps\\web\\app\\signup\\page.tsx"],p="/signup/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/signup/page",pathname:"/signup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},98273:(e,t,a)=>{Promise.resolve().then(a.bind(a,68687))},68687:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>SignupPage});var s=a(84196),r=a(78726),n=a(65714),i=a(2420),l=a(12753),o=a(62364),c=a(24288),d=a.n(c),p=a(32583),u=a(19328),h=a.n(u),m=a(97487),x=a(19886);function SignupPage(){let[e,t]=(0,r.useState)("form"),[a,c]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[_,N]=(0,r.useState)(!1),[I,P]=(0,r.useState)(!0),{signUp:S}=(0,n.useAuth)(),{t:q,language:Z,setLanguage:k,direction:C}=(0,m.Z)(),handleSendOtp=async e=>{if(e.preventDefault(),j(""),u!==f){j("Passwords do not match");return}if(u.length<6){j("Password must be at least 6 characters");return}N(!0);try{let e=(0,x.yL)(a),s=await fetch("https://bwezqrjwdrobztgeutji.supabase.co/functions/v1/whatsapp-auth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3ZXpxcmp3ZHJvYnp0Z2V1dGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzg0MDIsImV4cCI6MjA4MTcxNDQwMn0.nsiHXb7EW4KmZqlPy2tZ1-5RTLUsfOMcNa9Wq3xtPeQ"},body:JSON.stringify({action:"send",phone:e})}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to send OTP");t("otp")}catch(e){j(e.message||"Failed to send verification code")}finally{N(!1)}},handleVerifyAndSignup=async e=>{e.preventDefault(),j(""),N(!0);try{let e=(0,x.yL)(a),t=await fetch("https://bwezqrjwdrobztgeutji.supabase.co/functions/v1/whatsapp-auth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3ZXpxcmp3ZHJvYnp0Z2V1dGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxMzg0MDIsImV4cCI6MjA4MTcxNDQwMn0.nsiHXb7EW4KmZqlPy2tZ1-5RTLUsfOMcNa9Wq3xtPeQ"},body:JSON.stringify({action:"verify",phone:e,code:b,verify_only:!0})}),s=await t.json();if(!t.ok)throw Error(s.error||"Invalid code");await S(e,u)}catch(e){j(e.message||"Failed to verify")}finally{N(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-teal-50 p-4",dir:C,children:(0,s.jsxs)(o.Zb,{className:"w-full max-w-md rounded-3xl shadow-xl",children:[(0,s.jsxs)(o.Ol,{className:"text-center space-y-4 relative",children:[(0,s.jsx)("div",{className:"absolute top-4 right-4",children:(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>k("en"===Z?"ar":"en"),className:"rounded-full w-8 h-8 p-0",children:(0,s.jsx)(p.Z,{className:"w-4 h-4"})})}),(0,s.jsx)("div",{className:"mx-auto bg-green-500 w-16 h-16 rounded-3xl flex items-center justify-center overflow-hidden",children:(0,s.jsx)(h(),{src:"/logo.png",alt:"WhatSou Logo",width:48,height:48,className:"w-12 h-12 object-contain brightness-0 invert"})}),(0,s.jsx)(o.ll,{className:"text-3xl font-bold",children:q("auth.register_title")}),(0,s.jsx)(o.SZ,{className:"text-base",children:"form"===e?q("auth.register_subtitle"):`Enter code sent to ${a}`})]}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)("form",{onSubmit:"form"===e?handleSendOtp:handleVerifyAndSignup,className:"space-y-4",children:[v&&(0,s.jsx)("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-2xl text-sm",children:v}),"form"===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:q("auth.phone_label")}),(0,s.jsx)(l.I,{type:"tel",placeholder:q("auth.phone_placeholder"),value:a,onChange:e=>c(e.target.value),required:!0,className:"rounded-2xl h-12",dir:"ltr"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:q("auth.password_label")}),(0,s.jsx)(l.I,{type:"password",placeholder:q("auth.password_placeholder"),value:u,onChange:e=>g(e.target.value),required:!0,className:"rounded-2xl h-12"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:q("auth.confirm_password_label")}),(0,s.jsx)(l.I,{type:"password",placeholder:q("auth.password_placeholder"),value:f,onChange:e=>y(e.target.value),required:!0,className:"rounded-2xl h-12"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("input",{type:"checkbox",id:"privacy-agree",checked:I,onChange:e=>P(e.target.checked),className:"mt-1 h-4 w-4 rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,s.jsxs)("label",{htmlFor:"privacy-agree",className:"text-sm text-gray-600",children:[q("auth.agree_privacy")," ",(0,s.jsx)(d(),{href:"/privacy",target:"_blank",className:"text-green-600 hover:underline",children:q("auth.privacy_policy")})]})]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Verification Code"}),(0,s.jsx)(l.I,{type:"text",placeholder:"123456",value:b,onChange:e=>w(e.target.value),required:!0,className:"rounded-2xl h-12 text-center text-lg tracking-widest",dir:"ltr",maxLength:6})]}),(0,s.jsx)(i.z,{type:"submit",disabled:_||"form"===e&&!I,className:"w-full h-12 rounded-3xl bg-green-600 hover:bg-green-700 text-base font-semibold",children:_?"form"===e?"Sending Code...":"Creating Account...":"form"===e?q("auth.create_account"):"Verify & Signup"}),"otp"===e&&(0,s.jsx)("button",{type:"button",onClick:()=>t("form"),className:"w-full text-sm text-gray-500 hover:text-gray-700 mt-2",children:"Back to Details"}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-600",children:[q("auth.has_account")," ",(0,s.jsx)(d(),{href:"/login",className:"text-green-600 font-semibold hover:underline",children:q("auth.sign_in_link")})]})]})})]})})}},97487:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s.useLanguage});var s=a(46827)},70478:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var s=a(64074);let r=(0,s.createProxy)(String.raw`D:\whatsou\apps\web\app\signup\page.tsx`),{__esModule:n,$$typeof:i}=r,l=r.default,o=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[771,7124,4304,6819,9328,4288,3517,8444,4378,9406,2364],()=>__webpack_exec__(5643));module.exports=a})();