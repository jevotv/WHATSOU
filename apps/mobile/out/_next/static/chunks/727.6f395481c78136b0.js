"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{3727:function(e,t,a){a.d(t,{Camera:function(){return p},CameraResultType:function(){return c},CameraSource:function(){return o}});var r,n,i,o,l,c,s=a(2979);(r=o||(o={})).Prompt="PROMPT",r.Camera="CAMERA",r.Photos="PHOTOS",(n=l||(l={})).Rear="REAR",n.Front="FRONT",(i=c||(c={})).Uri="uri",i.Base64="base64",i.DataUrl="dataUrl";let CameraWeb=class CameraWeb extends s.Uw{async getPhoto(e){return new Promise(async(t,a)=>{if(e.webUseInput||e.source===o.Photos)this.fileInputExperience(e,t,a);else if(e.source===o.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=e.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",async r=>{let n=r.detail;0===n?this.fileInputExperience(e,t,a):this.cameraExperience(e,t,a)})}else this.cameraExperience(e,t,a)})}async pickImages(e){return new Promise(async(e,t)=>{this.multipleFileInputExperience(e,t)})}async cameraExperience(e,t,a){if(customElements.get("pwa-camera-modal")){let r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===l.Front?"user":"environment",document.body.appendChild(r);try{await r.componentOnReady(),r.addEventListener("onPhoto",async n=>{let i=n.detail;null===i?a(new s.xz("User cancelled photos app")):i instanceof Error?a(i):t(await this._getCameraPhoto(i,e)),r.dismiss(),document.body.removeChild(r)}),r.present()}catch(r){this.fileInputExperience(e,t,a)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,a)}fileInputExperience(e,t,a){let r=document.querySelector("#_capacitor-camera-input"),cleanup=()=>{var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement("input")).id="_capacitor-camera-input",r.type="file",r.hidden=!0,document.body.appendChild(r),r.addEventListener("change",a=>{let n=r.files[0],i="jpeg";if("image/png"===n.type?i="png":"image/gif"===n.type&&(i="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){let a=new FileReader;a.addEventListener("load",()=>{if("dataUrl"===e.resultType)t({dataUrl:a.result,format:i});else if("base64"===e.resultType){let e=a.result.split(",")[1];t({base64String:e,format:i})}cleanup()}),a.readAsDataURL(n)}else t({webPath:URL.createObjectURL(n),format:i}),cleanup()}),r.addEventListener("cancel",e=>{a(new s.xz("User cancelled photos app")),cleanup()})),r.accept="image/*",r.capture=!0,e.source===o.Photos||e.source===o.Prompt?r.removeAttribute("capture"):e.direction===l.Front?r.capture="user":e.direction===l.Rear&&(r.capture="environment"),r.click()}multipleFileInputExperience(e,t){let a=document.querySelector("#_capacitor-camera-input-multiple"),cleanup=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||((a=document.createElement("input")).id="_capacitor-camera-input-multiple",a.type="file",a.hidden=!0,a.multiple=!0,document.body.appendChild(a),a.addEventListener("change",t=>{let r=[];for(let e=0;e<a.files.length;e++){let t=a.files[e],n="jpeg";"image/png"===t.type?n="png":"image/gif"===t.type&&(n="gif"),r.push({webPath:URL.createObjectURL(t),format:n})}e({photos:r}),cleanup()}),a.addEventListener("cancel",e=>{t(new s.xz("User cancelled photos app")),cleanup()})),a.accept="image/*",a.click()}_getCameraPhoto(e,t){return new Promise((a,r)=>{let n=new FileReader,i=e.type.split("/")[1];"uri"===t.resultType?a({webPath:URL.createObjectURL(e),format:i,saved:!1}):(n.readAsDataURL(e),n.onloadend=()=>{let e=n.result;"dataUrl"===t.resultType?a({dataUrl:e,format:i,saved:!1}):a({base64String:e.split(",")[1],format:i,saved:!1})},n.onerror=e=>{r(e)})})}async checkPermissions(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{let e=await window.navigator.permissions.query({name:"camera"});return{camera:e.state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}};new CameraWeb;let p=(0,s.fo)("Camera",{web:()=>new CameraWeb})}}]);