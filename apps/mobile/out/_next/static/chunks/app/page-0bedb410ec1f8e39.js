(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3969:function(e,t,r){Promise.resolve().then(r.bind(r,6833))},6833:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return HomePage}});var n=r(7573),o=r(7653),s=r(2859),u=r(6803);function HomePage(){let{user:e,loading:t}=(0,u.useAuth)(),r=(0,s.useRouter)();return(0,o.useEffect)(()=>{t||(e?r.push("/dashboard"):r.push("/login"))},[e,t,r]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f6f8f7]",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#008069]"})})}},8681:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});let n=new class{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}getToken(){return this.token||(this.token=localStorage.getItem("auth_token")),this.token}clearToken(){this.token=null,localStorage.removeItem("auth_token")}isAuthenticated(){return!!this.getToken()}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getToken(),n=await fetch("".concat("https://whatsou.com").concat(e),{...t,headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...t.headers}}),o=await n.json();if(!n.ok)throw 401===n.status&&this.clearToken(),Error(o.error||"API Error: ".concat(n.status));return o}get(e){return this.fetch(e,{method:"GET"})}post(e,t){return this.fetch(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.fetch(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.fetch(e,{method:"DELETE"})}constructor(){this.token=null}}},6803:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var n=r(7573),o=r(7653),s=r(2859),u=r(8681);let i=(0,o.createContext)(void 0);function useAuth(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function AuthProvider(e){let{children:t}=e,[r,a]=(0,o.useState)(null),[c,h]=(0,o.useState)(!0),l=(0,s.useRouter)();(0,o.useEffect)(()=>{let checkSession=async()=>{if(!u.h.isAuthenticated()){h(!1);return}try{let e=await u.h.get("/api/auth/session");e.authenticated&&e.user?a(e.user):u.h.clearToken()}catch(e){console.error("Session check failed:",e),u.h.clearToken()}h(!1)};checkSession()},[]);let signIn=async(e,t)=>{try{let r=await u.h.post("/api/auth/login",{phone:e,password:t});if(r.error)return{error:r.error};return u.h.setToken(r.token),a(r.user),l.push("/dashboard"),{}}catch(e){return{error:e.message}}},signUp=async(e,t)=>{try{let r=await u.h.post("/api/auth/signup",{phone:e,password:t});if(r.error)return{error:r.error};return u.h.setToken(r.token),a(r.user),l.push("/onboarding"),{}}catch(e){return{error:e.message}}};return(0,n.jsx)(i.Provider,{value:{user:r,loading:c,signIn,signUp,signOut:()=>{u.h.clearToken(),a(null),l.push("/login")}},children:t})}},8294:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(7653),o=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,a={},c=null,h=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)s.call(t,n)&&!i.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:h,props:a,_owner:u.current}}t.jsx=q,t.jsxs=q},7573:function(e,t,r){"use strict";e.exports=r(8294)},2859:function(e,t,r){e.exports=r(7699)}},function(e){e.O(0,[293,53,744],function(){return e(e.s=3969)}),_N_E=e.O()}]);