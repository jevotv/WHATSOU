exports.id=507,exports.ids=[507],exports.modules={5109:(e,t,r)=>{Promise.resolve().then(r.bind(r,5714))},7534:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,5146,23)),Promise.resolve().then(r.t.bind(r,1725,23)),Promise.resolve().then(r.t.bind(r,7541,23)),Promise.resolve().then(r.t.bind(r,7732,23)),Promise.resolve().then(r.t.bind(r,7465,23)),Promise.resolve().then(r.t.bind(r,8336,23))},9211:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});let s=new class{setToken(e){this.token=e}getToken(){return this.token,this.token}clearToken(){this.token=null}isAuthenticated(){return!!this.getToken()}async fetch(e,t={}){let r=this.getToken(),s=await fetch(`https://whatsou.com${e}`,{...t,headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers}}),o=await s.json();if(!s.ok)throw 401===s.status&&this.clearToken(),Error(o.error||`API Error: ${s.status}`);return o}get(e){return this.fetch(e,{method:"GET"})}post(e,t){return this.fetch(e,{method:"POST",body:t?JSON.stringify(t):void 0})}put(e,t){return this.fetch(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}delete(e){return this.fetch(e,{method:"DELETE"})}constructor(){this.token=null}}},5714:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>AuthProvider,useAuth:()=>useAuth});var s=r(4196),o=r(8726),n=r(4555),i=r(9211);let h=(0,o.createContext)(void 0);function useAuth(){let e=(0,o.useContext)(h);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function AuthProvider({children:e}){let[t,r]=(0,o.useState)(null),[u,a]=(0,o.useState)(!0),l=(0,n.useRouter)();(0,o.useEffect)(()=>{let checkSession=async()=>{if(!i.h.isAuthenticated()){a(!1);return}try{let e=await i.h.get("/api/auth/session");e.authenticated&&e.user?r(e.user):i.h.clearToken()}catch(e){console.error("Session check failed:",e),i.h.clearToken()}a(!1)};checkSession()},[]);let signIn=async(e,t)=>{try{let s=await i.h.post("/api/auth/login",{phone:e,password:t});if(s.error)return{error:s.error};return i.h.setToken(s.token),r(s.user),l.push("/dashboard"),{}}catch(e){return{error:e.message}}},signUp=async(e,t)=>{try{let s=await i.h.post("/api/auth/signup",{phone:e,password:t});if(s.error)return{error:s.error};return i.h.setToken(s.token),r(s.user),l.push("/onboarding"),{}}catch(e){return{error:e.message}}};return s.jsx(h.Provider,{value:{user:t,loading:u,signIn,signUp,signOut:()=>{i.h.clearToken(),r(null),l.push("/login")}},children:e})}},8125:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>RootLayout,metadata:()=>a});var s=r(5620);r(1);var o=r(4074);let n=(0,o.createProxy)(String.raw`D:\whatsou\apps\mobile\lib\contexts\AuthContext.tsx`),{__esModule:i,$$typeof:h}=n;n.default,n.useAuth;let u=n.AuthProvider,a={title:"WhatSou Dashboard",description:"Manage your WhatsApp store"};function RootLayout({children:e}){return s.jsx("html",{lang:"ar",dir:"rtl",children:s.jsx("body",{children:s.jsx(u,{children:e})})})}},1:()=>{}};