(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2066:function(e,r,t){Promise.resolve().then(t.t.bind(t,3828,23)),Promise.resolve().then(t.bind(t,6803)),Promise.resolve().then(t.bind(t,7855))},6803:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var n=t(7573),o=t(7653),s=t(2859),u=t(8681);let i=(0,o.createContext)(void 0);function useAuth(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function AuthProvider(e){let{children:r}=e,[t,a]=(0,o.useState)(null),[c,h]=(0,o.useState)(!0),l=(0,s.useRouter)();(0,o.useEffect)(()=>{let checkSession=async()=>{if(!u.h.isAuthenticated()){h(!1);return}try{let e=await u.h.get("/api/auth/session");e.authenticated&&e.user?a(e.user):u.h.clearToken()}catch(e){console.error("Session check failed:",e),u.h.clearToken()}h(!1)};checkSession()},[]);let signIn=async(e,r)=>{try{let t=await u.h.post("/api/auth/login",{phone:e,password:r});if(t.error)return{error:t.error};return u.h.setToken(t.token),a(t.user),l.push("/dashboard"),{}}catch(e){return{error:e.message}}},signUp=async(e,r)=>{try{let t=await u.h.post("/api/auth/signup",{phone:e,password:r});if(t.error)return{error:t.error};return u.h.setToken(t.token),a(t.user),l.push("/onboarding"),{}}catch(e){return{error:e.message}}};return(0,n.jsx)(i.Provider,{value:{user:t,loading:c,signIn,signUp,signOut:()=>{u.h.clearToken(),a(null),l.push("/login")}},children:r})}},3828:function(){},8294:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(7653),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function q(e,r,t){var n,s={},c=null,h=null;for(n in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(h=r.ref),r)u.call(r,n)&&!a.hasOwnProperty(n)&&(s[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===s[n]&&(s[n]=r[n]);return{$$typeof:o,type:e,key:c,ref:h,props:s,_owner:i.current}}r.Fragment=s,r.jsx=q,r.jsxs=q},7573:function(e,r,t){"use strict";e.exports=t(8294)},2859:function(e,r,t){e.exports=t(7699)}},function(e){e.O(0,[612,293,53,744],function(){return e(e.s=2066)}),_N_E=e.O()}]);